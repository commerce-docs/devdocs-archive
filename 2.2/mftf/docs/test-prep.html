<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Preparing a test for MFTF | Archived Magento 2.2 Developer Documentation</title>
	<meta name="description" content="Archived Magento 2 Developer Documentation.">

	<link rel="stylesheet" href="/devdocs-archive/2.2/assets/css/app.css?ver=7" />
	<link rel="stylesheet" href="/devdocs-archive/2.2/assets/css/print.css?ver=7" media="print"/>

	<link rel="stylesheet" href="/devdocs-archive/2.2/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />



<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs-archive/2.2";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [
    {
      label: "DevDocs",
      name: "devdocs",
      facetFilters: [["guide_version: 2.2", "versionless: true"]],
      refinements: [
        {
          label: "Functional areas",
          attribute: "functional_areas"
        }
      ],
      baseUrl: "https://devdocs.magento.com"
    },
    {
      label: "User Guide",
      name: "merchdocs_ee",
      baseUrl: "https://docs.magento.com/m2/ee/user_guide"
    },
    {
      label: "MBI User Guide",
      name: "merchdocs-mbi",
      baseUrl: "https://docs.magento.com/mbi"
    },
    {
      label: "Marketplace User Guide",
      name: "merchdocs-marketplace",
      baseUrl: "https://docs.magento.com/marketplace/user_guide"
    },
    {
      label: "PWA",
      name: "pwa-devdocs",
      baseUrl: "https://magento.github.io/pwa-studio"
    },
    {
      label: "Order Management",
      name: "oms-en",
      baseUrl: "https://omsdocs.magento.com"
    }
  ];
</script>




	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">


	<header class="site-header">
		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs-archive/2.2/">
      <img src="/devdocs-archive/2.2/assets/i/m-logo.svg" alt=""><img src="/devdocs-archive/2.2/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      



      <!-- Main Navigation --><ul class="nav-main" role="menubar"><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Cloud</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Cloud basics</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/bk-cloud.html">Cloud Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/architecture/cloud-architecture.html">Cloud Architecture</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/release-notes/cloud-tools.html">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Cloud development</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/setup/first-time-setup.html">Local development</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/docker/docker-config.html">Launch Docker</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/docker/docker-quick-reference.html">Docker quick reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/env/environments.html">Configure Environments</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/extensions/">Magento Extensions Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Software Update Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/performance-best-practices/introduction.html">Performance Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Information</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/reference/cli/magento.html">Command-line Tools Reference</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Backend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/architecture/bk-architecture.html">Architecture</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Frontend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">API</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/marketplace/eqp/v1/api.html">Marketplace EQP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mbi/docs/getting-started.html">Business Intelligence API</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/testing.html">Magento Testing Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/introduction.html">Functional Acceptance Testing (MFTF)</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/advanced-reporting/overview.html">Advanced Reporting</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/b2b/bk-b2b.html">B2B</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Checkout</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/compliance/industry-compliance.html">Compliance</a></li><li class="" role="menuitem"><a href="http://omsdocs.magento.com/en/">Order Management</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/staging.html">Staging</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/rest/tutorials/index.html">Rest Tutorials</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/howdoi/customize_product.html">Customize Product Creation Form</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Customize Checkout</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/community/resources/support.html">Magento Support</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/videos/">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      
<div class="app-switcher">
  <div class="dropdown">
    <button id="app-switcher-trigger" class="app-switcher-trigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Documentation sites"></button>
    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="app-switcher-trigger" role="menu">
      <div class="app-switcher-content">
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Developer</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://devdocs.magento.com/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce Developer Documentation">Commerce Developer Documentation</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="http://pwastudio.io/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=PWA Studio">PWA Studio</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
      </div>
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Merchant</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/m2/ee/user_guide/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce User Guide">Commerce User Guide</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/userguides/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/mbi/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Business Intelligence">Business Intelligence</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/marketplace/user_guide/getting-started.html?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Marketplace">Marketplace</a></li>
        
      </div>
      
      </div>
    </ul>
  </div>
</div>


      <div class="search-btn">
        <button class="search-trigger search-icon" aria-label="Search"></button>
      </div>

      <form class="quick-search" action="/devdocs-archive/2.2/search.html" method="get" novalidate="novalidate">
        <input type="search" name="query" placeholder="Search" />
        <button class="quick-search-close" aria-label="Close Search">&times;</button>
      </form>

    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>

	</header>

	<div class="global-wrapper">
		
		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Magento Functional Testing Framework Guide</h4>
		<div class="collapsible-navigation">
		    <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/introduction.html">Introduction</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/getting-started.html">Getting started</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/configuration.html">Configuration</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/credentials.html">Credentials</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/data.html">Data</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/debugging.html">Debugging</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/extending.html">Extending</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/guides/git-vs-composer-install.html">Git vs. Composer installation</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/introduction.html">Merge points for extensions</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/extend-action-groups.html">Extend action groups</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/extend-data.html">Extend data</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/extend-tests.html">Extend tests</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/merge-action-groups.html">Merge action groups</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/merge-data.html">Merge data</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/merge-pages.html">Merge pages</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/merge-sections.html">Merge sections</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merge_points/merge-tests.html">Merge tests</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/merging.html">Merging</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/metadata.html">Metadata</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/page.html">Page</a></li><li class="" role="menuitem"><span>Reference</span><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/actiongroup-list.html">Action group reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/commands/codeception.html">Codecept</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/commands/mftf.html">MFTF</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/mftf-tests.html">MFTF functional test reference</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/reporting.html">Reporting</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/section.html">Section</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/section/parameterized-selectors.html">Parameterized selectors</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/section/locator-functions.html">Locator functions</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/suite.html">Suite</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/test.html">Test basics</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/test/annotations.html">Annotations</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/test/actions.html">Actions</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/test/action-groups.html">Action groups</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/test/assertions.html">Assertions</a></li></ul></li><li class="" role="menuitem"><span>Test writing</span><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/best-practices.html">Best practices</a></li><li class="active" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/test-prep.html">Preparing a test for MFTF</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/guides/selectors.html">Selectors</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/guides/test-isolation.html">Test isolation</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/guides/test-modularity.html">Test modularity</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/tips-tricks.html">Tips and tricks</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/guides/using-suites.html">Using suites</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/troubleshooting.html">Troubleshooting</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/update.html">Update MFTF</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/versioning.html">Versioning</a></li><li class="" role="menuitem"><a href="https://github.com/magento/magento2-functional-testing-framework/blob/master/.github/CONTRIBUTING.md">Contribution guidelines</a></li><li class="" role="menuitem"><a href="https://github.com/magento/magento2-functional-testing-framework/blob/master/CHANGELOG.md">Changelog</a></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">








<h1 class="page-heading">Preparing a test for MFTF</h1>
</section>

			<p>This tutorial demonstrates the process of converting a raw functional test into a properly abstracted test file, ready for publishing.</p>

<h2 id="the-abstraction-process">The abstraction process</h2>

<p>When first writing a test for a new piece of code such as a custom extension, it is likely that values are hardcoded for the specific testing environment while in development. To make the test more generic and easier for others to update and use, we need to abstract the test.
The general process:</p>

<ol>
  <li>Convert the manual test to a working, hard-coded test.</li>
  <li>Replace hardcoded selectors to a more flexible format such as <a href="https://devdocs.magento.com/mftf/docs/section/parameterized-selectors.html">parameterized selectors</a>.</li>
  <li>Convert hardcoded form values and other data to data entities.</li>
  <li>Convert <a href="https://devdocs.magento.com/mftf/docs/test/actions.html">actions</a> into <a href="https://devdocs.magento.com/mftf/docs/test/action-groups.html">action groups</a>.</li>
</ol>

<h2 id="the-manual-test">The manual test</h2>

<p>Manual tests are just that: A series of manual steps to be run.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="c">&lt;!-- Navigate to Catalog -&gt; Products page (or just open by link) --&gt;</span>
<span class="c">&lt;!-- Fill field "Name" with "Simple Product %unique_value%" --&gt;</span>
<span class="c">&lt;!-- Fill field "SKU" with "simple_product_%unique_value%" --&gt;</span>
<span class="c">&lt;!-- Fill field "Price" with "500.00" --&gt;</span>
<span class="c">&lt;!-- Fill field "Quantity" with "100" --&gt;</span>
<span class="c">&lt;!-- Fill field "Weight" with "100" --&gt;</span>
<span class="c">&lt;!-- Click "Save" button --&gt;</span>
<span class="c">&lt;!-- See success save message "You saved the product." --&gt;</span>
<span class="c">&lt;!-- Navigate to Catalog -&gt; Products page (or just open by link) --&gt;</span>
<span class="c">&lt;!-- See created product is in grid --&gt;</span>
<span class="c">&lt;!-- See "Name" in grid is valid --&gt;</span>
<span class="c">&lt;!-- See "SKU" in grid is valid --&gt;</span>
<span class="c">&lt;!-- See "Price" in grid is valid --&gt;</span>
<span class="c">&lt;!-- See "Quantity" in grid is valid --&gt;</span>
<span class="c">&lt;!-- Open Storefront Product Page and verify "Name", "SKU", "Price" --&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="the-raw-test">The raw test</h2>

<p>This test works just fine. But it will only work if everything referenced in the test stays exactly the same. This neither reusable nor extensible.
Hardcoded selectors make it impossible to reuse sections in other action groups and tasks. They can also be brittle. If Magento happens to change a <code class="language-plaintext highlighter-rouge">class</code> or <code class="language-plaintext highlighter-rouge">id</code> on an element, the test will fail.</p>

<p>Some data, like the SKU in this example, must be unique for every test run. Hardcoded values will fail here. <a href="https://devdocs.magento.com/mftf/docs/data.html">Data entities</a> allow for <code class="language-plaintext highlighter-rouge">suffix</code> and <code class="language-plaintext highlighter-rouge">prefix</code> for ensuring unique data values.</p>

<p>For our example, we have a test that creates a simple product. Note the hardcoded selectors, data values and lack of action groups. We will focus on the “product name”.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="c">&lt;!--
/**
  * Copyright © Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
--&gt;</span>

<span class="nt">&lt;tests</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:mftf:Test/etc/testSchema.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">"CreateSimpleProductTest"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;annotations&gt;</span>
            <span class="nt">&lt;features</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;stories</span> <span class="na">value=</span><span class="s">"Create Product"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">"MAJOR"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"alex"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/annotations&gt;</span>
        <span class="nt">&lt;before&gt;</span>
            <span class="c">&lt;!-- Login to Admin panel --&gt;</span>
            <span class="nt">&lt;amOnPage</span> <span class="na">url=</span><span class="s">"admin"</span> <span class="na">stepKey=</span><span class="s">"openAdminPanelPage"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"#username"</span> <span class="na">userInput=</span><span class="s">"admin"</span> <span class="na">stepKey=</span><span class="s">"fillLoginField"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"#login"</span> <span class="na">userInput=</span><span class="s">"123123q"</span> <span class="na">stepKey=</span><span class="s">"fillPasswordField"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;click</span> <span class="na">selector=</span><span class="s">"#login-form .action-login"</span> <span class="na">stepKey=</span><span class="s">"clickLoginButton"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/before&gt;</span>
        <span class="nt">&lt;after&gt;</span>
            <span class="c">&lt;!-- Logout from Admin panel --&gt;</span>
        <span class="nt">&lt;/after&gt;</span>

        <span class="c">&lt;!-- Navigate to Catalog -&gt; Products page (or just open by link) --&gt;</span>
        <span class="nt">&lt;amOnPage</span> <span class="na">url=</span><span class="s">"admin/catalog/product/index"</span> <span class="na">stepKey=</span><span class="s">"openProductGridPage"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Click "Add Product" button --&gt;</span>
        <span class="nt">&lt;click</span> <span class="na">selector=</span><span class="s">"#add_new_product-button"</span> <span class="na">stepKey=</span><span class="s">"clickAddProductButton"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;waitForPageLoad</span> <span class="na">stepKey=</span><span class="s">"waitForNewProductPageOpened"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Name" with "Simple Product %unique_value%" --&gt;</span>
  -----&gt;<span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"input[name='product[name]']"</span> <span class="na">userInput=</span><span class="s">"Simple Product 12412431"</span> <span class="na">stepKey=</span><span class="s">"fillNameField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "SKU" with "simple_product_%unique_value%" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"input[name='product[sku]']"</span> <span class="na">userInput=</span><span class="s">"simple-product-12412431"</span> <span class="na">stepKey=</span><span class="s">"fillSKUField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Price" with "500.00" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"input[name='product[price]']"</span> <span class="na">userInput=</span><span class="s">"500.00"</span> <span class="na">stepKey=</span><span class="s">"fillPriceField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Quantity" with "100" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"input[name='product[quantity_and_stock_status][qty]']"</span> <span class="na">userInput=</span><span class="s">"100"</span> <span class="na">stepKey=</span><span class="s">"fillQtyField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Weight" with "100" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"input[name='product[weight]']"</span> <span class="na">userInput=</span><span class="s">"100"</span> <span class="na">stepKey=</span><span class="s">"fillWeightField"</span> <span class="nt">/&gt;</span>

        ...
    <span class="nt">&lt;/test&gt;</span>
<span class="nt">&lt;/tests&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="extract-the-css-selectors">Extract the CSS selectors</h2>

<p>First we will extract the hardcoded CSS selector values into variables.
For instance: <code class="language-plaintext highlighter-rouge">input[name='product[name]']</code> becomes ``.
In this example <code class="language-plaintext highlighter-rouge">AdminProductFormSection</code> refers to the <code class="language-plaintext highlighter-rouge">&lt;section&gt;</code> in the XML file which contains an <code class="language-plaintext highlighter-rouge">&lt;element&gt;</code> node named <code class="language-plaintext highlighter-rouge">productName</code>. This element contains the value of the selector that was previously hardcoded: <code class="language-plaintext highlighter-rouge">input[name='product[name]']</code></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="c">&lt;!--
/**
  * Copyright © Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
--&gt;</span>

<span class="nt">&lt;tests</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:mftf:Test/etc/testSchema.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">"CreateSimpleProductTest"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;annotations&gt;</span>
            <span class="nt">&lt;features</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;stories</span> <span class="na">value=</span><span class="s">"Create Product"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">"MAJOR"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"alex"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/annotations&gt;</span>
        <span class="nt">&lt;before&gt;</span>
        <span class="nt">&lt;before&gt;</span>
            <span class="c">&lt;!-- Login to Admin panel --&gt;</span>
            <span class="nt">&lt;amOnPage</span> <span class="na">url=</span><span class="s">"admin"</span> <span class="na">stepKey=</span><span class="s">"openAdminPanelPage"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"#username"</span> <span class="na">userInput=</span><span class="s">"admin"</span> <span class="na">stepKey=</span><span class="s">"fillLoginField"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"#login"</span> <span class="na">userInput=</span><span class="s">"123123q"</span> <span class="na">stepKey=</span><span class="s">"fillPasswordField"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;click</span> <span class="na">selector=</span><span class="s">"#login-form .action-login"</span> <span class="na">stepKey=</span><span class="s">"clickLoginButton"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/before&gt;</span>
        <span class="nt">&lt;after&gt;</span>
            <span class="c">&lt;!-- Logout from Admin panel --&gt;</span>
        <span class="nt">&lt;/after&gt;</span>

        <span class="c">&lt;!-- Navigate to Catalog -&gt; Products page (or just open by link) --&gt;</span>
        <span class="nt">&lt;amOnPage</span> <span class="na">url=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"openProductGridPage"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Click "Add Product" button --&gt;</span>
        <span class="nt">&lt;click</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"clickAddProductButton"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;waitForPageLoad</span> <span class="na">stepKey=</span><span class="s">"waitForNewProductPageOpened"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Name" with "Simple Product %unique_value%" --&gt;</span>
  -----&gt;<span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">"Simple Product 12412431"</span> <span class="na">stepKey=</span><span class="s">"fillNameField"</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- Fill field "SKU" with "simple_product_%unique_value%" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">"simple-product-12412431"</span> <span class="na">stepKey=</span><span class="s">"fillSKUField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Price" with "500.00" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">"500.00"</span> <span class="na">stepKey=</span><span class="s">"fillPriceField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Quantity" with "100" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">"100"</span> <span class="na">stepKey=</span><span class="s">"fillQtyField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Weight" with "100" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">"100"</span> <span class="na">stepKey=</span><span class="s">"fillWeightField"</span> <span class="nt">/&gt;</span>
        ...
    <span class="nt">&lt;/test&gt;</span>
<span class="nt">&lt;/tests&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="the-section-file">The section file</h2>

<p>We abstract these selector values to a file named <code class="language-plaintext highlighter-rouge">AdminProductFormSection.xml</code> which is kept in the <code class="language-plaintext highlighter-rouge">Section</code> folder.
Within this file, there can be multiple <code class="language-plaintext highlighter-rouge">&lt;section&gt;</code> nodes which contains data for different parts of the test.
Here we are interested in <code class="language-plaintext highlighter-rouge">&lt;section name="AdminProductFormSection"&gt;</code>, where we are keeping our extracted values from above.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="c">&lt;!--
/**
  * Copyright © Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
--&gt;</span>
<span class="nt">&lt;sections</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:mftf:Page/etc/SectionObject.xsd"</span><span class="nt">&gt;</span>
--&gt; <span class="nt">&lt;section</span> <span class="na">name=</span><span class="s">"AdminProductFormSection"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"attributeSet"</span> <span class="na">type=</span><span class="s">"select"</span> <span class="na">selector=</span><span class="s">"div[data-index='attribute_set_id'] .admin__field-control"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"attributeSetFilter"</span> <span class="na">type=</span><span class="s">"input"</span> <span class="na">selector=</span><span class="s">"div[data-index='attribute_set_id'] .admin__field-control input"</span> <span class="na">timeout=</span><span class="s">"30"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"attributeSetFilterResult"</span> <span class="na">type=</span><span class="s">"input"</span> <span class="na">selector=</span><span class="s">"div[data-index='attribute_set_id'] .action-menu-item._last"</span> <span class="na">timeout=</span><span class="s">"30"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"attributeSetFilterResultByName"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">selector=</span><span class="s">"//label/span[text() = '']"</span> <span class="na">timeout=</span><span class="s">"30"</span> <span class="na">parameterized=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
  -----&gt;<span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"productName"</span> <span class="na">type=</span><span class="s">"input"</span> <span class="na">selector=</span><span class="s">"input[name='product[name]']"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"RequiredNameIndicator"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">selector=</span><span class="s">" return window.getComputedStyle(document.querySelector('._required[data-index=name]&amp;gt;.admin__field-label span'), ':after').getPropertyValue('content');"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"RequiredSkuIndicator"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">selector=</span><span class="s">" return window.getComputedStyle(document.querySelector('._required[data-index=sku]&amp;gt;.admin__field-label span'), ':after').getPropertyValue('content');"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"productSku"</span> <span class="na">type=</span><span class="s">"input"</span> <span class="na">selector=</span><span class="s">"input[name='product[sku]']"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"enableProductAttributeLabel"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">selector=</span><span class="s">"//span[text()='Enable Product']/parent::label"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"enableProductAttributeLabelWrapper"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">selector=</span><span class="s">"//span[text()='Enable Product']/parent::label/parent::div"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"productStatus"</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">selector=</span><span class="s">"input[name='product[status]']"</span><span class="nt">/&gt;</span>
       ...
    <span class="nt">&lt;/section&gt;</span>
    <span class="nt">&lt;section</span> <span class="na">name=</span><span class="s">"ProductInWebsitesSection"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"sectionHeader"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">selector=</span><span class="s">"div[data-index='websites']"</span> <span class="na">timeout=</span><span class="s">"30"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"website"</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">selector=</span><span class="s">"//label[contains(text(), '')]/parent::div//input[@type='checkbox']"</span> <span class="na">parameterized=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/section&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="data-entities">Data entities</h2>

<p>The hardcoded values of these form elements are abstracted to a “data entity” XML file.
We replace the hardcoded values with variables and the MFTF will do the variable substitution.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="c">&lt;!--
/**
  * Copyright © Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
--&gt;</span>

<span class="nt">&lt;tests</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:mftf:Test/etc/testSchema.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">"CreateSimpleProductTest"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;annotations&gt;</span>
            <span class="nt">&lt;features</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;stories</span> <span class="na">value=</span><span class="s">"Create Product"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">"MAJOR"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"alex"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/annotations&gt;</span>
        <span class="nt">&lt;before&gt;</span>
            <span class="c">&lt;!-- Login to Admin panel --&gt;</span>
            <span class="nt">&lt;amOnPage</span> <span class="na">url=</span><span class="s">"admin"</span> <span class="na">stepKey=</span><span class="s">"openAdminPanelPage"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"#username"</span> <span class="na">userInput=</span><span class="s">"admin"</span> <span class="na">stepKey=</span><span class="s">"fillLoginField"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">"#login"</span> <span class="na">userInput=</span><span class="s">"123123q"</span> <span class="na">stepKey=</span><span class="s">"fillPasswordField"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;click</span> <span class="na">selector=</span><span class="s">"#login-form .action-login"</span> <span class="na">stepKey=</span><span class="s">"clickLoginButton"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/before&gt;</span>
        <span class="nt">&lt;after&gt;</span>
            <span class="c">&lt;!-- Logout from Admin panel --&gt;</span>
        <span class="nt">&lt;/after&gt;</span>

        <span class="c">&lt;!-- Navigate to Catalog -&gt; Products page (or just open by link) --&gt;</span>
        <span class="nt">&lt;amOnPage</span> <span class="na">url=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"openProductGridPage"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Click "Add Product" button --&gt;</span>
        <span class="nt">&lt;click</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"clickAddProductButton"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;waitForPageLoad</span> <span class="na">stepKey=</span><span class="s">"waitForNewProductPageOpened"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Name" with "Simple Product %unique_value%" --&gt;</span>
  ----&gt;<span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillNameField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "SKU" with "simple_product_%unique_value%" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillSKUField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Price" with "500.00" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillPriceField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Quantity" with "100" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillQtyField"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Fill field "Weight" with "100" --&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillWeightField"</span> <span class="nt">/&gt;</span>

       ...
    <span class="nt">&lt;/test&gt;</span>
<span class="nt">&lt;/tests&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>One of the reasons that we abstract things is so that they are more flexible and reusable. In this case, we can leverage this flexibility and use an existing data file. For this scenario, we are using <a href="https://raw.githubusercontent.com/magento-pangolin/magento2/MageTestFest/app/code/Magento/Catalog/Test/Mftf/Data/ProductData.xml">this file</a>.</p>

<p>Data entities are important because this is where a <code class="language-plaintext highlighter-rouge">suffix</code> or <code class="language-plaintext highlighter-rouge">prefix</code> can be defined. This ensures that data values can be unique for every test run.</p>

<p>Notice that the <code class="language-plaintext highlighter-rouge">&lt;entity&gt;</code> name is <code class="language-plaintext highlighter-rouge">_defaultProduct</code> as referenced above. Within this entity is the <code class="language-plaintext highlighter-rouge">name</code> value.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;entities</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:mftf:DataGenerator/etc/dataProfileSchema.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;entity</span> <span class="na">name=</span><span class="s">"_defaultProduct"</span> <span class="na">type=</span><span class="s">"product"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"sku"</span> <span class="na">unique=</span><span class="s">"suffix"</span><span class="nt">&gt;</span>testSku<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"type_id"</span><span class="nt">&gt;</span>simple<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"attribute_set_id"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"visibility"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/data&gt;</span>
   ---&gt; <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"name"</span> <span class="na">unique=</span><span class="s">"suffix"</span><span class="nt">&gt;</span>testProductName<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"price"</span><span class="nt">&gt;</span>123.00<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"urlKey"</span> <span class="na">unique=</span><span class="s">"suffix"</span><span class="nt">&gt;</span>testurlkey<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"status"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"quantity"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">key=</span><span class="s">"weight"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;requiredEntity</span> <span class="na">type=</span><span class="s">"product_extension_attribute"</span><span class="nt">&gt;</span>EavStockItem<span class="nt">&lt;/requiredEntity&gt;</span>
        <span class="nt">&lt;requiredEntity</span> <span class="na">type=</span><span class="s">"custom_attribute_array"</span><span class="nt">&gt;</span>CustomAttributeCategoryIds<span class="nt">&lt;/requiredEntity&gt;</span>
    <span class="nt">&lt;/entity&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">unique="suffix"</code> attribute appends a random numeric string to the end of the actual data string. This ensures that unique values are used for each test run.
See  <a href="https://devdocs.magento.com/mftf/docs/data.html">Input testing data</a> for more information.</p>

<h2 id="convert-actions-to-action-groups">Convert actions to action groups</h2>

<p>Action groups are sets of steps that are run together. Action groups are designed to break up multiple individual steps into logical groups. For example: logging into the admin panel requires ensuring the login form exists, filling in two form fields and clicking the <strong>Submit</strong> button. These can be bundled into a single, reusable “LoginAsAdmin” action group that can be applied to any other test. This leverages existing code and prevents duplication of effort. We recommend that all steps in a test be within an action group.</p>

<p>Using action groups can be very useful when testing extensions.
Extending the example above, assume the first extension adds a new field to the admin log in, a Captcha for example.
The second extension we are testing needs to log in AND get past the Captcha.</p>

<ol>
  <li>The admin login is encapsulated in an action group.</li>
  <li>The Captcha extension properly extends the <code class="language-plaintext highlighter-rouge">LoginAsAdmin</code> capture group using the <code class="language-plaintext highlighter-rouge">merge</code> functionality.</li>
  <li>Now the second extension can call the <code class="language-plaintext highlighter-rouge">LoginAsAdmin</code> action group and because of the <code class="language-plaintext highlighter-rouge">merge</code>, it will automatically include the Captcha field.</li>
</ol>

<p>In this case, the action group is both reusable and extensible!</p>

<p>We further abstract the test by putting these action groups in their own file: <a href="https://raw.githubusercontent.com/magento-pangolin/magento2/e5671d84aa63cad772fbba757005b3d89ddb79d9/app/code/Magento/Catalog/Test/Mftf/ActionGroup/AdminProductActionGroup.xml">‘app/code/Magento/Catalog/Test/Mftf/ActionGroup/AdminProductActionGroup.xml’</a></p>

<p>To create an action group, take the steps and put them within an <code class="language-plaintext highlighter-rouge">&lt;actionGroup&gt;</code> element. Note that the <code class="language-plaintext highlighter-rouge">&lt;argument&gt;</code> node defines the <code class="language-plaintext highlighter-rouge">_defaultProduct</code> data entity that is required for the action group.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="c">&lt;!--
/**
  * Copyright © Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
--&gt;</span>
<span class="nt">&lt;actionGroups</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
              <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:mftf:Test/etc/actionGroupSchema.xsd"</span><span class="nt">&gt;</span>
<span class="c">&lt;!--Fill main fields in create product form--&gt;</span>
    <span class="nt">&lt;actionGroup</span> <span class="na">name=</span><span class="s">"fillMainProductForm"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"product"</span> <span class="na">defaultValue=</span><span class="s">"_defaultProduct"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
  -----&gt;<span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillProductName"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillProductSku"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillProductPrice"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillProductQty"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;selectOption</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"selectStockStatus"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;selectOption</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">"This item has weight"</span> <span class="na">stepKey=</span><span class="s">"selectWeight"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillProductWeight"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;click</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"openSeoSection"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;fillField</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillUrlKey"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/actionGroup&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Note how the <code class="language-plaintext highlighter-rouge">&lt;argument&gt;</code> node takes in the <code class="language-plaintext highlighter-rouge">_defaultProduct</code> data entity and renames it to <code class="language-plaintext highlighter-rouge">product</code>, which is then used for the <code class="language-plaintext highlighter-rouge">userInput</code> values.</p>

<p>Now we can reference this action group within our test (and any other test).</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="c">&lt;!--
/**
  * Copyright © Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
--&gt;</span>

<span class="nt">&lt;tests</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:mftf:Test/etc/testSchema.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">"CreateSimpleProductTest"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;annotations&gt;</span>
            <span class="nt">&lt;features</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;stories</span> <span class="na">value=</span><span class="s">"Create Product"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;description</span> <span class="na">value=</span><span class="s">"Admin should be able to create simple product."</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">"MAJOR"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"Catalog"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;group</span> <span class="na">value=</span><span class="s">"alex"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/annotations&gt;</span>
        <span class="nt">&lt;before&gt;</span>
            <span class="c">&lt;!-- Login to Admin panel --&gt;</span>
            <span class="nt">&lt;actionGroup</span> <span class="na">ref=</span><span class="s">"LoginAsAdmin"</span> <span class="na">stepKey=</span><span class="s">"loginToAdminPanel"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/before&gt;</span>
        <span class="nt">&lt;after&gt;</span>
            <span class="c">&lt;!-- Logout from Admin panel --&gt;</span>
        <span class="nt">&lt;/after&gt;</span>

        <span class="c">&lt;!-- Navigate to Catalog -&gt; Products page (or just open by link) --&gt;</span>
        <span class="nt">&lt;amOnPage</span> <span class="na">url=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"openProductGridPage"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;waitForPageLoad</span> <span class="na">stepKey=</span><span class="s">"waitForProductGridPageLoaded"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Click "Add Product" button --&gt;</span>
        <span class="nt">&lt;actionGroup</span> <span class="na">ref=</span><span class="s">"goToCreateProductPage"</span> <span class="na">stepKey=</span><span class="s">"goToCreateProductPage"</span> <span class="nt">/&gt;</span>
  -----&gt;<span class="nt">&lt;fillField</span> <span class="na">selector=</span><span class="s">""</span> <span class="na">userInput=</span><span class="s">""</span> <span class="na">stepKey=</span><span class="s">"fillProductName"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;actionGroup</span> <span class="na">ref=</span><span class="s">"fillMainProductForm"</span> <span class="na">stepKey=</span><span class="s">"fillProductForm"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"product"</span> <span class="na">value=</span><span class="s">"_defaultProduct"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/actionGroup&gt;</span>

        <span class="c">&lt;!-- See success save message "You saved the product." --&gt;</span>
        <span class="nt">&lt;actionGroup</span> <span class="na">ref=</span><span class="s">"saveProductForm"</span> <span class="na">stepKey=</span><span class="s">"clickSaveOnProductForm"</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;actionGroup</span> <span class="na">ref=</span><span class="s">"AssertProductInGridActionGroup"</span> <span class="na">stepKey=</span><span class="s">"assertProductInGrid"</span> <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Open Storefront Product Page and verify "Name", "SKU", "Price" --&gt;</span>
        <span class="nt">&lt;actionGroup</span> <span class="na">ref=</span><span class="s">"AssertProductInStorefrontProductPage"</span> <span class="na">stepKey=</span><span class="s">"assertProductInStorefrontProductPage"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"product"</span> <span class="na">value=</span><span class="s">"_defaultProduct"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/actionGroup&gt;</span>
    <span class="nt">&lt;/test&gt;</span>
<span class="nt">&lt;/tests&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>A well written test will end up being a set of action groups.
The finished test is fully abstracted in such a way that it is short and readable and importantly, the abstracted data and action groups can be used again.</p>

<!-- Link Definitions -->

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  
  <div class="page-updated">
    <img src="/devdocs-archive/2.2/i/icons/time.svg" alt="Updated" />
    <time id="last-modified-at" itemprop="dateModified" datetime="2019-08-09">
      Aug 9th, 2019
    </time>
  </div>
  

  

  

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      

<ul class="nav footer-links" role="menu">

  <li class="" role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md">Become a Contributor</a></li>

  <li class="" role="menuitem"><a href="https://glossary.magento.com/">Glossary</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/privacy/">Privacy Policy</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/">Terms of Service</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/licensing/">License/Trademark FAQ</a></li>

  <li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>

  <li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/release-notes/packages-open-source.html">Third-Party Licenses</a></li>

</ul>

    </div>

		<div class="copyright-date">&copy; 2023 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs-archive/2.2/assets/js/app.min.js?ver=7"></script>





<script type="text/javascript" src="/devdocs-archive/2.2/common/js/last-modified-at.js"></script>
<script type="text/javascript" src="/devdocs-archive/2.2/common/js/glossary-link-enhancer.js"></script>


</body>
</html>

