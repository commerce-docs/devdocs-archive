<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Deployment process | Archived Magento 2.2 Developer Documentation</title>
	<meta name="description" content="Archived Magento 2 Developer Documentation.">

	<link rel="stylesheet" href="/devdocs/2.2/assets/css/app.css?ver=7" />
	<link rel="stylesheet" href="/devdocs/2.2/assets/css/print.css?ver=7" media="print"/>

	<link rel="stylesheet" href="/devdocs/2.2/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />



<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs/2.2";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [
    {
      label: "DevDocs",
      name: "devdocs",
      facetFilters: [["guide_version: 2.2", "versionless: true"]],
      refinements: [
        {
          label: "Functional areas",
          attribute: "functional_areas"
        }
      ],
      baseUrl: "https://devdocs.magento.com"
    },
    {
      label: "User Guide",
      name: "merchdocs_ee",
      baseUrl: "https://docs.magento.com/m2/ee/user_guide"
    },
    {
      label: "MBI User Guide",
      name: "merchdocs-mbi",
      baseUrl: "https://docs.magento.com/mbi"
    },
    {
      label: "Marketplace User Guide",
      name: "merchdocs-marketplace",
      baseUrl: "https://docs.magento.com/marketplace/user_guide"
    },
    {
      label: "PWA",
      name: "pwa-devdocs",
      baseUrl: "https://magento.github.io/pwa-studio"
    },
    {
      label: "Order Management",
      name: "oms-en",
      baseUrl: "https://omsdocs.magento.com"
    }
  ];
</script>




	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">


	<header class="site-header">
		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs/2.2/">
      <img src="/devdocs/2.2/assets/i/m-logo.svg" alt=""><img src="/devdocs/2.2/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      



      <!-- Main Navigation --><ul class="nav-main" role="menubar"><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Cloud</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Cloud basics</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/bk-cloud.html">Cloud Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/architecture/cloud-architecture.html">Cloud Architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/release-notes/cloud-tools.html">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Cloud development</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/setup/first-time-setup.html">Local development</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-config.html">Launch Docker</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-quick-reference.html">Docker quick reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/environments.html">Configure Environments</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/extensions/">Magento Extensions Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Software Update Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/performance-best-practices/introduction.html">Performance Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Information</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/reference/cli/magento.html">Command-line Tools Reference</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Backend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/architecture/bk-architecture.html">Architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Frontend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">API</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/marketplace/eqp/v1/api.html">Marketplace EQP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/mbi/docs/getting-started.html">Business Intelligence API</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/testing.html">Magento Testing Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/mftf/docs/introduction.html">Functional Acceptance Testing (MFTF)</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/advanced-reporting/overview.html">Advanced Reporting</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/b2b/bk-b2b.html">B2B</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Checkout</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/compliance/industry-compliance.html">Compliance</a></li><li class="" role="menuitem"><a href="http://omsdocs.magento.com/en/">Order Management</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/extension-dev-guide/staging.html">Staging</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/rest/tutorials/index.html">Rest Tutorials</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/howdoi/customize_product.html">Customize Product Creation Form</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Customize Checkout</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/community/resources/support.html">Magento Support</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/videos/">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      
<div class="app-switcher">
  <div class="dropdown">
    <button id="app-switcher-trigger" class="app-switcher-trigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Documentation sites"></button>
    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="app-switcher-trigger" role="menu">
      <div class="app-switcher-content">
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Developer</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://devdocs.magento.com/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce Developer Documentation">Commerce Developer Documentation</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="http://pwastudio.io/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=PWA Studio">PWA Studio</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
      </div>
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Merchant</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/m2/ee/user_guide/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce User Guide">Commerce User Guide</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/userguides/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/mbi/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Business Intelligence">Business Intelligence</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/marketplace/user_guide/getting-started.html?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Marketplace">Marketplace</a></li>
        
      </div>
      
      </div>
    </ul>
  </div>
</div>


      <div class="search-btn">
        <button class="search-trigger search-icon" aria-label="Search"></button>
      </div>

      <form class="quick-search" action="/devdocs/2.2/search.html" method="get" novalidate="novalidate">
        <input type="search" name="query" placeholder="Search" />
        <button class="quick-search-close" aria-label="Close Search">&times;</button>
      </form>

    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>

	</header>

	<div class="global-wrapper">
		
		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Magento Commerce Cloud</h4>
		<div class="collapsible-navigation">
		    <ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/bk-cloud.html">Overview</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/onboarding/onboarding-tasks.html">Onboarding tasks</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/architecture/cloud-architecture.html">Architecture</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/basic-information/starter-architecture.html">Starter architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/basic-information/starter-develop-deploy-workflow.html">Starter develop and deploy workflow</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/architecture/pro-architecture.html">Pro architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/architecture/pro-develop-deploy-workflow.html">Pro develop and deploy workflow</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/architecture/scaled-architecture.html">Scaled architecture</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/requirements/cloud-requirements.html">Technologies and requirements</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/reference/cloud-composer.html">Composer</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/reference/ece-tools-reference.html">ece-tools package</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/reference/git-integration.html">Git</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/environments-ssh.html">SSH and sFTP</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/new-relic.html">New Relic</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-integrate-blackfire.html">Blackfire.io</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/sendgrid.html">SendGrid</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/setup/first-time-setup.html">Local development setup</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/before/before-workspace.html">Prepare for manual setup</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/before/before-workspace-ssh.html">Enable SSH keys</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/before/before-setup-env-2_clone.html">Clone and branch the project</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/before/before-setup-env-install.html">Install Magento</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/setup/first-time-deploy.html">First time deployment</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/howtos/debug.html">Optional - Configure Xdebug</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/howtos/sample-data.html">Optional - Install sample data</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-development.html">Docker development</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-config.html">Launch Docker</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-development-debug.html">Configure Xdebug for Docker</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-database.html">Connect to the database</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-development-testing.html">Functional testing in Docker</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-quick-reference.html">Docker quick reference</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/integrations/cloud-integrations.html">Integrations</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/integrations/bitbucket-integration.html">Bitbucket integration</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/integrations/github-integration.html">GitHub integration</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/integrations/health-notifications.html">Health notifications</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/setup/first-time-setup-import-first-steps.html">Import existing code into a project</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/setup/first-time-setup-import-prepare.html">Prepare your existing Magento Commerce system</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/setup/first-time-setup-import-import.html">Import Magento Commerce code</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/configure/configuration-overview.html">Configure your store</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/configure/configure-best-practices.html">Best practices for store configuration</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/paypal-onboarding.html">Set up PayPal</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/configure/setup-b2b.html">Set up Magento B2B</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/configure/setup-cron-jobs.html">Set up cron jobs</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/howtos/install-components.html">Install, manage, and upgrade modules</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/howtos/custom-theme.html">Install a theme</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/configure/import-url-rewrites.html">Import URL Rewrites</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/cloud-fastly.html">Configure Fastly services</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/configure-fastly.html">Set up Fastly</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/cloud-fastly-custom-response.html">Customize error and maintenance pages</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/fastly-waf-service.html">Web Application Firewall</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/fastly-image-optimization.html">Image Optimization</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/cloud-vcl-custom-snippets.html">Custom VCL snippets</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/fastly-vcl-wordpress.html">Reroute requests to a CMS backend</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/fastly-vcl-badreferer.html">Block referral spam</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/fastly-vcl-whitelist.html">Secure access to the Magento Admin UI</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/fastly-vcl-blocking.html">Custom VCL for blocking</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/cdn/trouble-fastly.html">Fastly troubleshooting</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/environments.html">Configure environments</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-conf-files_magento-app.html">Application</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/set-cache.html">Set cache for static files</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/magento-env-yaml.html">Build and deploy</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/setup-notifications.html">Set up notifications</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/log-handlers.html">Logging handlers</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/variables-intro.html">Environment variables</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/environment-vars_magento.html">ADMIN variables</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/variables-global.html">Global variables</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/variables-build.html">Build variables</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/variables-cloud.html">Cloud variables</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/variables-deploy.html">Deploy variables</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/variables-post-deploy.html">Post-deploy variables</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/working-with-variables.html">Working with variables</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-conf-files_routes.html">Routes</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-routes-more-cache.html">Caching</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-routes-more-redir.html">Redirects</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-routes-more-ssi.html">Server side includes</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-conf-files_services.html">Services</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-conf-files_services-mysql.html">Set up MySQL service</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-conf-files_services-redis.html">Set up Redis service</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-conf-files_services-elastic.html">Set up Elasticsearch service</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-conf-files_services-rabbit.html">Set up RabbitMQ service</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/restore-environment.html">Restore an environment</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/sens-data-over.html">Configuration management for store settings</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/sens-data-initial.html">Example of managing system-specific settings</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/projects.html">Manage your project</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-webint-basic.html">Configure your project</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-start.html">Project structure</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/log-locations.html">Log locations</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/user-admin.html">Create and manage users</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-webint-branch.html">Manage branches with the Interface</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/environments-start.html">Manage branches with the CLI</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/profile-database-queries.html">Profile database queries</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/manage-disk-space.html">Manage disk space</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/monitor-performance.html">Monitor performance</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-webint-snap.html">Snapshots and backup management</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/deploy/optimize-cloud-deployment.html">Optimize deployment</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/deploy/cloud-deployment-process.html">Cloud deployment process</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/deploy/reduce-downtime.html">Zero downtime deployment</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/deploy/static-content-deployment.html">Static content deployment</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/deploy/smart-wizards.html">Smart wizards</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/stage-prod-live.html">Deploy your store</a><ul><li class="active" role="menuitem"><a href="/devdocs/2.2/cloud/reference/discover-deploy.html">Deployment process</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/deploy/continuous-deployment.html">Continuous deployment</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/live-prot.html">Protective block</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/live-sanity-check.html">Build and deploy on local</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/stage-prod-migrate.html">Deploy code and migrate static files and data</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/stage-prod-test.html">Test deployment</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/live.html">Go live and launch</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/go-live-checklist.html">Go live checklist</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/live/launch-steps.html">Launch steps</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/trouble.html">Troubleshooting</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/troubleshoot-deployment.html">Troubleshoot deployment</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/reset-cron-jobs.html">Reset cron jobs</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/trouble-error-html-minification.html">Resolve issues with HTML minification</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/restore-configuration-files.html">Restore configuration files</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/site-availability.html">Site availability</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/robots-sitemap.html">Add site map and search engine robots</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/trouble/theme-troubleshooting.html">Theme troubleshooting</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-upgrade-parent.html">Upgrades and patches</a><ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/ece-tools-upgrade-project.html">Upgrade to use ece-tools</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/ece-tools-update.html">Update ece-tools version</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-patch.html">Apply custom patches</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-upgrade.html">Upgrade Magento version</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/release-notes/cloud-tools.html">Release notes</a></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">








<h1 class="page-heading">Deployment process</h1>
</section>

			<p>Build and deploy scripts activate when you merge code to a remote environment.  These scripts use the environment configuration files and application code to prepare data and configurations to provision Cloud infrastructure and services, and to install or update the  application and third-party and custom extensions in the Cloud environment.</p>

<p>The build and deploy process is slightly different for each plan:</p>

<ul>
  <li>
    <p><strong>Starter plans</strong>—For the Integration environment, every active branch builds and deploys to a full environment for access and testing. Fully test your code after merging to the <code class="language-plaintext highlighter-rouge">staging</code> branch. To go live, push <code class="language-plaintext highlighter-rouge">staging</code> to <code class="language-plaintext highlighter-rouge">master</code> to deploy to the Production environment. You have full access to all branches through the Project Web Interface and the CLI commands.</p>
  </li>
  <li>
    <p><strong>Pro plans</strong>—For the Integration environment, every <em>active</em> branch builds and deploys to a full environment for access and testing. You must merge your code to the <code class="language-plaintext highlighter-rouge">integration</code> branch before you can merge to the Staging environment and then the Production environment. You can merge to the Staging and Production environments using the Project Web Interface or using SSH and Magento Cloud CLI commands.</p>
  </li>
</ul>

<h2 id="track">Track the process</h2>

<p>You can track build and deploy actions in real-time using the terminal or the Project Web UI Status messages—<code class="language-plaintext highlighter-rouge">in-progress</code>, <code class="language-plaintext highlighter-rouge">pending</code>, <code class="language-plaintext highlighter-rouge">success</code>, or <code class="language-plaintext highlighter-rouge">failed</code>—display during the deployment process. You can view details in the log files. See <a href="/devdocs/2.2/cloud/project/log-locations.html">Log locations</a>.</p>

<p>If you are using external GitHub repositories, the log of operations does not display in the GitHub session. However, you can still follow activity in the interface for the external repository and the Project Web Interface. See <a href="/devdocs/2.2/cloud/integrations/cloud-integrations.html">Integrations</a>.</p>

<p class="bs-callout-info">In Integration environments, you cannot view the deploy logs from the Project Web Interface. This feature is available only for Production and Staging environments. However, you can view logs for every phase of the deployment in any environment using the Magento <a href="/devdocs/2.2/cloud/project/log-locations.html#build-and-deploy-logs">build and deploy</a> logs.</p>

<h2 id="cloud-deploy-conf">Project configuration</h2>

<p>A set of YAML configuration files located in the project root directory define your Magento installation and describe its dependencies. If you intend to make changes, modify the YAML files in your local branch. The build and deploy scripts access those files for specific settings.</p>

<p>For all Starter environments and Pro Integration environments, pushing your Git branch updates all settings and configurations dependent on these files.</p>

<ul>
  <li><a href="/devdocs/2.2/cloud/project/project-conf-files_magento-app.html"><code class="language-plaintext highlighter-rouge">.magento.app.yaml</code></a>—defines how to build and deploy Magento, including services, hooks, cron jobs, and more.</li>
  <li><a href="/devdocs/2.2/cloud/project/magento-env-yaml.html"><code class="language-plaintext highlighter-rouge">.magento.env.yaml</code></a>—centralizes the management of build and deploy actions across all of your environments, including Pro Staging and Production, using environment variables.</li>
  <li><a href="/devdocs/2.2/cloud/project/project-conf-files_routes.html"><code class="language-plaintext highlighter-rouge">.magento/routes.yaml</code></a>—defines how Magento processes an incoming URL.</li>
  <li><a href="/devdocs/2.2/cloud/project/project-conf-files_services.html"><code class="language-plaintext highlighter-rouge">.magento/services.yaml</code></a>—defines the services Magento uses by name and version. For example, this file may include versions of MySQL, PHP extensions, and Elasticsearch. These are referred to as <em>services</em>.</li>
  <li><a href="/devdocs/2.2/cloud/live/sens-data-over.html"><code class="language-plaintext highlighter-rouge">app/etc/config.php</code></a>—defines the <a href="/devdocs/2.2/cloud/live/sens-data-over.html#cloud-clp-settings">system-specific settings</a> Magento uses to configure your store. Magento auto-generates this file if it does not detect it during the build phase and includes a list of modules and extensions. If the file exists, the build phase continues as normal, compresses static files using <code class="language-plaintext highlighter-rouge">gzip</code>, and deploys the files. If you follow <a href="/devdocs/2.2/cloud/live/sens-data-over.html">Configuration Management</a> at a later time, the commands update the file without requiring additional steps.</li>
</ul>

<h2 id="requiredfiles">Required files for your Git branch</h2>

<p>Your Git branch must have the following files for building and deploying in your local environment and to Integration, Staging, and Production environments:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">auth.json</code>—in the root Magento directory. This file includes the Magento Authentication keys entered when creating the project. The file is generated as part of autoprovisioning a new project using a blank template. If you need to verify the file and settings, see <a href="/devdocs/2.2/cloud/trouble/troubleshoot-deployment.html">Troubleshooting deployment</a>.</li>
  <li><a href="/devdocs/2.2/cloud/live/sens-data-over.html"><code class="language-plaintext highlighter-rouge">app/etc/config.php</code></a>—auto-generates during the build phase if it does not exist.</li>
  <li><a href="/devdocs/2.2/cloud/project/project-conf-files_magento-app.html"><code class="language-plaintext highlighter-rouge">.magento.app.yaml</code></a>—updates and saves to the root directory.</li>
  <li><a href="/devdocs/2.2/cloud/project/project-conf-files_services.html"><code class="language-plaintext highlighter-rouge">.magento/services.yaml</code></a>—updates and saves to the <code class="language-plaintext highlighter-rouge">magento/</code> directory.</li>
  <li><a href="/devdocs/2.2/cloud/project/project-conf-files_routes.html"><code class="language-plaintext highlighter-rouge">.magento/routes.yaml</code></a>—updates and saves to the <code class="language-plaintext highlighter-rouge">magento/</code> directory.</li>
</ul>

<h2 id="best-practices">Best practices for builds and deployment</h2>

<p>We highly recommend the following best practices and considerations for your deployment process:</p>

<ul>
  <li>
    <p><strong>Ensure that you are running the most current version of the <code class="language-plaintext highlighter-rouge">ece-tools</code> package</strong>–See <a href="/devdocs/2.2/cloud/release-notes/cloud-tools.html">Release notes for ece-tools</a>.</p>
  </li>
  <li>
    <p><strong>Follow the build and deploy process</strong>–Ensure that you have the correct code in each environment to avoid overwriting configurations when merging code between environments. For example, to make configuration changes that apply to all environments, modify and test the changes in the local environment before deploying to Integration, and then deploy and test the changes in Staging before deploying to Production. When you merge from one environment to another, the deployment overwrites all code in the remote environment, except environment-specific configuration and settings. See <a href="#steps">Build and deploy full steps</a>.</p>
  </li>
  <li>
    <p><strong>Use the same variables across environments</strong>–The values for these variables may differ across environments; however, you usually need the same variables in each environment. See <a href="/devdocs/2.2/cloud/live/sens-data-over.html">Configuration management for store settings</a>.</p>
  </li>
  <li>
    <p><strong>Keep sensitive configuration values and data in environment-specific variables</strong>–This includes variables specified using the Magento Cloud CLI, the Project Web interface, or added to the <code class="language-plaintext highlighter-rouge">env.php</code> file. See <a href="/devdocs/2.2/cloud/env/working-with-variables.html">Working with environment variables</a>.</p>
  </li>
  <li>
    <p><strong>Ensure that all code is available in the environment branch</strong>–If you point to or include hooks to code in other branches, such as a private branch, you may encounter problems with the build and deploy process. For example, if you include a theme from a private repository in your branch, the theme will not build with the Magento code.</p>
  </li>
  <li>
    <p><strong>Add new extensions, integrations, and code in iterated branches</strong>–Make and test changes locally, push to Integration, then to Staging and Production. Test and resolve issues in each environment before merging the updates to the next environment. Some extensions and integrations must be enabled and configured in a specific order due to dependencies. Adding these in groups can make your build and deploy process much easier and help determine where issues occur.</p>
  </li>
  <li>
    <p><strong>Verify service versions and relationships and the ability to connect</strong>–Verify the services that are available to your application and ensure you are using the most current, compatible version. See <a href="/devdocs/2.2/cloud/project/project-conf-files_services.html#service-versions">Service versions</a> and <a href="/devdocs/2.2/cloud/project/project-conf-files_services.html#service-relationships">Service relationships</a>.</p>

    <p class="bs-callout-warning">If your project uses a shared Staging environment, be aware that changes to the Elasticsearch installation in the Staging environment affect the Production environment.</p>
  </li>
  <li>
    <p><strong>Test locally and in the Integration environment before deploying to Staging and Production</strong>–Identify and fix issues in your local and Integration environments to prevent extended downtime when you deploy to Staging and Production environments.</p>

    <ul>
      <li>
        <p>Use the <code class="language-plaintext highlighter-rouge">magento-cloud local:build</code> command to test the build in your local environment. Identify and fix any issues related to composer dependencies and environment and application configuration before deploying to a remote environment. See <a href="/devdocs/2.2/cloud/live/live-sanity-check.html#test-build">Test build your code locally before deployment</a>.</p>
      </li>
      <li>
        <p>Run the Magento Commerce Cloud smart wizard to ensure that your Cloud project configuration follows best practices for build and deployment including static content deployment (SCD) strategy. See <a href="/devdocs/2.2/cloud/deploy/smart-wizards.html">Smart wizard</a>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>After completing testing in local and Integration environments, deploy and test in the Staging environment</strong>–See <a href="/devdocs/2.2/cloud/live/stage-prod-migrate.html#code">Deploy code to Staging and Production</a>.</p>
  </li>
  <li>
    <p><strong>Check Production environment configuration</strong>–Before deploying to Production, complete the following tasks:</p>

    <ul>
      <li>
        <p>Ensure that you can connect to all three nodes in the Production environment using <a href="/devdocs/2.2/cloud/env/environments-ssh.html#ssh">SSH</a>.</p>
      </li>
      <li>
        <p>Verify that Indexers are set to <em>Update on Schedule</em>. See <a href="https://devdocs.magento.com/guides/v2.3/extension-dev-guide/indexing.html">Indexing modes</a> in the <em>Extension Developer Guide</em>.</p>
      </li>
      <li>
        <p>Prepare the environment by updating any environment-specific variables in the Production code, verifying service availability and compatibility, and making any other required configuration changes.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Monitor the deploy process</strong>–Review the deployment status messages and mitigate issues as needed. Review the Cloud <a href="/devdocs/2.2/cloud/project/log-locations.html">logs</a> for detailed log messages.</p>
  </li>
</ul>

<h2 id="best-practices-for-upgrading-your-project">Best practices for upgrading your project</h2>

<p>Follow best practices for builds and deployment, and use the <a href="/devdocs/2.2/cloud/project/project-upgrade-parent.html">Upgrades and patches</a> workflow to upgrade your project and environments. Use the following guidelines to plan your upgrade and post-upgrade work:</p>

<ul>
  <li>
    <p><strong>Backup your project</strong>–Before upgrading the Magento Commerce and any third-party or custom extensions, back up the database in Integration, Staging, and Production environments. See <a href="/devdocs/2.2/cloud/project/project-upgrade.html#back-up-the-database">Back up the database</a>.</p>
  </li>
  <li>
    <p><strong>Check for compatibility issues</strong>–</p>

    <ul>
      <li>
        <p>Ensure that any custom themes are compatible with the new Magento Commerce version</p>
      </li>
      <li>
        <p>After upgrading third party and custom extensions, use the <code class="language-plaintext highlighter-rouge">magento-cloud local:build</code> command to validate composer dependencies before deploying.</p>
      </li>
      <li>
        <p>Review the Magento Commerce release notes and extension documentation to ensure that you have implemented any workarounds or configuration changes required to address known functional issues and bugs related to the upgraded Magento version and extensions.</p>
      </li>
      <li>
        <p>Ensure that the installed service versions are compatible with the new Magento Commerce version, and upgrade services as needed. See <a href="/devdocs/2.2/cloud/project/project-conf-files_services.html">Services</a>.</p>
      </li>
      <li>
        <p>Test your database to address any issues introduced by the updates to the Magento version and extensions.</p>
      </li>
      <li>
        <p>Make any required updates to environment-specific settings before deploying to the remote environment.</p>
      </li>
      <li>
        <p>Ensure that the Elasticsearch service version is compatible with the Elasticsearch PHP client version. See <a href="/devdocs/2.2/cloud/project/project-conf-files_services-elastic.html">Set up Elasticsearch</a>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Check database connectivity and available storage in remote environments</strong>–</p>

    <ul>
      <li>
        <p>Use SSH to log in to the remote server and verify the connection to the MySQL database. See <a href="/devdocs/2.2/cloud/project/project-conf-files_services-mysql.html#connect-to-the-database">Connect to the database</a>.</p>
      </li>
      <li>
        <p>Verify available storage in the remote environment–Use the <code class="language-plaintext highlighter-rouge">disk free</code> command to view and manage available disk space on your Cloud environments. See <a href="/devdocs/2.2/cloud/project/manage-disk-space.html">Manage disk space</a>.</p>

        <ul>
          <li>
            <p>Check the size of the upgraded database and verify that the <code class="language-plaintext highlighter-rouge">services.yaml</code> file has enough disk space allocated.</p>
          </li>
          <li>
            <p>Free up disk space–Clear the cache, and clean the <code class="language-plaintext highlighter-rouge">/log</code> and <code class="language-plaintext highlighter-rouge">/tmp</code> directories before deploying.</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Plan and perform a successful upgrade on local and Integration environments, before deploying to Staging</strong>–After upgrade, test your deployment and resolve any issues. See <a href="/devdocs/2.2/cloud/live/live-sanity-check.html">Build and deploy on local</a>.</p>
  </li>
  <li>
    <p><strong>Merge code to Staging, and then to Production</strong>–Test and resolve any issues in the Staging environment before pushing changes to the Production environment. See <a href="/devdocs/2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a>.</p>
  </li>
  <li>
    <p><strong>Complete Post upgrade tasks</strong>–</p>

    <ul>
      <li>
        <p>Use SSH to log in to the remote server and verify the following:</p>

        <ul>
          <li>
            <p>Check indexer status and reindex as needed. See <a href="https://devdocs.magento.com/guides/v2.3/config-guide/cli/config-cli-subcommands-index.html">Manage the indexers</a>.</p>
          </li>
          <li>
            <p>Check the <code class="language-plaintext highlighter-rouge">cron</code> logs and the <code class="language-plaintext highlighter-rouge">cron_schedule</code> table in the Magento database to verify cron status, and rerun cron jobs as needed.
See <a href="https://devdocs.magento.com/guides/v2.3/config-guide/cli/config-cli-subcommands-cron.html#logging">Logging</a> in the <em>Configuration Guide</em>.</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Complete post-upgrade User Acceptance Testing UAT on Staging and Production environments and fix any issues related to third-party and custom extension upgrades. See <a href="/devdocs/2.2/cloud/live/stage-prod-test.html">User Acceptance Testing (UAT)</a>.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="cloud-deploy-over-phases">Five phases of Integration build and deployment</h2>

<p>The following phases occur in your local development environment and the Integration environment. For Pro plans, the code is not deployed to the Staging or Production environments in these initial phases. See <a href="/devdocs/2.2/cloud/live/stage-prod-migrate.html">Deploy code to Staging and Production</a>.</p>

<p>Integration build and deployment consists of the following phases:</p>

<p><a href="#cloud-deploy-over-phases-conf">Phase 1: Configuration validation and code retrieval</a></p>

<p><a href="#cloud-deploy-over-phases-build">Phase 2: Build</a></p>

<p><a href="#cloud-deploy-over-phases-slug">Phase 3: Prepare slug</a></p>

<p><a href="#cloud-deploy-over-phases-slugclus">Phase 4: Deploy slugs and cluster</a></p>

<p><a href="#cloud-deploy-over-phases-hook">Phase 5: Deployment hooks</a></p>

<p><a href="#cloud-deploy-over-phases-route">Post-deployment: configure routing</a></p>

<p>For detailed instructions, see <a href="#steps">Build and deploy full steps</a>.</p>

<h3 id="cloud-deploy-over-phases-conf">Phase 1: Code and configuration validation</h3>

<p>When you initially set up a project from a template, we retrieve the code from <a href="https://github.com/magento/magento-cloud">the Magento Commerce Cloud template</a>. This code repo is cloned to your project as the <code class="language-plaintext highlighter-rouge">master</code> branch.</p>

<ul>
  <li><strong>For Starter</strong>—<code class="language-plaintext highlighter-rouge">master</code> branch is your Production environment.</li>
  <li><strong>For Pro</strong>—<code class="language-plaintext highlighter-rouge">master</code> begins as origin branch for the Integration environment.</li>
</ul>

<p>You should create a branch from <code class="language-plaintext highlighter-rouge">master</code> for your custom code, extensions and modules, and third party integrations. We provide a full Integration environment for testing your code in the cloud.</p>

<p>When you push your code from your local workspace to the remote repository, a series of checks and code validation completes prior to build and deploy scripts. The built-in Git server checks what you are pushing and makes changes. For example, you may want to add an Elasticsearch instance. The built-in Git server detects this and verifies that the topology of your cluster is modified to your new needs.</p>

<p>If you have a syntax error in a configuration file, our Git server refuses the push. For details, see <a href="/devdocs/2.2/cloud/live/live-prot.html">Protective Block</a>.</p>

<p>This phase also runs <code class="language-plaintext highlighter-rouge">composer install</code> to retrieve dependencies.</p>

<h3 id="cloud-deploy-over-phases-build">Phase 2: Build</h3>

<p class="bs-callout-info">During the build phase, the site is not in maintenance mode and will not be brought down if errors or issues occur. We build only what has changed since the last build.</p>

<p>This phase builds the codebase and runs hooks in the <code class="language-plaintext highlighter-rouge">build</code> section of <code class="language-plaintext highlighter-rouge">.magento.app.yaml</code>. The default Magento build hook is the <code class="language-plaintext highlighter-rouge">php ./vendor/bin/ece-tools</code> command and performs the following:</p>

<ul>
  <li>Applies patches located in <code class="language-plaintext highlighter-rouge">vendor/magento/ece-patches</code>, as well as optional, project-specific patches in <code class="language-plaintext highlighter-rouge">m2-hotfixes</code></li>
  <li>Regenerates code and the <a href="https://glossary.magento.com/dependency-injection">dependency injection</a> configuration (that is, the Magento <code class="language-plaintext highlighter-rouge">generated/</code> directory, which includes <code class="language-plaintext highlighter-rouge">generated/code</code> and <code class="language-plaintext highlighter-rouge">generated/metapackage</code>) using <code class="language-plaintext highlighter-rouge">bin/magento setup:di:compile</code>.</li>
  <li>Checks if the <a href="/devdocs/2.2/cloud/live/sens-data-over.html"><code class="language-plaintext highlighter-rouge">app/etc/config.php</code></a> file exists in the codebase. Magento auto-generates this file if it does not detect it during the build phase and includes a list of modules and extensions. If it exists, the build phase continues as normal, compresses static files using <code class="language-plaintext highlighter-rouge">gzip</code>, and deploys the files, which reduces downtime in the deployment phase. Refer to <a href="/devdocs/2.2/cloud/env/variables-build.html">Magento build options</a> to learn about customizing or disabling file compression.</li>
</ul>

<p class="bs-callout-warning">At this point, the cluster has not been created yet, so you should not try to connect to a database or assume anything was daemonized.</p>

<p>After the application builds, it is mounted on a <strong>read-only file system</strong>. You can configure specific mount points that are going to be read/write. You cannot FTP to the server and add modules. Instead, you must add code to your local repository and run <code class="language-plaintext highlighter-rouge">git push</code>, which builds and deploys the environment. For the project structure, see <a href="/devdocs/2.2/cloud/project/project-start.html">Local project directory structure</a>.</p>

<h3 id="cloud-deploy-over-phases-slug">Phase 3: Prepare the slug</h3>

<p>The result of the build phase is a read-only file system referred to as a <em>slug</em>. In this phase, we create an archive and put the slug in permanent storage. The next time you push code, if a service did not change, it uses the slug from the archive.</p>

<ul>
  <li>Makes continuous integration build faster by reusing unchanged code</li>
  <li>If code changes, updates the slug for the next build to reuse</li>
  <li>Allows for instantaneous reverting of a deployment, if needed</li>
  <li>Includes static files if the <code class="language-plaintext highlighter-rouge">app/etc/config.php</code> file exists in the codebase</li>
</ul>

<p>The slug includes all files and folders <strong>excluding the following</strong> mounts configured in <code class="language-plaintext highlighter-rouge">magento.app.yaml</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">"var": "shared:files/var"</code></li>
  <li><code class="language-plaintext highlighter-rouge">"app/etc": "shared:files/etc"</code></li>
  <li><code class="language-plaintext highlighter-rouge">"pub/media": "shared:files/media"</code></li>
  <li><code class="language-plaintext highlighter-rouge">"pub/static": "shared:files/static"</code></li>
</ul>

<h3 id="cloud-deploy-over-phases-slugclus">Phase 4: Deploy slugs and cluster</h3>

<p>Now we provision your applications and all of the <a href="https://glossary.magento.com/backend">backend</a> services you need:</p>

<ul>
  <li>Mounts each service in a container (web server, Elasticsearch, RabbitMQ)</li>
  <li>Mounts the read-write file system (mounted on a highly available distributed storage grid)</li>
  <li>Configures the network so Magento services can “see” each other (and only each other)</li>
</ul>

<p class="bs-callout-info">Make your changes in a Git branch after all build and deployment completes and push again. All environment file systems are <em>read-only</em>. A read-only system guarantees deterministic deployments and dramatically improves your site security because no process can write to the file system. It also works to ensure your code is identical in the Integration, Staging, and Production environments.</p>

<h3 id="cloud-deploy-over-phases-hook">Phase 5: Deployment hooks</h3>

<p class="bs-callout-info">This phase puts the application in maintenance mode until deployment is complete.</p>

<p>The last step runs a deployment script, which you can use to anonymize data in development environments, clear caches, and ping external, continuous integration tools. When this script runs, you have access to all the services in your environment, such as Redis.</p>

<p>If the <code class="language-plaintext highlighter-rouge">app/etc/config.php</code> file does not exist in the codebase, static files are compressed using <code class="language-plaintext highlighter-rouge">gzip</code> and deployed during this phase. This increases the length of your deploy phase and site maintenance.</p>

<p class="bs-callout-info">Refer to <a href="/devdocs/2.2/cloud/env/variables-deploy.html">Magento deploy variables</a> to learn about customizing or disabling file compression.</p>

<p>There are two default deploy hooks. The <code class="language-plaintext highlighter-rouge">pre-deploy.php</code> hook completes necessary cleanup and retrieval of resources and code generated in the build hook. The <code class="language-plaintext highlighter-rouge">php ./vendor/bin/m2-ece-deploy</code> hook runs a series of commands and scripts:</p>

<ul>
  <li>
    <p>If Magento is <strong>not installed</strong>, it installs Magento with <code class="language-plaintext highlighter-rouge">bin/magento setup:install</code>, updates the deployment configuration, <code class="language-plaintext highlighter-rouge">app/etc/env.php</code>, and the database for your specified environment, such as Redis and website URLs. <strong>Important:</strong> When you completed the <a href="/devdocs/2.2/cloud/setup/first-time-deploy.html">First time deployment</a> during setup, Magento Commerce was installed and deployed across all environments.</p>
  </li>
  <li>
    <p>If Magento <strong>is installed</strong>, performs any necessary upgrades. The deployment script runs <a href="https://devdocs.magento.com/guides/v2.3/install-gde/install/cli/install-cli-subcommands-db-upgr.html"><code class="language-plaintext highlighter-rouge">bin/magento setup:upgrade</code></a> to update the database schema and data (which is necessary after extension or core code updates), and also updates the <a href="https://devdocs.magento.com/guides/v2.3/config-guide/config/config-php.html">deployment configuration</a>, <code class="language-plaintext highlighter-rouge">app/etc/env.php</code>, and the database for your environment. Finally, the deployment script clears the Magento cache.</p>
  </li>
  <li>
    <p>The script optionally generates static web content using the command <a href="https://devdocs.magento.com/guides/v2.3/config-guide/cli/config-cli-subcommands-static-view.html"><code class="language-plaintext highlighter-rouge">magento setup:static-content:deploy</code></a>.</p>
  </li>
  <li>
    <p>Uses scopes (<code class="language-plaintext highlighter-rouge">-s</code> flag in build scripts) with a default setting of <code class="language-plaintext highlighter-rouge">quick</code> for static content deployment strategy. You can customize the strategy using the environment variable <a href="/devdocs/2.2/cloud/env/environment-vars_magento.html"><code class="language-plaintext highlighter-rouge">SCD_STRATEGY</code></a>. For details on these options and features, see <a href="/devdocs/2.2/guides/v2.2/config-guide/cli/config-cli-subcommands-static-deploy-strategies.html">Static files deployment strategies</a> and the <code class="language-plaintext highlighter-rouge">-s</code> flag for <a href="/devdocs/2.2/guides/v2.2/config-guide/cli/config-cli-subcommands-static-view.html">Deploy static view files</a>.</p>
  </li>
</ul>

<p class="bs-callout-info">Our deploy script uses the values defined by configuration files in the <code class="language-plaintext highlighter-rouge">.magento</code> directory, then the script deletes the directory and its contents. Your local development environment is not affected.</p>

<h3 id="cloud-deploy-over-phases-route">Post-deployment: configure routing</h3>

<p>While the deployment is running, we freeze the incoming traffic at the entry point for 60 seconds. We are now ready to configure routing so your web traffic arrives at your newly created cluster.</p>

<p>Successful deployment removes the maintenance mode to allow for normal access and creates backup (BAK) files for the <code class="language-plaintext highlighter-rouge">app/etc/env.php</code> and the <code class="language-plaintext highlighter-rouge">app/etc/config.php</code> configuration files.</p>

<p>If you enabled static content generation using the <code class="language-plaintext highlighter-rouge">SCD_ON_DEMAND</code> variable and you configured the <a href="/devdocs/2.2/cloud/project/project-conf-files_magento-app.html#hooks"><code class="language-plaintext highlighter-rouge">post_deploy</code> hook</a>, this clears the cache and pre-loads (warms) the cache <em>after</em> the container begins accepting connections and <em>during</em> normal, incoming traffic.</p>

<p>To review build and deploy logs, see <a href="/devdocs/2.2/cloud/project/log-locations.html">Log locations</a>.</p>

<h3 id="steps">Build and deploy full steps</h3>

<p>With an understanding of the process, we provide the following instructions for build and deploy for your local, Integration, Staging, and finally Production:</p>

<ul>
  <li><a href="/devdocs/2.2/cloud/live/live-sanity-check.html">Build and deploy to your local</a></li>
  <li><a href="/devdocs/2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy</a></li>
  <li><a href="/devdocs/2.2/cloud/live/stage-prod-migrate.html">Deploy code and data</a></li>
  <li><a href="/devdocs/2.2/cloud/live/stage-prod-test.html">Test deployment</a></li>
  <li><a href="/devdocs/2.2/cloud/live/live.html">Go live and launch</a></li>
</ul>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  
  <div class="page-updated">
    <img src="/devdocs/2.2/i/icons/time.svg" alt="Updated" />
    <time id="last-modified-at" itemprop="dateModified" datetime="2023-04-12">
      Apr 12th, 2023
    </time>
  </div>
  

  

  

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      

<ul class="nav footer-links" role="menu">

  <li class="" role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md">Become a Contributor</a></li>

  <li class="" role="menuitem"><a href="https://glossary.magento.com/">Glossary</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/privacy/">Privacy Policy</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/">Terms of Service</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/licensing/">License/Trademark FAQ</a></li>

  <li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>

  <li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/release-notes/packages-open-source.html">Third-Party Licenses</a></li>

</ul>

    </div>

		<div class="copyright-date">&copy; 2023 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs/2.2/assets/js/app.min.js?ver=7"></script>





<script type="text/javascript" src="/devdocs/2.2/common/js/last-modified-at.js"></script>
<script type="text/javascript" src="/devdocs/2.2/common/js/glossary-link-enhancer.js"></script>


</body>
</html>

