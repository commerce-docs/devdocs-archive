<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Magento Definition of Done | Archived Magento 2.2 Developer Documentation</title>
	<meta name="description" content="Archived Magento 2 Developer Documentation.">

	<link rel="stylesheet" href="/devdocs/2.2/assets/css/app.css?ver=7" />
	<link rel="stylesheet" href="/devdocs/2.2/assets/css/print.css?ver=7" media="print"/>

	<link rel="stylesheet" href="/devdocs/2.2/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />



<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs/2.2";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [
    {
      label: "DevDocs",
      name: "devdocs",
      facetFilters: [["guide_version: 2.2", "versionless: true"]],
      refinements: [
        {
          label: "Functional areas",
          attribute: "functional_areas"
        }
      ],
      baseUrl: "https://devdocs.magento.com"
    },
    {
      label: "User Guide",
      name: "merchdocs_ee",
      baseUrl: "https://docs.magento.com/m2/ee/user_guide"
    },
    {
      label: "MBI User Guide",
      name: "merchdocs-mbi",
      baseUrl: "https://docs.magento.com/mbi"
    },
    {
      label: "Marketplace User Guide",
      name: "merchdocs-marketplace",
      baseUrl: "https://docs.magento.com/marketplace/user_guide"
    },
    {
      label: "PWA",
      name: "pwa-devdocs",
      baseUrl: "https://magento.github.io/pwa-studio"
    },
    {
      label: "Order Management",
      name: "oms-en",
      baseUrl: "https://omsdocs.magento.com"
    }
  ];
</script>




	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">


	<header class="site-header">
		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs/2.2/">
      <img src="/devdocs/2.2/assets/i/m-logo.svg" alt=""><img src="/devdocs/2.2/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      


<div class="version-switcher dropdown">
	<button class="btn dropdown-toggle" disabled>
		Magento 2.2
	</button>
</div>


      <!-- Main Navigation --><ul class="nav-main" role="menubar"><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Cloud</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Cloud basics</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/bk-cloud.html">Cloud Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/architecture/cloud-architecture.html">Cloud Architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/release-notes/cloud-tools.html">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Cloud development</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/setup/first-time-setup.html">Local development</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-config.html">Launch Docker</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/docker/docker-quick-reference.html">Docker quick reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/cloud/env/environments.html">Configure Environments</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/extensions/">Magento Extensions Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Software Update Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/performance-best-practices/introduction.html">Performance Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Information</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/reference/cli/magento.html">Command-line Tools Reference</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Backend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/architecture/bk-architecture.html">Architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Frontend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">API</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/marketplace/eqp/v1/api.html">Marketplace EQP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/mbi/docs/getting-started.html">Business Intelligence API</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/testing.html">Magento Testing Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/mftf/docs/introduction.html">Functional Acceptance Testing (MFTF)</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/advanced-reporting/overview.html">Advanced Reporting</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/b2b/bk-b2b.html">B2B</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Checkout</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/compliance/industry-compliance.html">Compliance</a></li><li class="" role="menuitem"><a href="http://omsdocs.magento.com/en/">Order Management</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/extension-dev-guide/staging.html">Staging</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/rest/tutorials/index.html">Rest Tutorials</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/howdoi/customize_product.html">Customize Product Creation Form</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Customize Checkout</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/community/resources/support.html">Magento Support</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/videos/">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      
<div class="app-switcher">
  <div class="dropdown">
    <button id="app-switcher-trigger" class="app-switcher-trigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Documentation sites"></button>
    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="app-switcher-trigger" role="menu">
      <div class="app-switcher-content">
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Developer</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://devdocs.magento.com/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce Developer Documentation">Commerce Developer Documentation</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="http://pwastudio.io/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=PWA Studio">PWA Studio</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
      </div>
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Merchant</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/m2/ee/user_guide/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce User Guide">Commerce User Guide</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/userguides/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/mbi/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Business Intelligence">Business Intelligence</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/marketplace/user_guide/getting-started.html?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Marketplace">Marketplace</a></li>
        
      </div>
      
      </div>
    </ul>
  </div>
</div>


      <div class="search-btn">
        <button class="search-trigger search-icon" aria-label="Search"></button>
      </div>

      <form class="quick-search" action="/devdocs/2.2/guides/v2.2/search.html" method="get" novalidate="novalidate">
        <input type="search" name="query" placeholder="Search" />
        <button class="quick-search-close" aria-label="Close Search">&times;</button>
      </form>

    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>

	</header>

	<div class="global-wrapper">
		
		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Contribution Guide</h4>
		<div class="collapsible-navigation">
		    <ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/contributing.html">Code Contributions</a><ul><li class="active" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/contributing_dod.html">Magento Definition of Done</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/backward-compatible-development/">Backward compatible development</a></li></ul></li><li class="" role="menuitem"><span>DevDocs Contributions</span><ul><li class="" role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md">Contribution Guidelines</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/contributing_docs_suggested.html">Suggested topics for contribution</a></li><li class="" role="menuitem"><span>Templates</span><ul><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/templates/basic_template.html">Basic template</a></li><li class="tutorial" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/templates/tutorial-template-first.html">Sample template tutorial</a></li></ul></li></ul></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/contributors.html">Contributors</a></li><li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/contributor-guide/maintainers.html">Maintainers</a></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">








<h1 class="page-heading">Magento Definition of Done</h1>
</section>

			<h2 id="overview">Overview</h2>

<p>The “Definition of Done” (DoD) is a collective term for a set of acceptance criteria that is applied to any changes in the product code base.
The requirements that result from our DoD are applied by default to all Magento-owned repositories.</p>

<p>Internally, the Magento development teams follow the DoD to ensure that all work meets consistent release criteria.
We encourage our community contributors to also follow the Magento DoD.</p>

<p>At a high level, the criteria defined in our “definition of done” revolve around the principle of writing clean code that is reviewed and includes unit tests and solid documentation along with the code.</p>

<p>The following sections provide additional details about each of these criteria:</p>

<h2 id="backward-compatibility">Backward Compatibility</h2>

<h3 id="functional-backward-compatibility">Functional Backward Compatibility</h3>

<p><strong>Functional backward compatibility</strong> means the behaviour of the application is preserved.</p>

<p>Existing product features and functionality must be retained during any changes to the code.
Any backward-incompatible functional changes must be approved by a product owner.
The documentation should explain the justification and provide the “business value”.</p>

<h3 id="technical-backward-compatibility">Technical Backward Compatibility</h3>

<p><strong>Technical backward compatibility</strong> means the technical interfaces are preserved.</p>

<p>Technical interfaces include PHP interfaces or classes, CLI commands, URLs or any other interfaces that can be used by 3rd-party developer, system integrator, or user of Magento.
Any change to an interface that can lead to a broken integration is a breaking technical change.
Technical interfaces and the corresponding level of change is described in <a href="/devdocs/2.2/guides/v2.2/extension-dev-guide/versioning/codebase-changes.html">Code Changes</a> and <a href="/devdocs/2.2/guides/v2.2/extension-dev-guide/versioning/dependencies.html">Module Version Dependencies</a> documents in more details.</p>

<p>Technical backward compatibility must be retained between PATCH (marketing) versions of Magento products. It should also be retained between MINOR (marketing) releases if possible.
Any breaking changes must be approved by an architect, product owner and release manager.</p>

<p>For more information, see <a href="/devdocs/2.2/guides/v2.2/contributor-guide/backward-compatible-development/">Magento’s backward compatibility policy</a> and <a href="/devdocs/2.2/guides/v2.2/extension-dev-guide/versioning/index.html">Versioning</a> documents.</p>

<h2 id="documentation">Documentation</h2>

<p>All changes, additions, and extensions to the product should be documented by the author.
The documentation should provide an overview of the change, and information about standard use cases, audience, and procedural instructions for implementing the feature.</p>

<p>Documentation for the submitted code should be submitted as a pull request to the official Magento DevDocs <a href="https://github.com/magento/devdocs">repository</a>.</p>

<p>When submitting either code or documentation, a brief summary of the work should be included in the commit message.</p>

<p>Additionally, the code itself should follow our <a href="/devdocs/2.2/guides/v2.2/coding-standards/docblock-standard-general.html">DocBlock standard</a> and contain high-quality comments and descriptions for all classes and methods.</p>

<p>For documenting backward-incompatible changes, please see <a href="/devdocs/2.2/guides/v2.2/contributor-guide/backward-compatible-development/index.html#where-to-document">Backwards Compatible Development</a>.</p>

<h2 id="tests">Tests</h2>

<h3 id="understanding-black-white-and-gray-tests">Understanding Black, White, and Gray tests</h3>

<ul>
  <li>A black box test does not have any knowledge of how the subject of the test is built.</li>
  <li>A white box has knowledge of how the subject of the test is built. The test logic is usually coupled to the implementation and will typically be sensitive to changes.</li>
  <li>A gray box is similar to black box testing where the test is not directly coupled to the subject’s implementation but the test cases may be designed in a way to assert that sensitive portions of the implementation will work correctly.</li>
</ul>

<p>For example:</p>

<p>Assume there is a method with the signature <code class="language-plaintext highlighter-rouge">function removeLetterFromString(string $letter, string $string): string</code></p>

<ul>
  <li>A black box test would test the obvious cases both normal cases such as <code class="language-plaintext highlighter-rouge">removeLetterFromString('a', 'fooabar') === 'foobr'</code> and edge cases such as when <code class="language-plaintext highlighter-rouge">$letter</code> or <code class="language-plaintext highlighter-rouge">$string</code> are empty or <code class="language-plaintext highlighter-rouge">$letter</code> contains multiple or multibyte characters. It would probably test several variations of string lengths. Notice there is no knowledge of how this function is written.</li>
  <li>A white box test would look into the implementation of the method and see that it calls a microservice API and make sure that each condition of the code has test coverage. For example, this test may force the microservice client to return an error and have a test for the expected handling of that scenario. This wouldn’t be a reusable test and it’s directly coupled to the implementation.</li>
  <li>A gray box test would look at the implementation of the method and see that it calls a microservice API and injects the <code class="language-plaintext highlighter-rouge">$string</code> into the URL so it may add some extra test coverage for strings that contain unsafe URL characters such as <code class="language-plaintext highlighter-rouge">&amp;?=%/</code>. This is not coupled to the implementation as the implementation could be changed and the test should still pass.</li>
</ul>

<h3 id="automated-tests">Automated Tests</h3>

<p>Code changes must be covered by automated tests according to Classification of Magento Automated Tests.
When choosing how to cover your changes, pick the most lightweight (execution time wise) test type that will provide sufficient coverage.
If you encounter an existing test that insufficiently covers your changes, you can delete that test but you must write a proper test to replace it. For example, a method that interacts with database has a unit test. You can replace it with an integration test.</p>

<p>Be aware that while high-level tests may provide coverage to code, it is only indirect coverage. Tests with more direct usage of the changed code will likely still needs to be written to ensure that regardless of the which components are actually used in the black box, the individual components still have coverage.</p>

<p>High level testing policy:</p>

<ul>
  <li>Any code that is added or changed must have explicit tests to validate the behavior. To clarify, this policy is intended to prove that the integrity of the code is verified regardless of which implementations are loaded in a black box environment. This may be done through unit or integration testing as appropriate.</li>
  <li>Code must be also shown to work with known collaborators. This must be done through integration tests and ideally should involve as few components as possible per test case. This level of tests ensures that the code will work with its known associates. Specific examples can be subject but such associates would include composites, chains, pools, etc. but also include cases like a Template filter working with a specific processor loaded.</li>
  <li>In addition, regardless of the interpretation of the testing strategy below: Any class marked with an <code class="language-plaintext highlighter-rouge">@api</code> annotation MUST be covered with explicit test coverage via integration or unit tests.</li>
</ul>

<p>These tests must test the concrete implementation’s behavior in a way that can not be inadvertently changed outside of the test itself.</p>

<p>For example: testing a concrete class through DI preference is not safe because it could be overridden via configuration of another loaded module. The test should not ask for the interface but rather the concrete implementation.</p>

<h3 id="integration-tests">Integration Tests</h3>

<p>An integration test should be used to cover any code that does not meet the requirements of a unit test or functional test and should be thought of as essentially the default test type.</p>

<p>Integration tests come in many forms and can drastically vary in definition depending on what the intention of the test is. Generally speaking an integration test verifies that two or more things work together correctly. i.e. We are testing the <em>integration</em> of one thing with another thing.
For the purpose of Magento testing, there are essentially two broad categories of integration tests: narrow-form and broad-form.</p>

<ul>
  <li>Narrow-form integration tests focus on testing something mostly in isolation an can be as simple as a unit test as described in this guide except without mocked dependencies.</li>
  <li>Broad-form integration tests focus on testing something with less isolation and will involve multiple components explicitly collaborating. (compared to narrow-form where the dependencies are implicit collaborating)</li>
</ul>

<p>Integration test policy:</p>

<ul>
  <li>Methods and classes must have black box or gray box test coverage, including all variations for normal use, as well as edge-cases.</li>
  <li>SPIs must have test coverage. Often times Magento has extension points that may only be utilized by extension developers. Use TestModules to implement those SPI extension points and verify they are used correctly.</li>
  <li>As mentioned above, classes marked with <code class="language-plaintext highlighter-rouge">@api</code> must contain coverage. Integration tests must be used cover these classes unless a unit test is more appropriate. This includes JS modules and components.</li>
  <li>Consumers of default SPI implementations should have at least basic coverage that ensures the default implementations of the SPI are correctly configured and loaded.</li>
</ul>

<p>For example, <code class="language-plaintext highlighter-rouge">Magento\Framework\SomeClassFilter</code> may contain a <code class="language-plaintext highlighter-rouge">FilterPool</code> that comes with default <code class="language-plaintext highlighter-rouge">FilterInterface</code>’s from <code class="language-plaintext highlighter-rouge">Magento\Framework</code>. Each of these implementations would have their own coverage pursuant to this document. However, there should also be some basic assertions within the test coverage for <code class="language-plaintext highlighter-rouge">Magento\Framework\SomeClassFilter</code> that ensure each of the default filters are loaded correctly.
  This should not be explicit coverage such as <code class="language-plaintext highlighter-rouge">$filter-&gt;isLoaded('someDefaultFilter')</code>.</p>

<p>See: <a href="/devdocs/2.2/guides/v2.2/test/integration/integration_test_execution.html">Running Integration Tests</a>.</p>

<h3 id="functional-tests">Functional Tests</h3>

<p>UI functional tests are inherently unstable regardless of platform or testing framework. For this reason, along with reasons of maintainability and quality assurance delivery time, these tests should be prioritized below all other tests types.</p>

<p>Functional test policy:</p>

<ul>
  <li>Web API endpoints must have functional test coverage via api-functional tests. These tests should ensure that the endpoints behave in accordance to their service contracts regardless of the actual concrete implementation that may be loaded.</li>
  <li>For UI-related code, there are some circumstances where it is not possible to cover changes with unit or integration tests. In these cases the appropriate type of coverage would be a functional test but this is a last resort only.
  However, aside from those cases UI functional tests should only be used to cover P0/P1 testing scenarios. If there are no scenarios available to make this decision, a product owner must be consulted for approval of new tests.</li>
</ul>

<p>If there is a scenario that is not classified as a P0/P1 but should be, have a discussion with the product owner to get it elevated.</p>

<p>See <a href="/devdocs/2.2/guides/v2.2/test/testing.html">Functional Tests</a>.</p>

<h3 id="unit-tests">Unit Tests</h3>

<p>There are a small number of use cases for unit tests in Magento. The nature of our code and development practices make it increasingly hard to write and maintain high-quality unit tests.
Many of them end up being replaced by integration tests or are practically useless from the beginning due to how much mocking is needed to make them pass.
Generally, an integration test is the preferred test type.</p>

<p>A unit test may be preferred when you have classes or methods that:</p>

<ul>
  <li>Have few or no dependencies.
    <ul>
      <li>The test must not be directly coupled to the collaborators of the test subject. If the collaborators are solely responsible for the behavior of the tested subject, it will not be a good unit test.</li>
    </ul>
  </li>
  <li>Do not interact with resources such as databases, the file system, 3rd party systems, etc.</li>
  <li>Can be covered by a black box test.
    <ul>
      <li>The test must not be a mirror of the code. Instead, the test must validate that the contract of the method or class is upheld by the implementation. Specific implementations may be weak in certain areas so specific corner cases could cover that logic while still being a black box test.</li>
    </ul>
  </li>
  <li>Would not be easily foreseen to have dependencies in the future.
    <ul>
      <li>This can be hard to predict but a good example of when it would be unlikely is a simple utility class that performs some standalone operation. By contrast, a helper would be very likely to have dependencies by nature.</li>
    </ul>
  </li>
</ul>

<p>Examples:</p>

<ul>
  <li>Utility classes such as <code class="language-plaintext highlighter-rouge">\Magento\Framework\Math\Random</code>.</li>
  <li>Simple classes that can also be used independently such as <code class="language-plaintext highlighter-rouge">\Magento\Framework\Api\SortOrder</code>.</li>
  <li>Algorithms that perform calculation or parsing.</li>
</ul>

<p>And by explicit contrast here are some things NOT to cover:</p>

<ul>
  <li>Classes/methods with numerous dependencies.
    <ul>
      <li>Creation of unit tests for such classes will result in the creation of many mocks and writing complex test logic (that most likely follows code to large extend and as a result we will have fragile and hard to maintain tests)</li>
    </ul>
  </li>
  <li>Classes/methods interacting with resources directly or indirectly.</li>
  <li>Glue/wiring
    <ul>
      <li>Mostly passing data between collaborators and has no or small amount of logic so it can be covered indirectly by integration/functional tests.</li>
    </ul>
  </li>
</ul>

<p>Examples:</p>

<ul>
  <li>Controllers
    <ul>
      <li>They are the “glue” that connects different app layers. They should not contain any business logic and should only be responsible for directing request/response information to/from services. They can be tested via integration or functional tests. Also, controller-specific tests will likely be rendered useless and ultimately deleted at some point in the context of the service isolation initiative which makes this idea much more important.</li>
    </ul>
  </li>
  <li>Model triad classes (Model/Resource Model/Collection)
    <ul>
      <li>They have many dependencies and interact with resources.</li>
    </ul>
  </li>
  <li>Factories</li>
</ul>

<h3 id="integrity-tests">Integrity Tests</h3>

<p>Code to cover:</p>

<ul>
  <li>Must cover any code which introduces convention in scope of a particular implementation, violation of which would lead to runtime error.</li>
</ul>

<p>Expected code coverage:</p>

<ul>
  <li>Must cover all files applicable to this convention.</li>
</ul>

<p>For example:</p>

<ul>
  <li>Scan for all XML-files of certain type and validate them using appropriate XML-schema.</li>
  <li>Scan for declarations of templates and invoke “fallback” mechanism to ensure they resolve.</li>
</ul>

<p><strong>Static Code Analysis:</strong></p>

<p>Code to cover:</p>

<ul>
  <li>Must cover all new code files (or whatever qualifies as “new”).</li>
</ul>

<p>Expected code coverage: must cover all applicable files in entire code base.</p>

<p><strong>Legacy Tests:</strong></p>

<p>Code to cover:</p>

<ul>
  <li>Must cover any formal backward-incompatible changes on code level.
For more information, see <a href="/devdocs/2.2/guides/v2.2/contributor-guide/backward-compatible-development/">Magento’s backward compatibility policy</a>.</li>
</ul>

<p>A failure in a legacy test must provide comprehensive explanation of an alternative, if there is any.</p>

<p>Expected code coverage:</p>

<ul>
  <li>Must cover the majority of occurrences of the backward-incompatible change.</li>
  <li>Should cover 100% of occurrences.</li>
</ul>

<p>Not all changes can be covered.
For example, it is possible to scan a file for literals, but it is unfeasible to analyze string concatenation or any other dynamic way of building a variable.</p>

<h3 id="functional-manual-tests">Functional Manual Tests</h3>

<p>Must cover new or changed application behavior (functional).
Added/updated functionality should be covered by a functional Zephyr test(s) related to current sprint commitment.</p>

<h2 id="review">Review</h2>

<p>A task, when complete by the author, should be reviewed by another Magento community member through a process of formal code review.
The reviewer should check whether the task meets the original acceptance criteria and verify that there are no code defects and that all points of this definition of done are met.</p>

<p>The work cannot be considered as complete unless all the criteria are verified.</p>


			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  
  <div class="page-updated">
    <img src="/devdocs/2.2/i/icons/time.svg" alt="Updated" />
    <time id="last-modified-at" itemprop="dateModified" datetime="2019-11-27">
      Nov 27th, 2019
    </time>
  </div>
  

  

  

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      

<ul class="nav footer-links" role="menu">

  <li class="" role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md">Become a Contributor</a></li>

  <li class="" role="menuitem"><a href="https://glossary.magento.com/">Glossary</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/privacy/">Privacy Policy</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/">Terms of Service</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/licensing/">License/Trademark FAQ</a></li>

  <li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>

  <li class="" role="menuitem"><a href="/devdocs/2.2/guides/v2.2/release-notes/packages-open-source.html">Third-Party Licenses</a></li>

</ul>

    </div>

		<div class="copyright-date">&copy; 2023 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs/2.2/assets/js/app.min.js?ver=7"></script>





<script type="text/javascript" src="/devdocs/2.2/common/js/last-modified-at.js"></script>
<script type="text/javascript" src="/devdocs/2.2/common/js/glossary-link-enhancer.js"></script>


</body>
</html>

