<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Searching with Repositories | Archived Magento 2.2 Developer Documentation</title>
	<meta name="description" content="Archived Magento 2 Developer Documentation.">

	<link rel="stylesheet" href="/devdocs-archive/2.2/assets/css/app.css?ver=7" />
	<link rel="stylesheet" href="/devdocs-archive/2.2/assets/css/print.css?ver=7" media="print"/>

	<link rel="stylesheet" href="/devdocs-archive/2.2/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />



<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs-archive/2.2";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [
    {
      label: "DevDocs",
      name: "devdocs",
      facetFilters: [["guide_version: 2.2", "versionless: true"]],
      refinements: [
        {
          label: "Functional areas",
          attribute: "functional_areas"
        }
      ],
      baseUrl: "https://devdocs.magento.com"
    },
    {
      label: "User Guide",
      name: "merchdocs_ee",
      baseUrl: "https://docs.magento.com/m2/ee/user_guide"
    },
    {
      label: "MBI User Guide",
      name: "merchdocs-mbi",
      baseUrl: "https://docs.magento.com/mbi"
    },
    {
      label: "Marketplace User Guide",
      name: "merchdocs-marketplace",
      baseUrl: "https://docs.magento.com/marketplace/user_guide"
    },
    {
      label: "PWA",
      name: "pwa-devdocs",
      baseUrl: "https://magento.github.io/pwa-studio"
    },
    {
      label: "Order Management",
      name: "oms-en",
      baseUrl: "https://omsdocs.magento.com"
    }
  ];
</script>




	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">


	<header class="site-header">
		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs-archive/2.2/">
      <img src="/devdocs-archive/2.2/assets/i/m-logo.svg" alt=""><img src="/devdocs-archive/2.2/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      


<div class="version-switcher dropdown">
	<button class="btn dropdown-toggle" disabled>
		Magento 2.2
	</button>
</div>


      <!-- Main Navigation --><ul class="nav-main" role="menubar"><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Cloud</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Cloud basics</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/bk-cloud.html">Cloud Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/architecture/cloud-architecture.html">Cloud Architecture</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/release-notes/cloud-tools.html">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Cloud development</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/setup/first-time-setup.html">Local development</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/docker/docker-config.html">Launch Docker</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/docker/docker-quick-reference.html">Docker quick reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/cloud/env/environments.html">Configure Environments</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/extensions/">Magento Extensions Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Software Update Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/performance-best-practices/introduction.html">Performance Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Information</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/reference/cli/magento.html">Command-line Tools Reference</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Backend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/architecture/bk-architecture.html">Architecture</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Frontend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">API</div>
              <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/marketplace/eqp/v1/api.html">Marketplace EQP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mbi/docs/getting-started.html">Business Intelligence API</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/testing.html">Magento Testing Guide</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/mftf/docs/introduction.html">Functional Acceptance Testing (MFTF)</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/advanced-reporting/overview.html">Advanced Reporting</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/b2b/bk-b2b.html">B2B</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Checkout</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/compliance/industry-compliance.html">Compliance</a></li><li class="" role="menuitem"><a href="http://omsdocs.magento.com/en/">Order Management</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/staging.html">Staging</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/rest/tutorials/index.html">Rest Tutorials</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/howdoi/customize_product.html">Customize Product Creation Form</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/howdoi/checkout/checkout_overview.html">Customize Checkout</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/community/resources/support.html">Magento Support</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/videos/">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      
<div class="app-switcher">
  <div class="dropdown">
    <button id="app-switcher-trigger" class="app-switcher-trigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Documentation sites"></button>
    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="app-switcher-trigger" role="menu">
      <div class="app-switcher-content">
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Developer</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://devdocs.magento.com/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce Developer Documentation">Commerce Developer Documentation</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="http://pwastudio.io/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=PWA Studio">PWA Studio</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
      </div>
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Merchant</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/m2/ee/user_guide/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce User Guide">Commerce User Guide</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/userguides/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/mbi/?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Business Intelligence">Business Intelligence</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/marketplace/user_guide/getting-started.html?itm_source=devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Marketplace">Marketplace</a></li>
        
      </div>
      
      </div>
    </ul>
  </div>
</div>

    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>

	</header>

	<div class="global-wrapper">
		
		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">PHP Developer Guide</h4>
		<div class="collapsible-navigation">
		    <ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">Introduction</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/intro/developers_roadmap.html">Developer roadmap</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/intro/intro-composer.html">Introduction to Composer</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/intro/intro-composer-gloss.html">Glossary of common terms</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/prepare/prepare.html">Prepare (development quick start)</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/prepare/dev-modtypes.html">Component types</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/prepare/prepare_file-str.html">About component file structure</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/prepare/dev-summary.html">Roadmap for developing and packaging components</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/prepare/lifecycle.html">Extension lifecycle</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/build.html">Build</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/di-xml-file.html">The di.xml file</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/optimal-dev-environment.html">Optimal development environment</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/composer-integration.html">The composer.json file</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/required-configuration-files.html">Define your configuration files</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/module-file-structure.html">Create your component file structure</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/component-registration.html">Register your component</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/XSD-XML-validation.html">URN schema validation</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/create_component.html">Name your component</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/module-load-order.html">Component load order</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/build/enable-module.html">Enable or disable your component</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/package/package.html">Package</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/package/package_module.html">Package a component</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/package/package_mktpl.html">Upload your component to the Magento Marketplace</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/validate/validate.html">Validate</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/validate/test-module.html">Test your component</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cache/partial-caching.html">Partial caching</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cache/partial-caching/database-caching.html">Create custom cache engines</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cache/partial-caching/create-cache-type.html">Create a cache type</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cache/page-caching.html">Full page caching</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cache/page-caching/public-content.html">Public content</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cache/page-caching/private-content.html">Private content</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cli-cmds/cli-add.html">Add CLI commands</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cli-cmds/cli-naming-guidelines.html">Command naming guidelines</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/cli-cmds/cli-howto.html">How to add CLI commands</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/staging.html">Staging (Magento Commerce only)</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/module-development.html">Component development</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/service-contracts/service-contracts.html">Service contracts</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/api-concepts.html">Public interfaces &amp; APIs</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/service-contracts/design-patterns.html">Service contract design patterns</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/depend-inj.html">Dependency injection</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/object-manager.html">ObjectManager</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/events-and-observers.html">Events and observers</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/factories.html">Factories</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/proxies.html">Proxies</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/code-generation.html">Code generation</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/attributes.html">EAV and extension attributes</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/plugins.html">Plugins (Interceptors)</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/routing.html">Routing</a></li><li class="" role="menuitem"><span>Indexing</span><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/indexing.html">Indexing overview</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/indexer-batch.html">Indexer optimization</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/indexing-custom.html">Adding a custom indexer</a></li></ul></li><li class="" role="menuitem"><span>Message Queues</span><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/message-queues/message-queues.html">Message queues overview</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/message-queues/config-mq.html">Configure message Queues</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/message-queues/queue-migration.html">Migrate message queue configuration</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/message-queues/bulk-operations.html">Bulk operations</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/message-queues/implement-bulk.html">Example bulk operations implementation</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/extension_attributes/adding-attributes.html">Adding extension attributes to entity</a></li><li class="active" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/searching-with-repositories.html">Searching with repositories</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/service-contracts/service-to-web-service.html">Configure services as web APIs</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/webapi/request-processor-pool.html">WebApi request processors pool</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/howdoi/php/php_clear-dirs.html">Clear directories during development</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/adapters.html">Adapters</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/view-models.html">View models</a></li></ul></li><li class="" role="menuitem"><span>Configuration</span><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/configuration/sensitive-and-environment-settings.html">Sensitive Environment Settings</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/configuration/importers.html">Configuration Importers</a></li></ul></li><li class="" role="menuitem"><span>Framework</span><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/framework/serializer.html">Serialize Library</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/framework/array-manager.html">Array Manager</a></li></ul></li><li class="" role="menuitem"><span>Security</span><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/xss-protection.html">XSS Prevention</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/security/non-secure-functions.html">Non-secure functions</a></li></ul></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/versioning/">Versioning</a><ul><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/versioning/check-version.html">Check the Magento version</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/versioning/dependencies.html">Module version dependencies</a></li><li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/versioning/codebase-changes.html">Codebase changes</a></li></ul></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">








<h1 class="page-heading">Searching with Repositories</h1>
</section>

			<h3 id="m2devgde-repository-intro">What is a repository?</h3>

<p>Repositories give service requestors the ability to perform create, read, update, and delete (CRUD) operations on entities or a list of entities.
A repository is an example of a <a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/service-contracts/design-patterns.html">service contract</a>, and its implementation is part of the domain layer.</p>

<h4 id="repository-state">Repository state</h4>

<p>A repository should be stateless after instantiation.
This means that every method call should not rely on previous calls nor should it affect later method calls.
Any field contained in the repository class must also be stateless.</p>

<p>If your repository needs to provide functionality that requires state, such as for caching,  use the registry pattern.
A good example that uses this pattern is the <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Customer/Model/ResourceModel/CustomerRepository.php" target="_blank"><code class="language-plaintext highlighter-rouge">CustomerRepository</code></a> class.</p>

<h3 id="m2devgde-search-criteria">Search Criteria</h3>

<p>A Search Criteria is an implementation of the <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteriaInterface.php" target="_blank"><code class="language-plaintext highlighter-rouge">SearchCriteriaInterface</code></a> class that allows you to build custom requests with different conditions.</p>

<p>Repositories use this class to retrieve entities based on a matching criteria.</p>

<h4 id="filter">Filter</h4>

<p>The <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/Filter.php" target="_blank"><code class="language-plaintext highlighter-rouge">Filter</code></a> class is the smallest part of a Search Criteria.
It allows you to add a custom field, value, and condition type to the criteria.</p>

<p>Example of how to define a Filter:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nv">$filter</span>
    <span class="o">-&gt;</span><span class="nf">setField</span><span class="p">(</span><span class="s2">"url"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="s2">"%magento.com"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setConditionType</span><span class="p">(</span><span class="s2">"like"</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This filter will find all urls with the suffix of “magento.com”.</p>

<h4 id="filter-group">Filter Group</h4>

<p>The <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/Search/FilterGroup.php" target="_blank"><code class="language-plaintext highlighter-rouge">FilterGroup</code></a> class acts like a collection of Filters that apply one or more criteria to a search.</p>

<p>The boolean <code class="language-plaintext highlighter-rouge">OR</code> statement joins Filters inside a single <strong>Filter Group</strong>.</p>

<p>The boolean <code class="language-plaintext highlighter-rouge">AND</code> statement joins Filter Groups inside a <strong>Search Criteria</strong>.</p>

<p>For example:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="nv">$filter1</span>
    <span class="o">-&gt;</span><span class="nf">setField</span><span class="p">(</span><span class="s2">"url"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="s2">"%magento.com"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setConditionType</span><span class="p">(</span><span class="s2">"like"</span><span class="p">);</span>

<span class="nv">$filter2</span>
    <span class="o">-&gt;</span><span class="nf">setField</span><span class="p">(</span><span class="s2">"store_id"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="s2">"1"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setConditionType</span><span class="p">(</span><span class="s2">"eq"</span><span class="p">);</span>

<span class="nv">$filterGroup1</span><span class="o">-&gt;</span><span class="nf">setFilters</span><span class="p">([</span><span class="nv">$filter1</span><span class="p">,</span> <span class="nv">$filter2</span><span class="p">]);</span>

<span class="nv">$filter3</span>
    <span class="o">-&gt;</span><span class="nf">setField</span><span class="p">(</span><span class="s2">"url_type"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setConditionType</span><span class="p">(</span><span class="s2">"eq"</span><span class="p">);</span>

<span class="nv">$filterGroup2</span><span class="o">-&gt;</span><span class="nf">setFilters</span><span class="p">([</span><span class="nv">$filter3</span><span class="p">]);</span>

<span class="nv">$searchCriteria</span><span class="o">-&gt;</span><span class="nf">setFilterGroups</span><span class="p">([</span><span class="nv">$filterGroup1</span><span class="p">,</span> <span class="nv">$filterGroup2</span><span class="p">]);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The code above creates a Search Criteria with the Filters put together in the following way:<br />
<code class="language-plaintext highlighter-rouge">(url like %magento.com OR store_id eq 1) AND (url_type eq 1)</code></p>

<h4 id="sorting">Sorting</h4>

<p>To apply sorting to the Search Criteria, use the <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SortOrder.php" target="_blank"><code class="language-plaintext highlighter-rouge">SortOrder</code></a> class.</p>

<p>Field and direction make up the two parameters that define a Sort Order object.
The field is the name of the field to sort.
The direction is the method of sorting whose value can be <code class="language-plaintext highlighter-rouge">ASC</code> or <code class="language-plaintext highlighter-rouge">DESC</code>.</p>

<p>The example below defines a Sort Order object that will sort the customer email in ascending order:</p>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">$sortOrder</span>
    <span class="o">-&gt;</span><span class="nf">setField</span><span class="p">(</span><span class="s2">"email"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setDirection</span><span class="p">(</span><span class="s2">"ASC"</span><span class="p">);</span>

<span class="nv">$searchCriteria</span><span class="o">-&gt;</span><span class="nf">setSortOrders</span><span class="p">([</span><span class="nv">$sortOrder</span><span class="p">]);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="pagination">Pagination</h4>

<p>The <code class="language-plaintext highlighter-rouge">setPageSize</code> function paginates the Search Criteria by limiting the amount of entities it retrieves:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$searchCriteria</span><span class="o">-&gt;</span><span class="nf">setPageSize</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span> <span class="c1">//retrieve 20 or less entities</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">setCurrentPage</code> function sets the current page:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nv">$searchCriteria</span>
    <span class="o">-&gt;</span><span class="nf">setPageSize</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setCurrentPage</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">//show the 21st to 40th entity</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="search-result">Search Result</h3>

<p>The <code class="language-plaintext highlighter-rouge">getList(SearchCriteria $searchCriteria)</code> method defined in your repository should return a Search Result object.
This object is an instance of a class that implements the interface <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchResultsInterface.php" target="_blank"><code class="language-plaintext highlighter-rouge">SearchResultsInterface</code></a>.</p>

<p>Search Result objects hold the Search Criteria object and the retrieved entities along with information about the total count of found entities regardless of any limitations set in the criteria.</p>

<h3 id="m2devgde-searchcriteria-unify-processing">Search Criteria Unify Processing</h3>

<p>A Collection Processor is an implementation of the <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteria/CollectionProcessorInterface.php" target="_blank"><code class="language-plaintext highlighter-rouge">CollectionProcessorInterface</code></a> interface that unifies the application of custom filters, sorting, and paginating.
It contains a one method process that applies a Search Criteria object to an abstract database collection.</p>

<p>You can use <a href="/devdocs-archive/2.2/guides/v2.2/extension-dev-guide/depend-inj.html#dependency-types">virtual typing</a> in your <code class="language-plaintext highlighter-rouge">di.xml</code> file to specify the processors used in the Collection Processor.</p>

<h4 id="filter-processor">Filter Processor</h4>

<p>The <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteria/CollectionProcessor/FilterProcessor.php" target="_blank"><code class="language-plaintext highlighter-rouge">FilterProcessor</code></a> class applies Filter Groups and their filters to a collection.</p>

<p>Below is the code that applies filters to a collection.
The method applies custom filters for some fields, otherwise it applies <code class="language-plaintext highlighter-rouge">$collection-&gt;addFieldToFilter($fields, $conditions)</code>.</p>

<div class="collapsible">
    <b class="collapsible-title">Show Code for addFilterGroupToCollection </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre>    <span class="cd">/**
     * Add FilterGroup to the collection
     *
     * @param FilterGroup $filterGroup
     * @param AbstractDb $collection
     */</span>
    <span class="k">private</span> <span class="k">function</span> <span class="n">addFilterGroupToCollection</span><span class="p">(</span>
        <span class="kt">FilterGroup</span> <span class="nv">$filterGroup</span><span class="p">,</span>
        <span class="kt">AbstractDb</span> <span class="nv">$collection</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$fields</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nv">$conditions</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$filterGroup</span><span class="o">-&gt;</span><span class="nf">getFilters</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$filter</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$isApplied</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nv">$customFilter</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getCustomFilterForField</span><span class="p">(</span><span class="nv">$filter</span><span class="o">-&gt;</span><span class="nf">getField</span><span class="p">());</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$customFilter</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$isApplied</span> <span class="o">=</span> <span class="nv">$customFilter</span><span class="o">-&gt;</span><span class="nf">apply</span><span class="p">(</span><span class="nv">$filter</span><span class="p">,</span> <span class="nv">$collection</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$isApplied</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$condition</span> <span class="o">=</span> <span class="nv">$filter</span><span class="o">-&gt;</span><span class="nf">getConditionType</span><span class="p">()</span> <span class="o">?</span> <span class="nv">$filter</span><span class="o">-&gt;</span><span class="nf">getConditionType</span><span class="p">()</span> <span class="o">:</span> <span class="s1">'eq'</span><span class="p">;</span>
                <span class="nv">$fields</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getFieldMapping</span><span class="p">(</span><span class="nv">$filter</span><span class="o">-&gt;</span><span class="nf">getField</span><span class="p">());</span>
                <span class="nv">$conditions</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$condition</span> <span class="o">=&gt;</span> <span class="nv">$filter</span><span class="o">-&gt;</span><span class="nf">getValue</span><span class="p">()];</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$fields</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$collection</span><span class="o">-&gt;</span><span class="nf">addFieldToFilter</span><span class="p">(</span><span class="nv">$fields</span><span class="p">,</span> <span class="nv">$conditions</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<p>You can configure this class to use a specific custom field mapping and custom filter in the <code class="language-plaintext highlighter-rouge">di.xml</code> file.
The example below uses <a href="https://glossary.magento.com/dependency-injection">dependency injection</a> to create a <a href="https://glossary.magento.com/virtual-type">virtual type</a> from a Filter Processor that applies the module-specific <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Catalog/Model/Api/SearchCriteria/CollectionProcessor/FilterProcessor/ProductCategoryFilter.php" target="_blank"><code class="language-plaintext highlighter-rouge">ProductCategoryFilter</code></a> on a particular field mapping.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>    <span class="nt">&lt;virtualType</span> <span class="na">name=</span><span class="s">"Magento\Customer\Model\Api\SearchCriteria\CollectionProcessor\GroupFilterProcessor"</span> <span class="na">type=</span><span class="s">"Magento\Framework\Api\SearchCriteria\CollectionProcessor\FilterProcessor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"customFilters"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"category_id"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Catalog\Model\Api\SearchCriteria\CollectionProcessor\FilterProcessor\ProductCategoryFilter<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"fieldMapping"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"code"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>main_table.customer_group_code<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>main_table.customer_group_id<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"tax_class_name"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>tax_class_table.class_name<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/virtualType&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="collapsible">
    <b class="collapsible-title">Show code for ProductCategoryFilter </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="kn">namespace</span> <span class="nn">Magento\Catalog\Model\Api\SearchCriteria\CollectionProcessor\FilterProcessor</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Catalog\Model\ResourceModel\Product\Collection</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Api\Filter</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Api\SearchCriteria\CollectionProcessor\FilterProcessor\CustomFilterInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Data\Collection\AbstractDb</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProductCategoryFilter</span> <span class="kd">implements</span> <span class="nc">CustomFilterInterface</span>
<span class="p">{</span>
    <span class="cd">/**
     * Apply category_id Filter to Product Collection
     *
     * @param Filter $filter
     * @param AbstractDb $collection
     * @return bool Whether the filter is applied
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">apply</span><span class="p">(</span><span class="kt">Filter</span> <span class="nv">$filter</span><span class="p">,</span> <span class="kt">AbstractDb</span> <span class="nv">$collection</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$filter</span><span class="o">-&gt;</span><span class="nf">getValue</span><span class="p">();</span>
        <span class="nv">$conditionType</span> <span class="o">=</span> <span class="nv">$filter</span><span class="o">-&gt;</span><span class="nf">getConditionType</span><span class="p">()</span> <span class="o">?:</span> <span class="s1">'in'</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">((</span><span class="nv">$conditionType</span> <span class="o">===</span> <span class="s1">'in'</span> <span class="o">||</span> <span class="nv">$conditionType</span> <span class="o">===</span> <span class="s1">'nin'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_string</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$value</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$value</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$value</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="nv">$categoryFilter</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$conditionType</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">];</span>

        <span class="cd">/** @var Collection $collection */</span>
        <span class="nv">$collection</span><span class="o">-&gt;</span><span class="nf">addCategoriesFilter</span><span class="p">(</span><span class="nv">$categoryFilter</span><span class="p">);</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<table>
  <thead>
    <tr>
      <th>Argument</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">customFilters</code></td>
      <td>An array of filters implementing the <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteria/CollectionProcessor/FilterProcessor/CustomFilterInterface.php" target="_blank"><code class="language-plaintext highlighter-rouge">CustomFilterInterface</code></a>. These filters allow you to apply custom logic to a particular abstract database collection.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">fieldMapping</code></td>
      <td>Maps field names defined in the search Criteria to the names in an abstract database collection</td>
    </tr>
  </tbody>
</table>

<h4 id="sorting-processor">Sorting Processor</h4>

<p>The <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteria/CollectionProcessor/SortingProcessor.php" target="_blank"><code class="language-plaintext highlighter-rouge">SortingProcessor</code></a> class applies the sorting order of a search criteria to an abstract database collection.</p>

<p>Below is an example of how you can configure a Sorting Processor virtual type in the <code class="language-plaintext highlighter-rouge">di.xml</code> file to use a custom field mapping and default sorting orders.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>    <span class="nt">&lt;virtualType</span> <span class="na">name=</span><span class="s">"Magento\Customer\Model\Api\SearchCriteria\CollectionProcessor\GroupSortingProcessor"</span> <span class="na">type=</span><span class="s">"Magento\Framework\Api\SearchCriteria\CollectionProcessor\SortingProcessor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"fieldMapping"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"code"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>customer_group_code<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>customer_group_id<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"tax_class_name"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>class_name<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"defaultOrders"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>ASC<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/virtualType&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Argument</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">fieldMapping</code></td>
      <td>Maps field names defined in the search Criteria to the names in an abstract database collection</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">defaultOrders</code></td>
      <td>The ordering applied when there are none defined in a search criteria.</td>
    </tr>
  </tbody>
</table>

<h4 id="pagination-processor">Pagination Processor</h4>

<p>The <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteria/CollectionProcessor/PaginationProcessor.php" target="_blank"><code class="language-plaintext highlighter-rouge">PaginationProcessor</code></a> class applies the current page and page size of the search criteria to an abstract database collection.</p>

<h4 id="join-processor">Join Processor</h4>

<p>The <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteria/CollectionProcessor/JoinProcessor.php" target="_blank"><code class="language-plaintext highlighter-rouge">JoinProcessor</code></a> class allows you to join fields from other tables into an abstract database collection.</p>

<p>Below is an example of creating a Join Processor virtual type in the <code class="language-plaintext highlighter-rouge">di.xml</code> file named <code class="language-plaintext highlighter-rouge">Magento\Tax\Model\Api\SearchCriteria\CollectionProcessor\TaxRuleJoinProcessor</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;virtualType</span> <span class="na">name=</span><span class="s">"Magento\Tax\Model\Api\SearchCriteria\CollectionProcessor\TaxRuleJoinProcessor"</span> <span class="na">type=</span><span class="s">"Magento\Framework\Api\SearchCriteria\CollectionProcessor\JoinProcessor"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;arguments&gt;</span>
    <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"customJoins"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"rate.tax_calculation_rate_id"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Tax\Model\Api\SearchCriteria\JoinProcessor\Rate<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"rc.code"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Tax\Model\Api\SearchCriteria\JoinProcessor\RateCode<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"ctc.customer_tax_class_id"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Tax\Model\Api\SearchCriteria\JoinProcessor\CustomerTaxClass<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"ptc.product_tax_class_id"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Tax\Model\Api\SearchCriteria\JoinProcessor\ProductTaxClass<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"cd.customer_tax_class_id"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Tax\Model\Api\SearchCriteria\JoinProcessor\CalculationData<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"cd.product_tax_class_id"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Tax\Model\Api\SearchCriteria\JoinProcessor\CalculationData<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/argument&gt;</span>
    <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"fieldMapping"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>tax_calculation_rule_id<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"tax_rate_ids"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>tax_calculation_rate_id<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"customer_tax_class_ids"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>cd.customer_tax_class_id<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"product_tax_class_ids"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>cd.product_tax_class_id<span class="nt">&lt;/item&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"tax_calculation_rate_id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>rate.tax_calculation_rate_id<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/argument&gt;</span>
  <span class="nt">&lt;/arguments&gt;</span>
<span class="nt">&lt;/virtualType&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The Join Processor aggregates Custom Joins objects implementing the interface <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/Api/SearchCriteria/CollectionProcessor/JoinProcessor/CustomJoinInterface.php" target="_blank"><code class="language-plaintext highlighter-rouge">CustomJoinInterface</code></a>.</p>

<div class="collapsible">
    <b class="collapsible-title">Show Custom Join implementation example </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>    <span class="kn">namespace</span> <span class="nn">Magento\Tax\Model\Api\SearchCriteria\JoinProcessor</span><span class="p">;</span>

    <span class="kn">use</span> <span class="nc">Magento\Framework\Api\SearchCriteria\CollectionProcessor\JoinProcessor\CustomJoinInterface</span><span class="p">;</span>
    <span class="kn">use</span> <span class="nc">Magento\Framework\Data\Collection\AbstractDb</span><span class="p">;</span>

    <span class="cd">/**
     * Class Rate
     * @package Magento\Tax\Model\Api\SearchCriteria\JoinProcessor
     **/</span>
    <span class="kd">class</span> <span class="nc">Rate</span> <span class="kd">implements</span> <span class="nc">CustomJoinInterface</span>
    <span class="p">{</span>
        <span class="cd">/**
         * @param \Magento\Tax\Model\ResourceModel\Calculation\Rule\Collection $collection
         * @return true
         **/</span>
        <span class="k">public</span> <span class="k">function</span> <span class="n">apply</span><span class="p">(</span><span class="kt">AbstractDb</span> <span class="nv">$collection</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nv">$collection</span><span class="o">-&gt;</span><span class="nf">joinCalculationData</span><span class="p">(</span><span class="s1">'rate'</span><span class="p">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<h3 id="using-collection-processors-in-repositories">Using Collection Processors in Repositories</h3>

<p>Below is an example of how the <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Customer/Model/ResourceModel/CustomerRepository.php" target="_blank"><code class="language-plaintext highlighter-rouge">CustomerRepositoryInterface</code></a> repository class uses a Collection Processor.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="rouge-code"><pre>
    <span class="kn">namespace</span> <span class="nn">Magento\Customer\Model\ResourceModel</span><span class="p">;</span>

    <span class="mf">...</span>

    <span class="cd">/**
     * Customer repository.
     * @SuppressWarnings(PHPMD.CouplingBetweenObjects)
     **/</span>
    <span class="kd">class</span> <span class="nc">CustomerRepository</span> <span class="k">implements</span> <span class="err">\</span><span class="nc">Magento\Customer\Api\CustomerRepositoryInterface</span>
    <span class="p">{</span>
        <span class="mf">...</span>

        <span class="cd">/**
         * @var \Magento\Framework\Api\SearchCriteria\CollectionProcessorInterface
         **/</span>
        <span class="k">private</span> <span class="nv">$collectionProcessor</span><span class="p">;</span>

        <span class="mf">...</span>

        <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
            <span class="p">...</span>
            <span class="kt">CollectionProcessorInterface</span> <span class="nv">$collectionProcessor</span> <span class="o">=</span> <span class="kc">null</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="mf">...</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">collectionProcessor</span> <span class="o">=</span> <span class="nv">$collectionProcessor</span> <span class="o">?:</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getCollectionProcessor</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="mf">...</span>

        <span class="cd">/**
         * {@inheritdoc}
         **/</span>
        <span class="k">public</span> <span class="k">function</span> <span class="n">getList</span><span class="p">(</span><span class="kt">SearchCriteriaInterface</span> <span class="nv">$searchCriteria</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="mf">...</span>

            <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getCollectionProcessor</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">process</span><span class="p">(</span><span class="nv">$searchCriteria</span><span class="p">,</span> <span class="nv">$collection</span><span class="p">);</span>

            <span class="mf">...</span>
        <span class="p">}</span>

        <span class="mf">...</span>

        <span class="cd">/**
         * Retrieve collection processor
         *
         * @deprecated
         * @return \Magento\Framework\Api\SearchCriteria\CollectionProcessorInterface
         **/</span>
        <span class="k">private</span> <span class="k">function</span> <span class="n">getCollectionProcessor</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">collectionProcessor</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">collectionProcessor</span> <span class="o">=</span> <span class="err">\</span><span class="nc">Magento\Framework\App\ObjectManager</span><span class="o">::</span><span class="nf">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span>
                    <span class="s1">'Magento\Eav\Model\Api\SearchCriteria\CollectionProcessor'</span>
                <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">collectionProcessor</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">di.xml</code> configuration file excerpt below shows how you can create a virtual type for the Collection Processor by passing in a custom Filter Processor and a custom Sorting Processor.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre>    <span class="nt">&lt;virtualType</span> <span class="na">name=</span><span class="s">"Magento\Customer\Model\Api\SearchCriteria\CollectionProcessor\CustomerFilterProcessor"</span> <span class="na">type=</span><span class="s">"Magento\Eav\Model\Api\SearchCriteria\CollectionProcessor\FilterProcessor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"customFilters"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"category_id"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Customer\Model\Api\SearchCriteria\CollectionProcessor\FilterProcessor\CustomerCategoryFilter<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"fieldMapping"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"code"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>customer_group_code<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>customer_group_id<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"tax_class_name"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>class_name<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/virtualType&gt;</span>
    <span class="nt">&lt;virtualType</span> <span class="na">name=</span><span class="s">"Magento\Customer\Model\Api\SearchCriteria\CollectionProcessor\CustomerSortingProcessor"</span> <span class="na">type=</span><span class="s">"Magento\Framework\Api\SearchCriteria\CollectionProcessor\SortingProcessor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"fieldMapping"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"code"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>customer_group_code<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>customer_group_id<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"tax_class_name"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>class_name<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"defaultOrders"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">xsi:type=</span><span class="s">"string"</span><span class="nt">&gt;</span>ASC<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/virtualType&gt;</span>
    <span class="nt">&lt;virtualType</span> <span class="na">name=</span><span class="s">"Magento\Customer\Model\Api\SearchCriteria\CustomerCollectionProcessor"</span> <span class="na">type=</span><span class="s">"Magento\Eav\Model\Api\SearchCriteria\CollectionProcessor"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"processors"</span> <span class="na">xsi:type=</span><span class="s">"array"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"filters"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Customer\Model\Api\SearchCriteria\CollectionProcessor\CustomerFilterProcessor<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"sorting"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Customer\Model\Api\SearchCriteria\CollectionProcessor\CustomerSortingProcessor<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"pagination"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Framework\Api\SearchCriteria\CollectionProcessor\PaginationProcessor<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/virtualType&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Customer\Model\ResourceModel\CustomerRepository"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">"collectionProcessor"</span> <span class="na">xsi:type=</span><span class="s">"object"</span><span class="nt">&gt;</span>Magento\Customer\Model\Api\SearchCriteria\CustomerCollectionProcessor<span class="nt">&lt;/argument&gt;</span>
        <span class="nt">&lt;/arguments&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  
  <div class="page-updated">
    <img src="/devdocs-archive/2.2/i/icons/time.svg" alt="Updated" />
    <time id="last-modified-at" itemprop="dateModified" datetime="2019-11-27">
      Nov 27th, 2019
    </time>
  </div>
  

  

  

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      

<ul class="nav footer-links" role="menu">

  <li class="" role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md">Become a Contributor</a></li>

  <li class="" role="menuitem"><a href="https://glossary.magento.com/">Glossary</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/privacy/">Privacy Policy</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/">Terms of Service</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/licensing/">License/Trademark FAQ</a></li>

  <li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>

  <li class="" role="menuitem"><a href="/devdocs-archive/2.2/guides/v2.2/release-notes/packages-open-source.html">Third-Party Licenses</a></li>

</ul>

    </div>

		<div class="copyright-date">&copy; 2023 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs-archive/2.2/assets/js/app.min.js?ver=7"></script>





<script type="text/javascript" src="/devdocs-archive/2.2/common/js/last-modified-at.js"></script>
<script type="text/javascript" src="/devdocs-archive/2.2/common/js/glossary-link-enhancer.js"></script>


</body>
</html>

