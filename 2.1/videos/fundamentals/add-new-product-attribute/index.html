<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>How to Add a New Product Attribute | Archived Magento 2.1 Developer Documentation</title>
	<meta name="description" content="Archived Magento 2.1.18 Developer Documentation.">

	<link rel="stylesheet" href="/devdocs/2.1/assets/css/app.css" />
	<link rel="stylesheet" href="/devdocs/2.1/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/devdocs/2.1/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />



	<script>
  var baseUrl = "/devdocs/2.1";
  var algolia = {
    id : "",
    index:  "",
    key:  "",
    facetFilters: [["guide_version: 2.1", "versionless: true"]]
  };
</script>




	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-video">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
  </div>

  <div class="nav-container">

    <a class="logo" href="/devdocs/2.1/">
      <img src="/devdocs/2.1/assets/i/m-logo.svg" alt=""><img src="/devdocs/2.1/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      



      <!-- Main Navigation --><ul class="nav-main" role="menubar"><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Cloud</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Cloud basics</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/bk-cloud.html">Cloud Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/architecture/cloud-architecture.html">Cloud Architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/release-notes/cloud-tools.html">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Cloud development</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/setup/first-time-setup.html">Local development</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/docker/docker-config.html">Launch Docker</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/docker/docker-quick-reference.html">Docker quick reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/cloud/env/environments.html">Configure Environments</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/install-gde/bk-install-guide.html">Installation Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/extensions/">Magento Extensions Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/config-guide/bk-config-guide.html">Configuration Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/migration/bk-migration-guide.html">Migration Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/release-notes/bk-release-notes.html">Release Information</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/reference/cli/magento.html">Command-line Tools Reference</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span><div class="nav-popup"><div class="nav-section">
              <div class="nav-section-title">Backend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/architecture/bk-architecture.html">Architecture</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/mrg/intro.html">Module Reference Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/coding-standards/bk-coding-standards.html">Coding Standards</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/contributor-guide/contributing.html">Contributor Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">Frontend</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="nav-section-title">API</div>
              <ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/rest/bk-rest.html">REST API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/soap/bk-soap.html">SOAP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/mbi/docs/getting-started.html">Business Intelligence Import API</a></li></ul>
            </div></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/test/testing.html">Magento Testing Guide</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/mtf/mtf_introduction.html">Functional Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/test/integration/integration_test_execution.html">Integration Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/test/js/jasmine.html">JavaScript Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/test/unit/unit_test_execution.html">PHP Unit Testing</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/howdoi/checkout/checkout_overview.html">Checkout</a></li><li class="" role="menuitem"><a href="http://omsdocs.magento.com/en/">Order Management</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/extension-dev-guide/staging.html">Staging</a></li></ul></div></li><li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span><div class="nav-popup"><ul><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/rest/tutorials/index.html">Rest Tutorials</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/howdoi/customize_product.html">Customize Product Creation Form</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/howdoi/checkout/checkout_overview.html">Customize Checkout</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/community/resources/support.html">Magento Support</a></li><li class="" role="menuitem"><a href="/devdocs/2.1/videos/">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <button class="search-trigger search-icon" aria-label="Search"></button>
    </div>

    <form class="quick-search" action="/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <button class="quick-search-close" aria-label="Close Search">&times;</button>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		








		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container video-page">

	<aside class="sidebar">
		<button class="toc-toggler">Table of Contents</button>
		<div class="sidebar-wrapper">

			<ul>
				<li class="level-0"><a href="/devdocs/2.1/videos/">&larr; All Videos</a></li>

				
				

				
				
					<li class="playlist-name">
						<a href="/videos/fundamentals/">Fundamentals of Magento 2 Development</a>
					</li>
				

				
				
          <li class="">
          
            <a href="/devdocs/2.1/videos/fundamentals/add-a-new-table-to-database/">
          
              How to Add a New Table to a Database
              <span class="video-duration">6:11 </span>
            </a>
          </li>
				
          <li class="">
          
            <a href="/devdocs/2.1/videos/fundamentals/add-a-javascript-module/">
          
              How to Add a JavaScript Module
              <span class="video-duration">4:20 </span>
            </a>
          </li>
				
          <li class="active">
          
            <a href="/devdocs/2.1/videos/fundamentals/add-new-product-attribute/">
          
              How to Add a New Product Attribute
              <span class="video-duration">7:36 </span>
            </a>
          </li>
				
          <li class="">
          
            <a href="/devdocs/2.1/videos/fundamentals/create-a-new-module/">
          
              Create a New Module
              <span class="video-duration">5:18 </span>
            </a>
          </li>
				
          <li class="">
          
            <a href="/devdocs/2.1/videos/fundamentals/create-a-new-page/">
          
              Create a New Page
              <span class="video-duration">4:02 </span>
            </a>
          </li>
				
			</ul>

		</div>
	</aside>

	<section class="content">
		<div class="content-wrap">

			<!-- page-header -->
<section class="page-intro">
	

	

	<h1 class="page-heading">How to Add a New Product Attribute</h1>
</section>


			<div id="video-player" class="video-player-wrap">
				<div class="video-player">
					<div class="embed-responsive embed-responsive-16by9">
		      	<iframe class="embed-responsive-item" src='https://www.youtube.com/embed/cM_9RkWFqqM'
		      		        itemprop='embedUrl'
		      		        frameborder='0'
		      	          allowfullscreen>
		      	</iframe>
					</div>
				</div>
			</div>

			<p>Adding a product attribute is one of the most popular operations in both Magento 1 and Magento 2.
Attributes are a powerful way to solve many practical tasks related to a product.</p>

<p>This is quite a broad topic, but in this video we will discuss the simple process of adding a dropdown-type attribute to a product.</p>

<p>For this exercise, assume that the sample data set is installed.</p>

<ul>
  <li>We will add an attribute called clothing_material with the possible values: Cotton, Leather, Silk, Denim, Fur, and Wool.</li>
  <li>We will make this attribute visible on the product view page, in bold text.</li>
  <li>We will assign it to the Default attribute set and add a restriction that any “bottom” clothing, like slacks, cannot be the material Fur.</li>
</ul>

<p>We will need to take the following steps to add the new attribute:</p>

<ol>
  <li>Create a new module.</li>
  <li>Add an InstallData script.</li>
  <li>Add a source model.</li>
  <li>Add a backend model.</li>
  <li>Add a frontend model.</li>
  <li>Execute the InstallData script and verify that it works.</li>
</ol>

<p>Let’s go through each step.</p>

<h2 id="step-1-create-a-new-module">Step 1: Create a new module</h2>

<p>As Magento is modular based, we start the process by creating a new module called <code class="highlighter-rouge">Learning_ClothingMaterial</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> &lt;magento2_root&gt;/app/code
<span class="nb">mkdir </span>Learning
<span class="nb">mkdir </span>Learning/ClothingMaterial
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Now, create two files:</p>

<p><code class="highlighter-rouge">etc/module.xml</code></p>

<div class="collapsible">
    <b class="collapsible-title">Show code </b>
    <div class="collapsible-content"><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="c">&lt;!--
/**
 * Copyright © 2016 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */
--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:Module/etc/module.xsd"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;module</span> <span class="na">name=</span><span class="s">"Learning_ClothingMaterial"</span> <span class="na">setup_version=</span><span class="s">"0.0.1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/module&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<p><code class="highlighter-rouge">registration.php</code></p>

<div class="collapsible">
    <b class="collapsible-title">Show code </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="o">&lt;?</span><span class="n">php</span>
<span class="cd">/**
 * Copyright © 2016 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */</span>
<span class="err">\</span><span class="nc">Magento\Framework\Component\ComponentRegistrar</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span>
    <span class="err">\</span><span class="nc">Magento\Framework\Component\ComponentRegistrar</span><span class="o">::</span><span class="no">MODULE</span><span class="p">,</span>
    <span class="s1">'Learning_ClothingMaterial'</span><span class="p">,</span>
    <span class="k">__DIR__</span>
<span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<h2 id="step-2-create-an-installdata-script">Step 2 Create an InstallData script</h2>

<p>Next, we need to create the InstallData script.
Because adding an attribute technically adds records into several tables, such as <code class="highlighter-rouge">eav_attribute</code> and <code class="highlighter-rouge">catalog_eav_attribute,</code> this is data manipulation, not a schema change.
Therefore we use InstallData instead of InstallSchema.</p>

<p>Create the file <code class="highlighter-rouge">app/code/Learning/ClothingMaterial/Setup/InstallData.php</code>:</p>

<div class="collapsible">
    <b class="collapsible-title">Show code </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre></td><td class="rouge-code"><pre><span class="o">&lt;?</span><span class="n">php</span>
<span class="cd">/**
 * Copyright © 2016 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">Learning\ClothingMaterial\Setup</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\InstallDataInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\ModuleContextInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\ModuleDataSetupInterface</span><span class="p">;</span>

<span class="cd">/**
* @codeCoverageIgnore
*/</span>
<span class="kd">class</span> <span class="nc">InstallData</span> <span class="kd">implements</span> <span class="nc">InstallDataInterface</span>
<span class="p">{</span>
    <span class="cd">/**
     * Eav setup factory
     * @var EavSetupFactory
     */</span>
    <span class="k">private</span> <span class="nv">$eavSetupFactory</span><span class="p">;</span>

    <span class="cd">/**
     * Init
     * @param EavSetupFactory $eavSetupFactory
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="err">\</span><span class="nc">Magento\Eav\Setup\EavSetupFactory</span> <span class="nv">$eavSetupFactory</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">eavSetupFactory</span> <span class="o">=</span> <span class="nv">$eavSetupFactory</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cd">/**
     * {@inheritdoc}
     * @SuppressWarnings(PHPMD.CyclomaticComplexity)
     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)
     * @SuppressWarnings(PHPMD.NPathComplexity)
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">install</span><span class="p">(</span><span class="kt">ModuleDataSetupInterface</span> <span class="nv">$setup</span><span class="p">,</span> <span class="kt">ModuleContextInterface</span> <span class="nv">$context</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$eavSetup</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">eavSetupFactory</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">();</span>
        <span class="nv">$eavSetup</span><span class="o">-&gt;</span><span class="nf">addAttribute</span><span class="p">(</span>
            <span class="err">\</span><span class="nc">Magento\Catalog\Model\Product</span><span class="o">::</span><span class="no">ENTITY</span><span class="p">,</span>
            <span class="s1">'clothing_material'</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="s1">'group'</span> <span class="o">=&gt;</span> <span class="s1">'General'</span><span class="p">,</span>
                <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'varchar'</span><span class="p">,</span>
                <span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="s1">'Clothing Material'</span><span class="p">,</span>
                <span class="s1">'input'</span> <span class="o">=&gt;</span> <span class="s1">'select'</span><span class="p">,</span>
                <span class="s1">'source'</span> <span class="o">=&gt;</span> <span class="s1">'Learning\ClothingMaterial\Model\Attribute\Source\Material'</span><span class="p">,</span>
                <span class="s1">'frontend'</span> <span class="o">=&gt;</span> <span class="s1">'Learning\ClothingMaterial\Model\Attribute\Frontend\Material'</span><span class="p">,</span>
                <span class="s1">'backend'</span> <span class="o">=&gt;</span> <span class="s1">'Learning\ClothingMaterial\Model\Attribute\Backend\Material'</span><span class="p">,</span>
                <span class="s1">'required'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s1">'sort_order'</span> <span class="o">=&gt;</span> <span class="mi">50</span><span class="p">,</span>
                <span class="s1">'global'</span> <span class="o">=&gt;</span> <span class="err">\</span><span class="nc">Magento\Eav\Model\Entity\Attribute\ScopedAttributeInterface</span><span class="o">::</span><span class="no">SCOPE_GLOBAL</span><span class="p">,</span>
                <span class="s1">'is_used_in_grid'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s1">'is_visible_in_grid'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s1">'is_filterable_in_grid'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s1">'visible'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                <span class="s1">'is_html_allowed_on_front'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                <span class="s1">'visible_on_front'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
            <span class="p">]</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<p>Let’s take a minute to look at the code.</p>

<p>First of all, we need to use a special setup object, not the one that comes as a parameter.
This is because Catalog is an EAV entity, so to add an attribute, we have to use eavSetup rather than standard one.
This holds true for any EAV entity in Magento 2 (category, product, customer, and so on).</p>

<p>This is why we added eavSetupFactory in a constructor.</p>

<p>For the <code class="highlighter-rouge">install()</code> method, all we have to do is call the <code class="highlighter-rouge">addAttribute()</code> method with 3 parameters: entity type, attribute code, and properties.</p>

<p>Those properties define how an attribute behaves.
A full list of properties can be seen in the <code class="highlighter-rouge">catalog_eav_attribute</code> and <code class="highlighter-rouge">eav_attribute</code> tables.
Note that there is a mapping between the fields in those tables and the properties in the <code class="highlighter-rouge">addAttribute()</code> method.</p>

<p>To see all the mappings, you should look at the <code class="highlighter-rouge">\Magento\Catalog\Model\ResourceModel\Setup\PropertyMapper</code> class.</p>

<p>For now, we’ll just quickly go through most important ones:</p>

<ul>
  <li><strong>group:</strong> Means that we add an attribute to the attribute group “General”, which is present in all attribute sets.</li>
  <li><strong>type:</strong> varchar means that the values will be stored in the catalog_eav_varchar table.</li>
  <li><strong>label:</strong> A label of the attribute (that is, how it will be rendered in the backend and on the frontend).</li>
  <li><strong>source/frontend/backend:</strong> Special classes associated with the attribute:
    <ul>
      <li><strong>source model:</strong> provides a list of options</li>
      <li><strong>frontend:</strong> defines how it should be rendered on the frontend</li>
      <li><strong>backend:</strong> allows you to perform certain actions when an attribute is loaded or saved. In our example, it will be validation.</li>
    </ul>
  </li>
  <li><strong>Global:</strong> defines the scope of its values (global, website, or store)</li>
  <li><strong>visible_on_front:</strong> A flag that defines whether an attribute should be shown on the “More Information” tab on the frontend</li>
  <li><strong>is_html_allowed_on_front:</strong> Defines whether an attribute value may contain HTML</li>
</ul>

<h2 id="step-3-add-a-source-model">Step 3: Add a source model</h2>

<p>Next, we need to create the source model:</p>

<p><code class="highlighter-rouge">app/code/Learning/ClothingMaterial/Model/Attribute/Source/Material.php</code></p>

<div class="collapsible">
    <b class="collapsible-title">Show code </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre><span class="o">&lt;?</span><span class="n">php</span>
<span class="cd">/**
 * Copyright © 2016 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">Learning\ClothingMaterial\Model\Attribute\Source</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Material</span> <span class="k">extends</span> <span class="err">\</span><span class="nc">Magento\Eav\Model\Entity\Attribute\Source\AbstractSource</span>
<span class="p">{</span>
    <span class="cd">/**
     * Get all options
     * @return array
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">getAllOptions</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_options</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_options</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">[</span><span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nf">__</span><span class="p">(</span><span class="s1">'Cotton'</span><span class="p">),</span> <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'cotton'</span><span class="p">],</span>
                <span class="p">[</span><span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nf">__</span><span class="p">(</span><span class="s1">'Leather'</span><span class="p">),</span> <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'leather'</span><span class="p">],</span>
                <span class="p">[</span><span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nf">__</span><span class="p">(</span><span class="s1">'Silk'</span><span class="p">),</span> <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'silk'</span><span class="p">],</span>
                <span class="p">[</span><span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nf">__</span><span class="p">(</span><span class="s1">'Denim'</span><span class="p">),</span> <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'denim'</span><span class="p">],</span>
                <span class="p">[</span><span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nf">__</span><span class="p">(</span><span class="s1">'Fur'</span><span class="p">),</span> <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'fur'</span><span class="p">],</span>
                <span class="p">[</span><span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nf">__</span><span class="p">(</span><span class="s1">'Wool'</span><span class="p">),</span> <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'wool'</span><span class="p">],</span>
            <span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_options</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<p>As the name implies, the <code class="highlighter-rouge">getAllOptions</code> method provides a list of all available options.</p>

<h2 id="step-4-add-a-backend-model">Step 4: Add a backend model</h2>

<p>Now we will create a backend model:</p>

<p><code class="highlighter-rouge">app/code/Learning/ClothingMaterial/Model/Attribute/Backend/Material.php</code></p>

<div class="collapsible">
    <b class="collapsible-title">Show code </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="o">&lt;?</span><span class="n">php</span>
<span class="cd">/**
 * Copyright © 2016 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">Learning\ClothingMaterial\Model\Attribute\Backend</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Material</span> <span class="k">extends</span> <span class="err">\</span><span class="nc">Magento\Eav\Model\Entity\Attribute\Backend\AbstractBackend</span>
<span class="p">{</span>
    <span class="cd">/**
     * Validate
     * @param \Magento\Catalog\Model\Product $object
     * @throws \Magento\Framework\Exception\LocalizedException
     * @return bool
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">validate</span><span class="p">(</span><span class="nv">$object</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$object</span><span class="o">-&gt;</span><span class="nf">getData</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getAttribute</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getAttributeCode</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nv">$object</span><span class="o">-&gt;</span><span class="nf">getAttributeSetId</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">==</span> <span class="s1">'wool'</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="err">\</span><span class="nf">Magento\Framework\Exception\LocalizedException</span><span class="p">(</span>
                <span class="nf">__</span><span class="p">(</span><span class="s1">'Bottom can not be wool.'</span><span class="p">)</span>
            <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<p>In our example, we implement only the <code class="highlighter-rouge">validate()</code> method.</p>

<p>The backend model may have <code class="highlighter-rouge">beforeSave</code>, <code class="highlighter-rouge">afterSave</code>, and <code class="highlighter-rouge">afterLoad</code> methods that allow the execution of some code at the moment an attribute is saved or loaded.
The backend model is what makes attribute management a really powerful method of customization.</p>

<p>Note that we hardcoded <code class="highlighter-rouge">attributeSetId</code> here for the sake of time.
In other cases, it could be different.
Make sure to check the <code class="highlighter-rouge">eav_attribute_set</code> table for the right ID.</p>

<h2 id="step-5-add-a-frontend-model">Step 5: Add a frontend model</h2>

<p>And finally, we create a frontend model to make our value bold:</p>

<div class="collapsible">
    <b class="collapsible-title">Show code </b>
    <div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="o">&lt;?</span><span class="n">php</span>
<span class="kn">namespace</span> <span class="nn">Learning\ClothingMaterial\Model\Attribute\Frontend</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Material</span> <span class="k">extends</span> <span class="err">\</span><span class="nc">Magento\Eav\Model\Entity\Attribute\Frontend\AbstractFrontend</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">getValue</span><span class="p">(</span><span class="err">\</span><span class="nc">Magento\Framework\DataObject</span> <span class="nv">$object</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$object</span><span class="o">-&gt;</span><span class="nf">getData</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getAttribute</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getAttributeCode</span><span class="p">());</span>
        <span class="k">return</span> <span class="s2">"&lt;b&gt;</span><span class="nv">$value</span><span class="s2">&lt;/b&gt;"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<p>As with the backend model, this is also a very simple class.</p>

<h2 id="step-6-execute-the-installdata-script-and-verify-that-it-works">Step 6: Execute the InstallData script and verify that it works</h2>

<p>Now we can run our code and check the results:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> &lt;magento2_root&gt;
php bin/magento setup:upgrade
</pre></td></tr></tbody></table></code></pre></div></div>

<p>After you run this, the new attribute should have been added to the database.
You can check the <code class="highlighter-rouge">eav_attribute</code> and <code class="highlighter-rouge">catalog_eav_attribute</code> tables to verify that the attribute and its properties are there.
We see ClothingMaterial down here, with the primary key of 155, and its corresponding entry in <code class="highlighter-rouge">catalog_eav_attribute,</code> with the primary key being 155.</p>

<p>Now, let’s go to the backend, open any configurable product, and we should see that clothing material dropdown.
We’ll set our filters to be a configurable product with the attribute set of “bottom”.</p>

<p>We’ll select the first item. First, we’ll set the clothing material to Fur and attempt to save our attribute. We see that our
backend model has executed successfully, so now we’ll set it to Wool and save it.</p>

<p>Having saved the product, we’ll now move to the frontend.
It should be visible and in bold text.</p>


			<div class="adjaced-pages">
				<div class="playlist-name">Fundamentals of Magento 2 Development</div>
			
			
				<div class="previous-page">
                    
                    <a href="/devdocs/2.1/videos/fundamentals/add-a-javascript-module/">
                    
						<span class="arrow">&larr; Previous</span>
						<span class="title">How to Add a JavaScript Module</span>
					</a>
				</div>
			

			
			
				<div class="next-page">
                    
                    <a href="/devdocs/2.1/videos/fundamentals/create-a-new-module/">
                    
						<span class="arrow">Next &rarr;</span>
						<span class="title">Create a New Module</span>
					</a>
				</div>
			
			</div>



		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  


  

    

    

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      

<ul class="nav footer-links" role="menu">

  <li class="" role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md">Become a Contributor</a></li>

  <li class="" role="menuitem"><a href="https://glossary.magento.com/">Glossary</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/privacy/">Privacy Policy</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/terms/">Terms of Service</a></li>

  <li class="" role="menuitem"><a href="https://magento.com/legal/licensing/">License/Trademark FAQ</a></li>

  <li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/release-notes/bk-release-notes.html">Release Notes</a></li>

  <li class="" role="menuitem"><a href="/devdocs/2.1/guides/v2.1/release-notes/packages-open-source.html">Third-Party Licenses</a></li>

</ul>

    </div>

		<div class="copyright-date">&copy; 2023 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs/2.1/assets/js/app.min.js"></script>





<script type="text/javascript" src="/devdocs/2.1/common/js/last-modified-at.js"></script>
<script type="text/javascript" src="/devdocs/2.1/common/js/glossary-link-enhancer.js"></script>


</body>
</html>

