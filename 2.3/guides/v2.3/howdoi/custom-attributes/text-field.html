<!DOCTYPE html>
<html lang="en" dir="ltr" class="spectrum spectrum--medium spectrum--lightest">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Add a custom text field attribute | Archived 2.3 Magento Developer Guide</title>
	<meta name="description" content="Magento Developer Guide">

	<link rel="stylesheet" href="https://use.typekit.net/iaw1apr.css">
	<link rel="stylesheet" href="/devdocs-archive/2.3/assets/css/app.css?ver=20" />
	<link rel="stylesheet" href="/devdocs-archive/2.3/assets/css/print.css?ver=20" media="print" />
	<script src="https://assets.adobedtm.com/a7d65461e54e/f87b70cb627a/launch-b042bff6c581.min.js" async></script>

	<link rel="stylesheet" href="/devdocs-archive/2.3/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />
<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs-archive/2.3";
  var algolia = {
    id: "E642SEDTHL",
    index: "devdocs",
    key: "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [{
      label: "Results",
      name: "devdocs",
      facetFilters: [
        ["guide_version: 2.3",
          "versionless: true"
        ]
      ],
      refinements: [{
        label: "Functional areas",
        attribute: "functional_areas"
      }],
      baseUrl: "/devdocs-archive/2.3"
    }
  ];

</script>




	<link rel="icon" href="https://www.adobe.com/favicon.ico" type="image/x-icon" />
	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://adobe.com/favicon.ico">

</head>

<body class="layout-tutorial">

	<header class="site-header">

		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs-archive/2.3/">
      <img class="logo-image" src="/devdocs-archive/2.3/assets/i/adobe-a.svg" alt="Adobe">
      <span class="logo-text">Adobe</span>
      <span class="site-logo">Commerce DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      <!-- Main Navigation --><ul class="nav-main spectrum-Tabs spectrum-Tabs--sizeM spectrum-Tabs--horizontal" role="menubar"><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Cloud</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud basics</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/overview.html" class="spectrum-Menu-itemLabel ">Cloud Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/architecture/cloud-architecture.html" class="spectrum-Menu-itemLabel ">Cloud Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/project/file-structure.html" class="spectrum-Menu-itemLabel ">Project Structure</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/best-practices.html" class="spectrum-Menu-itemLabel ">Upgrades and Patches</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/release-notes/cloud-tools-suite.html" class="spectrum-Menu-itemLabel ">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud development</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/" class="spectrum-Menu-itemLabel ">Local development</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/configure/" class="spectrum-Menu-itemLabel ">Configure and launch Docker</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/quick-reference/" class="spectrum-Menu-itemLabel ">Docker quick reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/app/configure-app-yaml.html" class="spectrum-Menu-itemLabel ">Configure Application</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/env/configure-env-yaml.html" class="spectrum-Menu-itemLabel ">Configure Environments</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Functional Testing</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/application-testing/" class="spectrum-Menu-itemLabel ">Application testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/code-testing/" class="spectrum-Menu-itemLabel ">Cloud code testing</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Setup</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/install-gde/install-flow-diagram.html" class="spectrum-Menu-itemLabel ">Installation Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-admin/start/resources/extensions.html" class="spectrum-Menu-itemLabel ">Extensions Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/comp-mgr/bk-compman-upgrade-guide.html" class="spectrum-Menu-itemLabel ">Software Update Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bk-config-guide.html" class="spectrum-Menu-itemLabel ">Configuration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/performance-best-practices/introduction.html" class="spectrum-Menu-itemLabel ">Performance Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/migration/bk-migration-guide.html" class="spectrum-Menu-itemLabel ">Migration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/release/notes/overview.html" class="spectrum-Menu-itemLabel ">Release Information</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/reference/cli/magento.html" class="spectrum-Menu-itemLabel ">Command-line Tools Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/tools/overview.html" class="spectrum-Menu-itemLabel ">Tools</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Development</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Backend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/architecture/bk-architecture.html" class="spectrum-Menu-itemLabel ">Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html" class="spectrum-Menu-itemLabel ">PHP Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/ext-best-practices/bk-ext-best-practices.html" class="spectrum-Menu-itemLabel ">Extension Developer Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/mrg/intro.html" class="spectrum-Menu-itemLabel ">Module Reference Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/coding-standards/bk-coding-standards.html" class="spectrum-Menu-itemLabel ">Coding Standards</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/guides/" class="spectrum-Menu-itemLabel ">Contributor Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/" class="spectrum-Menu-itemLabel ">Contribution Resources</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Frontend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html" class="spectrum-Menu-itemLabel ">Frontend Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/ui_comp_guide/bk-ui_comps.html" class="spectrum-Menu-itemLabel ">UI Components Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html" class="spectrum-Menu-itemLabel ">JavaScript Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/pattern-library/bk-pattern.html" class="spectrum-Menu-itemLabel ">Admin Design Pattern Library</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/design-styleguide/bk-styleguide.html" class="spectrum-Menu-itemLabel ">Admin Style Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/pwa-studio/" class="spectrum-Menu-itemLabel ">PWA Documentation Site</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder Developer Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">API</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/get-started/bk-get-started-api.html" class="spectrum-Menu-itemLabel ">Get Started with our Web APIs</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/rest/bk-rest.html" class="spectrum-Menu-itemLabel ">REST API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/soap/bk-soap.html" class="spectrum-Menu-itemLabel ">SOAP API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/" class="spectrum-Menu-itemLabel ">GraphQL Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/eqp/v1/" class="spectrum-Menu-itemLabel ">Marketplace EQP API Reference</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Testing</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/testing.html" class="spectrum-Menu-itemLabel ">Application Testing Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://devdocs.magento.com/mftf/v2/docs/introduction.html" class="spectrum-Menu-itemLabel ">Functional Acceptance Testing (MFTF)</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/integration/integration_test_execution.html" class="spectrum-Menu-itemLabel ">Integration Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/js/jasmine.html" class="spectrum-Menu-itemLabel ">JavaScript Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/unit/unit_test_execution.html" class="spectrum-Menu-itemLabel ">PHP Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/get-started/web-api-functional-testing.html" class="spectrum-Menu-itemLabel ">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Functional Areas</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/advanced-reporting/overview.html" class="spectrum-Menu-itemLabel ">Advanced Reporting</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/b2b/bk-b2b.html" class="spectrum-Menu-itemLabel ">B2B</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/catalog-service/overview.html" class="spectrum-Menu-itemLabel ">Catalog Service</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/inventory/index.html" class="spectrum-Menu-itemLabel ">Inventory Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/guide-overview.html" class="spectrum-Menu-itemLabel ">Live Search</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/sellers/" class="spectrum-Menu-itemLabel ">Commerce Marketplace</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html" class="spectrum-Menu-itemLabel ">Payment Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://omsdocs.magento.com/en/" class="spectrum-Menu-itemLabel ">Order Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/product-recommendations/developer/development-overview.html" class="spectrum-Menu-itemLabel ">Product Recommendations Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/security-and-compliance/overview.html" class="spectrum-Menu-itemLabel ">Security and Compliance</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/services/shared-services/" class="spectrum-Menu-itemLabel ">Shared Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/extension-dev-guide/staging.html" class="spectrum-Menu-itemLabel ">Staging</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Tutorials</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/rest/tutorials/index.html" class="spectrum-Menu-itemLabel ">Rest Tutorials</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/custom-attributes/introduction.html" class="spectrum-Menu-itemLabel ">Custom Attributes</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/customize_product.html" class="spectrum-Menu-itemLabel ">Customize Product Creation Form</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Customize Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/support/" class="spectrum-Menu-itemLabel ">Support</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-learn/tutorials/overview.html" class="spectrum-Menu-itemLabel ">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      <div class="version-switcher">
	<button class="spectrum-Picker spectrum-Picker--sizeM dropdown-toggle" disabled>
		<span class="spectrum-Picker-label">Version 2.3</span>
	</button>
</div>
    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		

		<div class="main-container">
			<a id="main-content"></a>

<div class="content-container">

  <!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Customization tutorials</h4>
		
		<div class="collapsible-navigation">
		  <ul class="spectrum-SideNav spectrum-SideNav--multiLevel"><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Custom Attributes</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/custom-attributes/introduction.html" class="spectrum-SideNav-itemLink ">Introduction</a></li><li class="is-selected  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/custom-attributes/text-field.html" class="spectrum-SideNav-itemLink ">Add a text field attribute</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Customize product creation form</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/customize_product.html" class="spectrum-SideNav-itemLink ">Initial tasks</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/customize-form-configuration.html" class="spectrum-SideNav-itemLink ">Customize the form configuration</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/customize-modifier-class.html" class="spectrum-SideNav-itemLink ">Customize using a modifier class</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Customize checkout</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-SideNav-itemLink ">Initial tasks</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_new_step.html" class="spectrum-SideNav-itemLink ">Add a new checkout step</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_customize.html" class="spectrum-SideNav-itemLink ">Customize the view of a checkout step</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_payment.html" class="spectrum-SideNav-itemLink ">Add a custom payment method to checkout</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_order.html" class="spectrum-SideNav-itemLink ">Add custom validations before order placement</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout-add-custom-carrier.html" class="spectrum-SideNav-itemLink ">Add a custom shipping carrier</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_carrier.html" class="spectrum-SideNav-itemLink ">Add custom shipping carrier validations</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_zip.html" class="spectrum-SideNav-itemLink ">Add a custom input mask for ZIP code</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_edit_form.html" class="spectrum-SideNav-itemLink ">Add a custom template for a form field on Checkout page</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_form.html" class="spectrum-SideNav-itemLink ">Add a new input form to checkout</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_new_field.html" class="spectrum-SideNav-itemLink ">Add a new field in address form</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_address.html" class="spectrum-SideNav-itemLink ">Add a custom shipping address renderer</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_custom_checkbox.html" class="spectrum-SideNav-itemLink ">Add custom fields that influence other Checkout fields</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_shipping_methods.html" class="spectrum-SideNav-itemLink ">Customize the list of shipping methods</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_payment_new_field.html" class="spectrum-SideNav-itemLink ">Add a custom field for an offline payment method</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/admin/customize_admin.html" class="spectrum-SideNav-itemLink ">Customize the Admin design</a></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
      <header class="content-header">
        <!-- page-header -->
<section class="page-intro">

  

  
  <div class="message-banner">
    <center>Adobe Commerce 2.3 reached end of support in September 2022.</center>
  </div>
  

  




<!--   

<div class="spectrum-Tags" role="list" aria-label="Tags">
  <div class="spectrum-Tags-item" role="listitem" tabindex="0">
    <img class="spectrum-Avatar" src="img/example-ava.jpg" alt="Avatar">
    <span class="spectrum-Tags-itemLabel">Shantanu</span>
  </div>
</div> -->


  <h1 class="page-title">Add a custom text field attribute</h1>

  

  
	<div class="github-links spectrum-ActionGroup--compact ActionGroup--justified"></div>
	

</section>

      </header>
      <main>
        <h2 id="overview">Overview</h2>

<p>This tutorial describes how a developer can create a custom text field attribute for the Customer entity using code. This will reflect in both the <a href="https://docs.magento.com/user-guide/v2.3/customers/customer-account-manage.html">Customer Grid</a> and the <a href="https://docs.magento.com/user-guide/v2.3/customers/customer-account-update.html">Customer Form</a> in the Admin.</p>

<p>This Customer attribute will be used to save and view the customer’s ID in an external system, as an example. It will be created as an EAV attribute in a data patch. The EAV model allows a developer to add custom functionality to the Magento entities without modifying the core databases and schemas. Data patches are run just once, so this code will create the custom attribute and will never run again, which could cause issues.</p>

<h2 id="code">Code</h2>

<h3 id="create-the-data-patch-class">Create the data patch class</h3>

<p>Create a data patch class called <code class="language-plaintext highlighter-rouge">ExternalId</code> under the <code class="language-plaintext highlighter-rouge">\ExampleCorp\Customer\Setup\Patch\Data</code> namespace. This makes Magento execute the data patch automatically when <code class="language-plaintext highlighter-rouge">bin/magento setup:upgrade</code> is run. All data patches must implement the <code class="language-plaintext highlighter-rouge">\Magento\Framework\Setup\Patch\DataPatchInterface</code> interface.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">ExampleCorp\Customer\Setup\Patch\Data</span><span class="p">;</span>

<span class="kn">use</span> <span class="err">\</span><span class="nc">Magento\Framework\Setup\Patch\DataPatchInterface</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ExternalId</span> <span class="kd">implements</span> <span class="nc">DataPatchInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">apply</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// will be implemented in the next steps.</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">getAliases</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// will be implemented in the next steps.</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">getDependencies</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// will be implemented in the next steps.</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="inject-the-dependencies">Inject the dependencies</h3>

<p>The dependencies to the data patch are injected using constructor DI and are listed below:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">\Magento\Framework\Setup\ModuleDataSetupInterface</code> for initializing and ending the setup.</li>
  <li><code class="language-plaintext highlighter-rouge">\Magento\Customer\Setup\CustomerSetupFactory</code> for creating a model of <code class="language-plaintext highlighter-rouge">\Magento\Customer\Setup\CustomerSetup</code> which is required to add the custom attribute to Magento.</li>
  <li><code class="language-plaintext highlighter-rouge">\Magento\Customer\Model\ResourceModel\Attribute</code> aliased as <code class="language-plaintext highlighter-rouge">AttributeResource</code> for saving the attribute after adding custom data to it.</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">\Psr\Log\LoggerInterface</code> for logging exceptions thrown during the execution.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre> <span class="cd">/**
  * Constructor
  *
  * @param ModuleDataSetupInterface $moduleDataSetup
  * @param CustomerSetupFactory $customerSetupFactory
  * @param AttributeResource $attributeResource
  * @param LoggerInterface $logger
  */</span>
 <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
     <span class="kt">ModuleDataSetupInterface</span> <span class="nv">$moduleDataSetup</span><span class="p">,</span>
     <span class="kt">CustomerSetupFactory</span> <span class="nv">$customerSetupFactory</span><span class="p">,</span>
     <span class="kt">AttributeResource</span> <span class="nv">$attributeResource</span><span class="p">,</span>
     <span class="kt">LoggerInterface</span> <span class="nv">$logger</span>
 <span class="p">)</span> <span class="p">{</span>
     <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">moduleDataSetup</span> <span class="o">=</span> <span class="nv">$moduleDataSetup</span><span class="p">;</span>
     <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span> <span class="o">=</span> <span class="nv">$customerSetupFactory</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">([</span><span class="s1">'setup'</span> <span class="o">=&gt;</span> <span class="nv">$moduleDataSetup</span><span class="p">]);</span>
     <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">attributeResource</span> <span class="o">=</span> <span class="nv">$attributeResource</span><span class="p">;</span>
     <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span> <span class="o">=</span> <span class="nv">$logger</span><span class="p">;</span>
 <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h3 id="implement-the-apply-method">Implement the apply method</h3>

<p>There are five steps in developing a data patch. All the steps below are written inside the <code class="language-plaintext highlighter-rouge">apply</code> method.</p>

<ol>
  <li>
    <p>Starting and ending the setup execution. This turns off foreign key checks and sets the SQL mode.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">moduleDataSetup</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">startSetup</span><span class="p">();</span>

 <span class="cm">/*
   Attribute creation code must be run between these two lines
   to ensure that the attribute is created smoothly.
  */</span>

 <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">moduleDataSetup</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">endSetup</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>Add the text field customer attribute with the required settings.</p>

    <p>The third parameter for <code class="language-plaintext highlighter-rouge">addAttribute</code> is an array of settings required to configure the attribute. Passing an empty array uses all the default values for each possible setting. To keep the code to a minimum, just declare the settings needing to be overridden and the rest of the settings will be used from the Magento defaults. The settings overrides can be done as described below.</p>

    <p class="bs-callout-info">For creating a simple text field, it is not necessary to override the settings for <code class="language-plaintext highlighter-rouge">backend</code> (database field type) and <code class="language-plaintext highlighter-rouge">input</code> (frontend HTML input type), as they default to <code class="language-plaintext highlighter-rouge">varchar</code> and <code class="language-plaintext highlighter-rouge">text</code> respectively.</p>

    <p class="bs-callout-info">The <code class="language-plaintext highlighter-rouge">\Magento\Customer\Api\CustomerMetadataInterface</code> interface contains constants like the customer entity’s code and the default attribute set code, which can be referenced.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span><span class="o">-&gt;</span><span class="nf">addAttribute</span><span class="p">(</span>
     <span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ENTITY_TYPE_CUSTOMER</span><span class="p">,</span> <span class="c1">// entity type code</span>
     <span class="s1">'externalcorp_external_id'</span><span class="p">,</span> <span class="c1">// unique attribute code</span>
     <span class="p">[</span>
         <span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="s1">'External ID'</span><span class="p">,</span>
         <span class="s1">'required'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
         <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">200</span><span class="p">,</span>
         <span class="s1">'system'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
         <span class="s1">'user_defined'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">'is_used_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">'is_visible_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">'is_filterable_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">'is_searchable_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
     <span class="p">]</span>
 <span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <table>
      <thead>
        <tr>
          <th>Setting Key</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">label</code></td>
          <td><code class="language-plaintext highlighter-rouge">External ID</code> - Label for displaying the attribute value</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">required</code></td>
          <td><code class="language-plaintext highlighter-rouge">0</code> - Attribute will be an optional field in the customer form</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">position</code></td>
          <td><code class="language-plaintext highlighter-rouge">200</code> - Sort order in the customer form</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">system</code></td>
          <td><code class="language-plaintext highlighter-rouge">0</code> - Not a system-defined attribute</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">user_defined</code></td>
          <td><code class="language-plaintext highlighter-rouge">1</code> - A user-defined attribute</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">is_used_in_grid</code></td>
          <td><code class="language-plaintext highlighter-rouge">1</code> - Ready for use in the customer grid</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">is_visible_in_grid</code></td>
          <td><code class="language-plaintext highlighter-rouge">1</code> - Visible in the customer grid</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">is_filterable_in_grid</code></td>
          <td><code class="language-plaintext highlighter-rouge">1</code> - Filterable in the customer grid</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">is_searchable_in_grid</code></td>
          <td><code class="language-plaintext highlighter-rouge">1</code> - Searchable in the customer grid</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Add attribute to an attribute set and group.</p>

    <p class="bs-callout-info">There is only one attribute set and group for the customer entity. The default attribute set ID is a constant defined the <code class="language-plaintext highlighter-rouge">CustomerMetadataInterface</code> interface and setting the attribute group ID to null makes Magento use the default attribute group ID for the customer entity.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span><span class="o">-&gt;</span><span class="nf">addAttributeToSet</span><span class="p">(</span>
     <span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ENTITY_TYPE_CUSTOMER</span><span class="p">,</span> <span class="c1">// entity type code</span>
     <span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ATTRIBUTE_SET_ID_CUSTOMER</span><span class="p">,</span> <span class="c1">// attribute set ID</span>
     <span class="kc">null</span><span class="p">,</span> <span class="c1">// attribute group ID</span>
     <span class="s1">'externalcorp_external_id'</span> <span class="c1">// unique attribute code</span>
 <span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>Make the attribute visible in the customer form.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre> <span class="c1">// Get the newly created attribute's model</span>
 <span class="nv">$attribute</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span><span class="o">-&gt;</span><span class="nf">getEavConfig</span><span class="p">()</span>
     <span class="o">-&gt;</span><span class="nf">getAttribute</span><span class="p">(</span><span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ENTITY_TYPE_CUSTOMER</span><span class="p">,</span> <span class="s1">'externalcorp_external_id'</span><span class="p">);</span>

 <span class="c1">// Make attribute visible in Admin customer form</span>
 <span class="nv">$attribute</span><span class="o">-&gt;</span><span class="nf">setData</span><span class="p">(</span><span class="s1">'used_in_forms'</span><span class="p">,</span> <span class="p">[</span>
     <span class="s1">'adminhtml_customer'</span>
 <span class="p">]);</span>

 <span class="c1">// Save modified attribute model using its resource model</span>
 <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">attributeResource</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">(</span><span class="nv">$attribute</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>Gracefully handle exceptions.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre> <span class="k">try</span> <span class="p">{</span>
     <span class="c1">// All the code inside the apply method goes into the try block.</span>
 <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nc">Exception</span> <span class="nv">$exception</span><span class="p">)</span> <span class="p">{</span>
     <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span><span class="o">-&gt;</span><span class="nf">err</span><span class="p">(</span><span class="nv">$exception</span><span class="o">-&gt;</span><span class="nf">getMessage</span><span class="p">());</span>
 <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ol>

<h3 id="implement-rest-of-the-interface">Implement rest of the interface</h3>

<p>This data patch does not have any other patch as a dependency, and this data patch was not renamed earlier, so both <code class="language-plaintext highlighter-rouge">getDependencies</code> and <code class="language-plaintext highlighter-rouge">getAliases</code> can return an empty array.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="n">getDependencies</span><span class="p">():</span> <span class="kt">array</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="n">getAliases</span><span class="p">():</span> <span class="kt">array</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="execute-the-data-patch">Execute the data patch</h3>

<p>Run <code class="language-plaintext highlighter-rouge">bin/magento setup:upgrade</code> from the Magento root to execute the newly added data patch.</p>

<ul>
  <li>The attribute is created in the customer form under the <em>Account Information</em> section.</li>
</ul>

<p><img src="/devdocs-archive/2.3/common/images/custom-attributes/customer-text-form.png" alt="Custom attribute in the customer form" width="600px" /></p>

<ul>
  <li>The attribute is displayed in the customer grid.</li>
</ul>

<p><img src="/devdocs-archive/2.3/common/images/custom-attributes/customer-text-grid.png" alt="Custom attribute in the customer grid" width="600px" /></p>

<h3 id="code-reference">Code reference</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span> <span class="k">declare</span><span class="p">(</span><span class="n">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="kn">namespace</span> <span class="nn">ExampleCorp\Customer\Setup\Patch\Data</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Exception</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Log\LoggerInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Customer\Api\CustomerMetadataInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Customer\Model\ResourceModel\Attribute</span> <span class="k">as</span> <span class="nc">AttributeResource</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Customer\Setup\CustomerSetup</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Customer\Setup\CustomerSetupFactory</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\ModuleDataSetupInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\Patch\DataPatchInterface</span><span class="p">;</span>

<span class="cd">/**
 * Creates a customer attribute for managing a customer's external system ID
 */</span>
<span class="kd">class</span> <span class="nc">ExternalId</span> <span class="kd">implements</span> <span class="nc">DataPatchInterface</span>
<span class="p">{</span>
    <span class="cd">/**
     * @var ModuleDataSetupInterface
     */</span>
    <span class="k">private</span> <span class="nv">$moduleDataSetup</span><span class="p">;</span>

    <span class="cd">/**
     * @var CustomerSetup
     */</span>
    <span class="k">private</span> <span class="nv">$customerSetup</span><span class="p">;</span>

    <span class="cd">/**
     * @var AttributeResource
     */</span>
    <span class="k">private</span> <span class="nv">$attributeResource</span><span class="p">;</span>

    <span class="cd">/**
     * @var LoggerInterface
     */</span>
    <span class="k">private</span> <span class="nv">$logger</span><span class="p">;</span>

    <span class="cd">/**
     * Constructor
     *
     * @param ModuleDataSetupInterface $moduleDataSetup
     * @param CustomerSetupFactory $customerSetupFactory
     * @param AttributeResource $attributeResource
     * @param LoggerInterface $logger
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="kt">ModuleDataSetupInterface</span> <span class="nv">$moduleDataSetup</span><span class="p">,</span>
        <span class="kt">CustomerSetupFactory</span> <span class="nv">$customerSetupFactory</span><span class="p">,</span>
        <span class="kt">AttributeResource</span> <span class="nv">$attributeResource</span><span class="p">,</span>
        <span class="kt">LoggerInterface</span> <span class="nv">$logger</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">moduleDataSetup</span> <span class="o">=</span> <span class="nv">$moduleDataSetup</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span> <span class="o">=</span> <span class="nv">$customerSetupFactory</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">([</span><span class="s1">'setup'</span> <span class="o">=&gt;</span> <span class="nv">$moduleDataSetup</span><span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">attributeResource</span> <span class="o">=</span> <span class="nv">$attributeResource</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span> <span class="o">=</span> <span class="nv">$logger</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Get array of patches that have to be executed prior to this.
     *
     * Example of implementation:
     *
     * [
     *      \Vendor_Name\Module_Name\Setup\Patch\Patch1::class,
     *      \Vendor_Name\Module_Name\Setup\Patch\Patch2::class
     * ]
     *
     * @return string[]
     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="n">getDependencies</span><span class="p">():</span> <span class="kt">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[];</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Get aliases (previous names) for the patch.
     *
     * @return string[]
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">getAliases</span><span class="p">():</span> <span class="kt">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[];</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Run code inside patch
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">apply</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Start setup</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">moduleDataSetup</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">startSetup</span><span class="p">();</span>

        <span class="k">try</span> <span class="p">{</span>
            <span class="c1">// Add customer attribute with settings</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span><span class="o">-&gt;</span><span class="nf">addAttribute</span><span class="p">(</span>
                <span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ENTITY_TYPE_CUSTOMER</span><span class="p">,</span>
                <span class="s1">'externalcorp_external_id'</span><span class="p">,</span>
                <span class="p">[</span>
                    <span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="s1">'External ID'</span><span class="p">,</span>
                    <span class="s1">'required'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
                    <span class="s1">'system'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s1">'user_defined'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">'is_used_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">'is_visible_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">'is_filterable_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">'is_searchable_in_grid'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">);</span>

            <span class="c1">// Add attribute to default attribute set and group</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span><span class="o">-&gt;</span><span class="nf">addAttributeToSet</span><span class="p">(</span>
                <span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ENTITY_TYPE_CUSTOMER</span><span class="p">,</span>
                <span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ATTRIBUTE_SET_ID_CUSTOMER</span><span class="p">,</span>
                <span class="kc">null</span><span class="p">,</span>
                <span class="s1">'externalcorp_external_id'</span>
            <span class="p">);</span>

            <span class="c1">// Get the newly created attribute's model</span>
            <span class="nv">$attribute</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">customerSetup</span><span class="o">-&gt;</span><span class="nf">getEavConfig</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="nf">getAttribute</span><span class="p">(</span><span class="nc">CustomerMetadataInterface</span><span class="o">::</span><span class="no">ENTITY_TYPE_CUSTOMER</span><span class="p">,</span> <span class="s1">'externalcorp_external_id'</span><span class="p">);</span>

            <span class="c1">// Make attribute visible in Admin customer form</span>
            <span class="nv">$attribute</span><span class="o">-&gt;</span><span class="nf">setData</span><span class="p">(</span><span class="s1">'used_in_forms'</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">'adminhtml_customer'</span>
            <span class="p">]);</span>

            <span class="c1">// Save attribute using its resource model</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">attributeResource</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">(</span><span class="nv">$attribute</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nc">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span><span class="o">-&gt;</span><span class="nf">err</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="nf">getMessage</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="c1">// End setup</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">moduleDataSetup</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">endSetup</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

        
        <hr />
        <div class="spectrum-ButtonGroup">
          
          
          
            
            
            
            <a href="/devdocs-archive/2.3/guides/v2.3/howdoi/custom-attributes/introduction.html" class="spectrum-Button spectrum-Button--sizeM spectrum-Button--primary">Previous</a>
            

          
        </div>
        <!-- /.spectrum-ButtonGroup -->
      </main>

      <footer class="content-footer">
				<button class="page-updated spectrum-ActionButton spectrum-ActionButton--sizeM spectrum-ActionButton--quiet">
  <img class="spectrum-Icon spectrum-Icon--sizeS" src="/devdocs-archive/2.3/assets/i/icons/time.svg" alt="Updated" />
  <time class="spectrum-ActionButton-label" id="last-modified-at" itemprop="dateModified"
    datetime="2022-01-01">
    Jan 1st, 2022
  </time>
</button>

			</footer>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  <div class="page-contributor">
  <a href="https://github.com/drpayyne" target="_blank">
    Thanks to Adarsh Manickam for contributing this topic
  </a>
</div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->

</div>
<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
    <div class="container">
  
      <div class="copyright-links">
        

<ul class="nav footer-links" role="menu">

  <li class="  " role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md" class=" ">Become a Contributor</a></li>

  <li class="  " role="menuitem"><a href="https://glossary.magento.com/" class=" ">Glossary</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/privacy/" class=" ">Privacy Policy</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/" class=" ">Terms of Service</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/licensing/" class=" ">License/Trademark FAQ</a></li>

  <li class="  " role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/release-notes/bk-release-notes.html" class=" ">Release Notes</a></li>

  <li class="  " role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/release-notes/packages-open-source.html" class=" ">Third-Party Licenses</a></li>

</ul>

      </div>
  
          <div class="copyright-date">&copy; 2023 Adobe. All rights reserved.</div>
  
    </div>
  </div>
  <!-- / #footer -->
  
  


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs-archive/2.3/assets/js/app.min.js?ver=20"></script>
<script src="/devdocs-archive/2.3/assets/js/editions.min.js?ver=20"></script>
<script src="/devdocs-archive/2.3/assets/js/page-updated.min.js?ver=20"></script>





<script type="text/javascript" src="/devdocs-archive/2.3/common/js/glossary-link-enhancer.js"></script>


</body>

</html>
