<!DOCTYPE html>
<html lang="en" dir="ltr" class="spectrum spectrum--medium spectrum--lightest">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Manually configure master databases | Archived 2.3 Magento Developer Guide</title>
	<meta name="description" content="Magento Developer Guide">

	<link rel="stylesheet" href="https://use.typekit.net/iaw1apr.css">
	<link rel="stylesheet" href="/devdocs-archive/2.3/assets/css/app.css?ver=20" />
	<link rel="stylesheet" href="/devdocs-archive/2.3/assets/css/print.css?ver=20" media="print" />
	<script src="https://assets.adobedtm.com/a7d65461e54e/f87b70cb627a/launch-b042bff6c581.min.js" async></script>

	<link rel="stylesheet" href="/devdocs-archive/2.3/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />
<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs-archive/2.3";
  var algolia = {
    id: "E642SEDTHL",
    index: "devdocs",
    key: "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [{
      label: "Results",
      name: "devdocs",
      facetFilters: [
        ["guide_version: 2.3",
          "versionless: true"
        ]
      ],
      refinements: [{
        label: "Functional areas",
        attribute: "functional_areas"
      }],
      baseUrl: "/devdocs-archive/2.3"
    }
  ];

</script>




	<link rel="icon" href="https://www.adobe.com/favicon.ico" type="image/x-icon" />
	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://adobe.com/favicon.ico">

</head>

<body class="layout-default">

	<header class="site-header">

		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs-archive/2.3/">
      <img class="logo-image" src="/devdocs-archive/2.3/assets/i/adobe-a.svg" alt="Adobe">
      <span class="logo-text">Adobe</span>
      <span class="site-logo">Commerce DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      <!-- Main Navigation --><ul class="nav-main spectrum-Tabs spectrum-Tabs--sizeM spectrum-Tabs--horizontal" role="menubar"><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Cloud</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud basics</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/overview.html" class="spectrum-Menu-itemLabel ">Cloud Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/architecture/cloud-architecture.html" class="spectrum-Menu-itemLabel ">Cloud Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/project/file-structure.html" class="spectrum-Menu-itemLabel ">Project Structure</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/best-practices.html" class="spectrum-Menu-itemLabel ">Upgrades and Patches</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/release-notes/cloud-tools-suite.html" class="spectrum-Menu-itemLabel ">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud development</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/" class="spectrum-Menu-itemLabel ">Local development</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/configure/" class="spectrum-Menu-itemLabel ">Configure and launch Docker</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/quick-reference/" class="spectrum-Menu-itemLabel ">Docker quick reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/app/configure-app-yaml.html" class="spectrum-Menu-itemLabel ">Configure Application</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/env/configure-env-yaml.html" class="spectrum-Menu-itemLabel ">Configure Environments</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Functional Testing</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/application-testing/" class="spectrum-Menu-itemLabel ">Application testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/code-testing/" class="spectrum-Menu-itemLabel ">Cloud code testing</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Setup</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/install-gde/install-flow-diagram.html" class="spectrum-Menu-itemLabel ">Installation Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-admin/start/resources/extensions.html" class="spectrum-Menu-itemLabel ">Extensions Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/comp-mgr/bk-compman-upgrade-guide.html" class="spectrum-Menu-itemLabel ">Software Update Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bk-config-guide.html" class="spectrum-Menu-itemLabel ">Configuration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/performance-best-practices/introduction.html" class="spectrum-Menu-itemLabel ">Performance Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/migration/bk-migration-guide.html" class="spectrum-Menu-itemLabel ">Migration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/release/notes/overview.html" class="spectrum-Menu-itemLabel ">Release Information</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/reference/cli/magento.html" class="spectrum-Menu-itemLabel ">Command-line Tools Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/tools/overview.html" class="spectrum-Menu-itemLabel ">Tools</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Development</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Backend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/architecture/bk-architecture.html" class="spectrum-Menu-itemLabel ">Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html" class="spectrum-Menu-itemLabel ">PHP Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/ext-best-practices/bk-ext-best-practices.html" class="spectrum-Menu-itemLabel ">Extension Developer Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/mrg/intro.html" class="spectrum-Menu-itemLabel ">Module Reference Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/coding-standards/bk-coding-standards.html" class="spectrum-Menu-itemLabel ">Coding Standards</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/guides/" class="spectrum-Menu-itemLabel ">Contributor Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/" class="spectrum-Menu-itemLabel ">Contribution Resources</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Frontend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html" class="spectrum-Menu-itemLabel ">Frontend Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/ui_comp_guide/bk-ui_comps.html" class="spectrum-Menu-itemLabel ">UI Components Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html" class="spectrum-Menu-itemLabel ">JavaScript Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/pattern-library/bk-pattern.html" class="spectrum-Menu-itemLabel ">Admin Design Pattern Library</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/design-styleguide/bk-styleguide.html" class="spectrum-Menu-itemLabel ">Admin Style Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/pwa-studio/" class="spectrum-Menu-itemLabel ">PWA Documentation Site</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder Developer Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">API</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/get-started/bk-get-started-api.html" class="spectrum-Menu-itemLabel ">Get Started with our Web APIs</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/rest/bk-rest.html" class="spectrum-Menu-itemLabel ">REST API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/soap/bk-soap.html" class="spectrum-Menu-itemLabel ">SOAP API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/" class="spectrum-Menu-itemLabel ">GraphQL Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/eqp/v1/" class="spectrum-Menu-itemLabel ">Marketplace EQP API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/mbi/docs/getting-started.html" class="spectrum-Menu-itemLabel ">Commerce Reporting API</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Testing</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/testing.html" class="spectrum-Menu-itemLabel ">Application Testing Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://devdocs.magento.com/mftf/v2/docs/introduction.html" class="spectrum-Menu-itemLabel ">Functional Acceptance Testing (MFTF)</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/integration/integration_test_execution.html" class="spectrum-Menu-itemLabel ">Integration Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/js/jasmine.html" class="spectrum-Menu-itemLabel ">JavaScript Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/unit/unit_test_execution.html" class="spectrum-Menu-itemLabel ">PHP Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/get-started/web-api-functional-testing.html" class="spectrum-Menu-itemLabel ">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Functional Areas</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/advanced-reporting/overview.html" class="spectrum-Menu-itemLabel ">Advanced Reporting</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/b2b/bk-b2b.html" class="spectrum-Menu-itemLabel ">B2B</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/catalog-service/overview.html" class="spectrum-Menu-itemLabel ">Catalog Service</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/inventory/index.html" class="spectrum-Menu-itemLabel ">Inventory Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/guide-overview.html" class="spectrum-Menu-itemLabel ">Live Search</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/sellers/" class="spectrum-Menu-itemLabel ">Commerce Marketplace</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html" class="spectrum-Menu-itemLabel ">Payment Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://omsdocs.magento.com/en/" class="spectrum-Menu-itemLabel ">Order Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/product-recommendations/developer/development-overview.html" class="spectrum-Menu-itemLabel ">Product Recommendations Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/security-and-compliance/overview.html" class="spectrum-Menu-itemLabel ">Security and Compliance</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/services/shared-services/" class="spectrum-Menu-itemLabel ">Shared Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/extension-dev-guide/staging.html" class="spectrum-Menu-itemLabel ">Staging</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Tutorials</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/rest/tutorials/index.html" class="spectrum-Menu-itemLabel ">Rest Tutorials</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/custom-attributes/introduction.html" class="spectrum-Menu-itemLabel ">Custom Attributes</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/customize_product.html" class="spectrum-Menu-itemLabel ">Customize Product Creation Form</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Customize Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/support/" class="spectrum-Menu-itemLabel ">Support</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-learn/tutorials/overview.html" class="spectrum-Menu-itemLabel ">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      <div class="version-switcher">
	<button class="spectrum-Picker spectrum-Picker--sizeM dropdown-toggle" disabled>
		<span class="spectrum-Picker-label">Version 2.3</span>
	</button>
</div>

      
        <div class="search-btn">
  <button class="search-trigger" aria-label="Search">
    <svg class="spectrum-Icon" focusable="false" aria-hidden="true" aria-label="Search">
      <rect opacity="0" width="18" height="18" /><path class="a" d="M16.5865,15.107,12.7,11.2215A6.413,6.413,0,1,0,11.2215,12.7l3.886,3.886a1.05,1.05,0,0,0,1.479-1.479ZM3,7.5A4.5,4.5,0,1,1,7.5,12,4.5,4.5,0,0,1,3,7.5Z" />
    </svg>
  </button>
</div>

<div class="quick-search">
  <form class="spectrum-Search spectrum-Textfield search-form"
      action="/devdocs-archive/2.3/guides/v2.3/search.html">
  <input type="search" placeholder="Looking for something specific?" name="query" value=""
    class="spectrum-Textfield-input spectrum-Search-input search-field form-control" autocomplete="off">
    <svg class="spectrum-Icon spectrum-Icon--sizeM spectrum-Textfield-icon spectrum-Search-icon" focusable="false" aria-hidden="true">
    <rect fill="#ff13dc" opacity="0" width="18" height="18" />
    <path class="a"
      d="M16.5865,15.107,12.7,11.2215A6.413,6.413,0,1,0,11.2215,12.7l3.886,3.886a1.05,1.05,0,0,0,1.479-1.479ZM3,7.5A4.5,4.5,0,1,1,7.5,12,4.5,4.5,0,0,1,3,7.5Z" />
  </svg>
  <button type="reset" class="spectrum-ClearButton spectrum-ClearButton--sizeM spectrum-Search-clearButton">
    <div class="spectrum-ClearButton-fill">
      <svg class="spectrum-Icon spectrum-ClearButton-icon spectrum-UIIcon-Cross100" focusable="false" aria-hidden="true">
        <path class="a"
          d="M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z" />
      </svg>
    </div>
  </button>
</form>

</div>
      

    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		

		<div class="main-container">
			<a id="main-content"></a>

<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Configuration Guide</h4>
		
		<div class="collapsible-navigation">
		  <ul class="spectrum-SideNav spectrum-SideNav--multiLevel"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bk-config-guide.html" class="spectrum-SideNav-itemLink ">Introduction</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Security settings</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/security/google-recaptcha.html" class="spectrum-SideNav-itemLink ">Google reCAPTCHA</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/secy/hashing.html" class="spectrum-SideNav-itemLink ">Password hashing</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/secy/secy-headers.html" class="spectrum-SideNav-itemLink ">Prevent cache poisoning</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/secy/secy-cron.html" class="spectrum-SideNav-itemLink ">Secure cron.php to run in a browser</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/security/two-factor-authentication.html" class="spectrum-SideNav-itemLink ">Two-Factor Authentication</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/secy/secy-xframe.html" class="spectrum-SideNav-itemLink ">X-Frame-Options header</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bootstrap/magento-bootstrap.html" class="spectrum-SideNav-itemLink ">Application initialization and bootstrap</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bootstrap/magento-modes.html" class="spectrum-SideNav-itemLink ">About application modes</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bootstrap/mage-dirs.html" class="spectrum-SideNav-itemLink ">Customize base directory paths (MAGE_DIRS)</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bootstrap/mage-profiler.html" class="spectrum-SideNav-itemLink ">Enable profiling (MAGE_PROFILER)</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bootstrap/magento-how-to-set.html" class="spectrum-SideNav-itemLink ">Set the value of bootstrap parameters</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/" class="spectrum-SideNav-itemLink ">Pipeline Deployment</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/" class="spectrum-SideNav-itemLink ">Overview</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/technical-details.html" class="spectrum-SideNav-itemLink ">Technical Details</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/development-system.html" class="spectrum-SideNav-itemLink ">Development System Setup</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/build-system.html" class="spectrum-SideNav-itemLink ">Build System Setup</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/production-system.html" class="spectrum-SideNav-itemLink ">Production System Setup</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/prod_file-sys-perms.html" class="spectrum-SideNav-itemLink ">File systems access permissions</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Examples</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/example/shared-configuration.html" class="spectrum-SideNav-itemLink ">Shared configuration</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/example/cli.html" class="spectrum-SideNav-itemLink ">Using CLI commands</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/pipeline/example/environment-variables.html" class="spectrum-SideNav-itemLink ">Using environment variables</a></li></ul></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/deployment/single-machine.html" class="spectrum-SideNav-itemLink ">Single machine deployment</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli.html" class="spectrum-SideNav-itemLink ">Command line configuration</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands.html" class="spectrum-SideNav-itemLink ">Get started with command-line configuration</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/logging.html" class="spectrum-SideNav-itemLink ">Logging</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-cache.html" class="spectrum-SideNav-itemLink ">Manage the cache</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-index.html" class="spectrum-SideNav-itemLink ">Manage the indexers</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-cron.html" class="spectrum-SideNav-itemLink ">Configure and run cron</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-compiler.html" class="spectrum-SideNav-itemLink ">Code compiler</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-mode.html" class="spectrum-SideNav-itemLink ">Set the operation mode</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-queue.html" class="spectrum-SideNav-itemLink ">Start message queue consumers</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-urn.html" class="spectrum-SideNav-itemLink ">URN highlighter</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-depen.html" class="spectrum-SideNav-itemLink ">Dependency reports</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-catalog-sync.html" class="spectrum-SideNav-itemLink ">Catalog sync</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Configuration management</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-config-mgmt-export.html" class="spectrum-SideNav-itemLink ">Export the configuration</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-config-mgmt-set.html" class="spectrum-SideNav-itemLink ">Set configuration values</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-config-mgmt-import.html" class="spectrum-SideNav-itemLink ">Import data from configuration files</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-i18n.html" class="spectrum-SideNav-itemLink ">Translation dictionaries and language packages</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Static view files deployment</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-static-deploy-strategies.html" class="spectrum-SideNav-itemLink ">Static files deployment strategies</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-static-view.html" class="spectrum-SideNav-itemLink ">Deploy static view files</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-less-sass.html" class="spectrum-SideNav-itemLink ">Create symlinks to LESS files</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-test.html" class="spectrum-SideNav-itemLink ">Run unit tests</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-layout-xml.html" class="spectrum-SideNav-itemLink ">Convert layout XML files</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-perf-data.html" class="spectrum-SideNav-itemLink ">Generate data for performance testing</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cli/config-cli-subcommands-spt-util.html" class="spectrum-SideNav-itemLink ee-only">Run the support utilities (Adobe Commerce only)</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/config/config-magento.html" class="spectrum-SideNav-itemLink ">Configuration files</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/config/config-php.html" class="spectrum-SideNav-itemLink ">Deployment configuration</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/config/config-files.html" class="spectrum-SideNav-itemLink ">Module configuration files</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/config/config-create.html" class="spectrum-SideNav-itemLink ">Create or extend configuration types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/config/disable-module-output.html" class="spectrum-SideNav-itemLink ">Disable module output</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Configuration reference</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-sens.html" class="spectrum-SideNav-itemLink ">Sensitive and system-specific</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-payment.html" class="spectrum-SideNav-itemLink ">Payment configuration paths reference</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-most.html" class="spectrum-SideNav-itemLink ">Other configuration paths reference</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-b2b.html" class="spectrum-SideNav-itemLink b2b-only">B2B Extension configuration paths reference (Adobe Commerce only)</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-gitignore.html" class="spectrum-SideNav-itemLink ">.gitignore reference</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-var-name.html" class="spectrum-SideNav-itemLink ">Use environment variables to override configuration settings</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-configphp.html" class="spectrum-SideNav-itemLink ">config.php reference</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-envphp.html" class="spectrum-SideNav-itemLink ">env.php reference</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/prod/config-reference-systemxml.html" class="spectrum-SideNav-itemLink ">system.xml reference</a></li></ul></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cache.html" class="spectrum-SideNav-itemLink ">Configure caching</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cache/cache-types.html" class="spectrum-SideNav-itemLink ">Associate cache frontends with cache types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cache/cache-options.html" class="spectrum-SideNav-itemLink ">Low-level cache options</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cache/static-content-signing.html" class="spectrum-SideNav-itemLink ">Static content signing</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cache/two-level-cache.html" class="spectrum-SideNav-itemLink ">L2 cache</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/redis/config-redis.html" class="spectrum-SideNav-itemLink ">Configure Redis</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/redis/redis-pg-cache.html" class="spectrum-SideNav-itemLink ">Use Redis for default cache</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/redis/redis-session.html" class="spectrum-SideNav-itemLink ">Use Redis for session storage</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/config-varnish.html" class="spectrum-SideNav-itemLink ">Configure and use Varnish</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/config-varnish-install.html" class="spectrum-SideNav-itemLink ">Install Varnish</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/config-varnish-configure.html" class="spectrum-SideNav-itemLink ">Configure Varnish and your web server</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/config-varnish-magento.html" class="spectrum-SideNav-itemLink ">Configure Varnish for Commerce or Magento</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/config-varnish-advanced.html" class="spectrum-SideNav-itemLink ">Advanced Varnish configuration</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/use-multiple-varnish-cache.html" class="spectrum-SideNav-itemLink ">How cache clearing works with multiple Varnish instances</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/config-varnish-final.html" class="spectrum-SideNav-itemLink ">Final verification</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/use-varnish-cache.html" class="spectrum-SideNav-itemLink ">How cache clearing works with Varnish</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/use-varnish-cache-how.html" class="spectrum-SideNav-itemLink ">How Varnish caching works</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/varnish/use-varnish-esi.html" class="spectrum-SideNav-itemLink ">Varnish ESI Block</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/memcache/memcache.html" class="spectrum-SideNav-itemLink ">Use memcached for session storage</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/memcache/memcache_ubuntu.html" class="spectrum-SideNav-itemLink ">Install, configure, verify memcached on Ubuntu</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/memcache/memcache_centos.html" class="spectrum-SideNav-itemLink ">Install, configure, verify memcached on CentOS</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/memcache/memcache_magento.html" class="spectrum-SideNav-itemLink ">Configure Commerce or Magento to use memcached</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-site/ms_over.html" class="spectrum-SideNav-itemLink ">Multiple websites or stores</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-site/change-increment-id.html" class="spectrum-SideNav-itemLink ">Change increment ID for a database entity on particular store</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-site/ms_websites.html" class="spectrum-SideNav-itemLink ">Set up multiple websites, stores, and store views in the Admin</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-site/ms_nginx.html" class="spectrum-SideNav-itemLink ">Tutorial—Set up multiple websites or stores with nginx</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-site/ms_apache.html" class="spectrum-SideNav-itemLink ">Tutorial—Set up multiple websites with Apache</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cron/custom-cron.html" class="spectrum-SideNav-itemLink ">Set up a custom cron job and cron group</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cron/custom-cron-ref.html" class="spectrum-SideNav-itemLink ">Custom cron job and cron group reference</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/cron/custom-cron-tut.html" class="spectrum-SideNav-itemLink ">Configure a custom cron job and cron group (tutorial)</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/db-profiler/db-profiler.html" class="spectrum-SideNav-itemLink ">Configure the database profiler</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/elasticsearch/es-overview.html" class="spectrum-SideNav-itemLink ">Install and configure Elasticsearch</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/elasticsearch/opensearch-migration.html" class="spectrum-SideNav-itemLink ">Migrate from Elasticsearch to OpenSearch</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/elasticsearch/es-config-nginx.html" class="spectrum-SideNav-itemLink ">Configure nginx and Elasticsearch</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/elasticsearch/es-config-apache.html" class="spectrum-SideNav-itemLink ">Configure Apache and Elasticsearch</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/elasticsearch/es-config-stopwords.html" class="spectrum-SideNav-itemLink ">Configure Elasticsearch stopwords</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/elasticsearch/configure-magento.html" class="spectrum-SideNav-itemLink ">Configure Commerce and Magento to use Elasticsearch</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/elasticsearch/es-downgrade.html" class="spectrum-SideNav-itemLink ">Change the Elasticsearch client</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/mq/rabbitmq-overview.html" class="spectrum-SideNav-itemLink ">Message Queues</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/mq/manage-message-queues.html" class="spectrum-SideNav-itemLink ">Manage message queues</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-master/multi-master.html" class="spectrum-SideNav-itemLink ee-only">Split database performance solution (Adobe Commerce only)</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-master/multi-master_masterdb.html" class="spectrum-SideNav-itemLink ">Automatically configure master databases</a></li><li class="is-selected  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-master/multi-master_manual.html" class="spectrum-SideNav-itemLink ">Manually configure master databases</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-master/multi-master_verify.html" class="spectrum-SideNav-itemLink ">Verify split databases</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-master/multi-master_slavedb.html" class="spectrum-SideNav-itemLink ">Set up optional database replication</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/revert-split-database.html" class="spectrum-SideNav-itemLink ">Revert from a split database to a single database</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/log/log-intro.html" class="spectrum-SideNav-itemLink ">Custom Logging</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/log/log-magento.html" class="spectrum-SideNav-itemLink ">Logging in more detail</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/log/log-db.html" class="spectrum-SideNav-itemLink ">Example - logging database activity</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/log/custom-logger-handler.html" class="spectrum-SideNav-itemLink ">Example - logging to a custom log file</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/sessions.html" class="spectrum-SideNav-itemLink ">How to locate your session files</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/compliance/privacy/gdpr.html" class="spectrum-SideNav-itemLink ">GDPR compliance</a></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<header class="content-header">
				<!-- page-header -->
<section class="page-intro">

  
  <div class="message-banner">
    The split database feature was <a
      href="https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-split-database-functionality-in-Magento-Commerce/ba-p/465187">deprecated</a>
    in version 2.4.2 of Adobe Commerce. See <a
      href="/devdocs-archive/2.3/guides/v2.3/config-guide/revert-split-database.html">Revert from a split
      database to a single database</a>.
  </div>
  

  
  <div class="message-banner">
    <center>Adobe Commerce 2.3 reached end of support in September 2022.</center>
  </div>
  

  
<div class="break">
  <span class="edition-Label ee-only">Adobe Commerce only.
    <a class="spectrum-Link" href="https://experienceleague.adobe.com/docs/commerce-admin/user-guides/home.html#product-editions">
      Learn more.</a>
  </span>
</div>





<!-- 
<div class="bs-callout spectrum-Alert-edition edition-callout ee-only">
  <i class="edition-marker-icon-image spectrum-Icon spectrum-UIIcon-InfoMedium spectrum-Alert-icon"></i>
  <h4 class="spectrum-Alert-header-edition">Adobe Commerce only</h4>
  <div class="spectrum-Alert-content-edition">
    The content on this page is for Adobe Commerce only.
    <a href="https://experienceleague.adobe.com/docs/commerce-admin/user-guides/home.html#product-editions">Learn more</a>
  </div>
</div>
  

<div class="spectrum-Tags" role="list" aria-label="Tags">
  <div class="spectrum-Tags-item" role="listitem" tabindex="0">
    <img class="spectrum-Avatar" src="img/example-ava.jpg" alt="Avatar">
    <span class="spectrum-Tags-itemLabel">Shantanu</span>
  </div>
</div> -->


  <h1 class="page-title">Manually configure master databases</h1>

  

  
	<div class="github-links spectrum-ActionGroup--compact ActionGroup--justified"></div>
	

</section>

			</header>
			<main>
				<h2 id="config-ee-multidb-manual-over">Overview of manual split database configuration</h2>

<p>If the Magento application is already in production or if you’ve already installed custom code or components, you might need to configure split databases manually. Before continuing, contact Adobe Commerce Support to see if this is necessary in your case.</p>

<p>Manually splitting databases involves:</p>

<ul>
  <li>Create the <a href="https://glossary.magento.com/checkout">checkout</a> and order management system (OMS) databases</li>
  <li>
    <p>Run a series of SQL scripts that:</p>

    <ul>
      <li>Drop foreign keys</li>
      <li>Back up sales and quote database tables</li>
      <li>Move tables from your main Magento database to the sales and quote databases</li>
    </ul>
  </li>
</ul>

<p class="bs-callout-warning">If any custom code uses JOINs with tables in the sales and quote databases, you <em>cannot</em> use split databases. If in doubt, contact the authors of any custom code or extensions to make sure their code does not use JOINs.</p>

<p>This topic uses the following naming conventions:</p>

<ul>
  <li>The main Magento database name is <code class="language-plaintext highlighter-rouge">magento</code> and its username and password are both <code class="language-plaintext highlighter-rouge">magento</code></li>
  <li>
    <p>The quote database name is <code class="language-plaintext highlighter-rouge">magento_quote</code> and its username and password are both <code class="language-plaintext highlighter-rouge">magento_quote</code></p>

    <p>The quote database is also referred to as the <em>checkout</em> database.</p>
  </li>
  <li>
    <p>The sales database name is <code class="language-plaintext highlighter-rouge">magento_sales</code> and its username and password are both <code class="language-plaintext highlighter-rouge">magento_sales</code></p>

    <p>The sales database is also referred to as the order management system (<em>OMS</em>) database.</p>
  </li>
</ul>

<p class="bs-callout-info">This guide assumes all three databases are on the same host as the Magento application. However, the choice of where to locate the databases and what they’re named is up to you. We hope our examples make the instructions easier to follow.</p>

<h2 id="config-ee-multidb-backup">Back up the Magento system</h2>

<p>We strongly recommend you back up your current database and file system so you can restore it later in the <a href="https://glossary.magento.com/event">event</a> of issues during the process.</p>

<div class="collapsible">
    <b class="collapsible-title">Click to show how to back up Magento </b>
    <div class="collapsible-content"><p>To back up your system:</p>

<ol>
  <li>Log in to your Magento server as, or switch to, the <a href="/devdocs-archive/2.3/guides/v2.3/install-gde/prereq/file-sys-perms-over.html">file system owner</a>.</li>
  <li>
    <p>Enter the following commands:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>magento setup:backup <span class="nt">--code</span> <span class="nt">--media</span> <span class="nt">--db</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>Continue with the next section.</li>
</ol>
</div>
  </div>

<h2 id="config-ee-multidb-master-masters">Set up additional master databases</h2>

<p>This section discusses how to create database instances for sales and <a href="https://glossary.magento.com/quote">quote</a> tables.</p>

<div class="collapsible">
    <b class="collapsible-title">Click to show how to create database instances </b>
    <div class="collapsible-content"><p>Create sales and OMS quote databases as follows:</p>

<ol>
  <li>Log in to your database server as any user.</li>
  <li>
    <p>Enter the following command to get to a MySQL command prompt:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>Enter the MySQL <code class="language-plaintext highlighter-rouge">root</code> user’s password when prompted.</li>
  <li>
    <p>Enter the following commands in the order shown to create database instances named <code class="language-plaintext highlighter-rouge">magento_quote</code> and <code class="language-plaintext highlighter-rouge">magento_sales</code> with the same usernames and passwords:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>create database magento_quote<span class="p">;</span>
GRANT ALL ON magento_quote.<span class="k">*</span> TO magento_quote@localhost IDENTIFIED BY <span class="s1">'magento_quote'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>create database magento_sales<span class="p">;</span>
GRANT ALL ON magento_sales.<span class="k">*</span> TO magento_sales@localhost IDENTIFIED BY <span class="s1">'magento_sales'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>Enter <code class="language-plaintext highlighter-rouge">exit</code> to quit the command prompt.</p>
  </li>
  <li>
    <p>Verify the databases, one at a time:</p>

    <p>quote database:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> magento_quote <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">exit</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> magento_quote <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> magento_sales <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">exit</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>If the MySQL monitor displays, you created the database properly. If an error displays, repeat the preceding commands.</p>
  </li>
  <li>Continue with the next section.</li>
</ol>
</div>
  </div>

<h2 id="config-ee-multidb-oms">Configure the sales database</h2>

<p>This section discusses how to create and run SQL scripts that alter quote database tables and back up data from those tables.</p>

<p>Sales database table names start with:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">salesrule_</code></li>
  <li><code class="language-plaintext highlighter-rouge">sales_</code></li>
  <li><code class="language-plaintext highlighter-rouge">magento_sales_</code></li>
  <li>The <code class="language-plaintext highlighter-rouge">magento_customercustomattributes_sales_flat_order</code> table is also affected</li>
</ul>

<p class="bs-callout-info">This section contains scripts with specific database table names. If you’ve performed customizations or if you want to see a complete list of tables before you perform actions on them, see <a href="#split-db-ref">Reference scripts</a>.</p>

<p>For more information, see:</p>

<ul>
  <li><a href="#config-ee-multidb-sql-oms">Create sales database SQL scripts</a></li>
  <li><a href="#sales-backup">Back up sales data</a></li>
</ul>

<h3 id="config-ee-multidb-sql-oms">Create sales database SQL scripts</h3>

<div class="collapsible">
    <b class="collapsible-title">Click to create and run sales database SQL scripts </b>
    <div class="collapsible-content"><p>Create the following SQL scripts in a location that is accessible by the user as whom you log in to your Magento server. For example, if you log in or run commands as <code class="language-plaintext highlighter-rouge">root</code>, you can create the scripts in the <code class="language-plaintext highlighter-rouge">/root/sql-scripts</code> directory.</p>

<h4 id="remove-foreign-keys">Remove foreign keys</h4>

<p>This script removes foreign keys that refer to non-sales tables from the sales database.</p>

<p>Create the following script and give it a name like <code class="language-plaintext highlighter-rouge">1_foreign-sales.sql</code>. Replace <code class="language-plaintext highlighter-rouge">&lt;your main Magento DB name&gt;</code> with the name of your Magento database.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="rouge-code"><pre><span class="n">use</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">main</span> <span class="n">Magento</span> <span class="n">DB</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_coupon_aggregated_order</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_COUPON_AGGREGATED_ORDER_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_coupon_aggregated</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_COUPON_AGGREGATED_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_coupon_aggregated_updated</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_COUPON_AGGREGATED_UPDATED_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_coupon_usage</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_COUPON_USAGE_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_customer_group</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_CSTR_GROUP_CSTR_GROUP_ID_CSTR_GROUP_CSTR_GROUP_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_customer</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_CUSTOMER_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_label</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_LABEL_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_product_attribute</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_PRD_ATTR_ATTR_ID_EAV_ATTR_ATTR_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_product_attribute</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_PRD_ATTR_CSTR_GROUP_ID_CSTR_GROUP_CSTR_GROUP_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_product_attribute</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_PRODUCT_ATTRIBUTE_WEBSITE_ID_STORE_WEBSITE_WEBSITE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">salesrule_website</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALESRULE_WEBSITE_WEBSITE_ID_STORE_WEBSITE_WEBSITE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_daily</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_BESTSELLERS_AGGRED_DAILY_PRD_ID_CAT_PRD_ENTT_ENTT_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_monthly</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_BESTSELLERS_AGGRED_MONTHLY_PRD_ID_CAT_PRD_ENTT_ENTT_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_yearly</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_BESTSELLERS_AGGRED_YEARLY_PRD_ID_CAT_PRD_ENTT_ENTT_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_daily</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_BESTSELLERS_AGGREGATED_DAILY_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_monthly</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_BESTSELLERS_AGGREGATED_MONTHLY_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_yearly</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_BESTSELLERS_AGGREGATED_YEARLY_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_creditmemo_grid</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_CREDITMEMO_GRID_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_creditmemo</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_CREDITMEMO_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_invoiced_aggregated_order</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_INVOICED_AGGREGATED_ORDER_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_invoiced_aggregated</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_INVOICED_AGGREGATED_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_invoice_grid</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_INVOICE_GRID_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_invoice</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_INVOICE_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order_aggregated_created</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_AGGREGATED_CREATED_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order_aggregated_updated</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_AGGREGATED_UPDATED_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order_grid</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_GRID_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order_grid</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_GRID_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order_item</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_ITEM_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order_status_label</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_STATUS_LABEL_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_order</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_ORDER_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_refunded_aggregated_order</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_REFUNDED_AGGREGATED_ORDER_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_refunded_aggregated</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_REFUNDED_AGGREGATED_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_shipment_grid</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_SHIPMENT_GRID_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_shipment</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_SHIPMENT_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_shipping_aggregated_order</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_SHIPPING_AGGREGATED_ORDER_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">sales_shipping_aggregated</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">SALES_SHIPPING_AGGREGATED_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">magento_sales_creditmemo_grid_archive</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">MAGENTO_SALES_CREDITMEMO_GRID_ARCHIVE_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">magento_sales_invoice_grid_archive</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">MAGENTO_SALES_INVOICE_GRID_ARCHIVE_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">magento_sales_order_grid_archive</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">MAGENTO_SALES_ORDER_GRID_ARCHIVE_CSTR_ID_CSTR_ENTT_ENTT_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">magento_sales_order_grid_archive</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">MAGENTO_SALES_ORDER_GRID_ARCHIVE_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">magento_sales_shipment_grid_archive</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">MAGENTO_SALES_SHIPMENT_GRID_ARCHIVE_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">downloadable_link_purchased_item</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">DL_LNK_PURCHASED_ITEM_ORDER_ITEM_ID_SALES_ORDER_ITEM_ITEM_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">downloadable_link_purchased</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">DOWNLOADABLE_LINK_PURCHASED_ORDER_ID_SALES_ORDER_ENTITY_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">paypal_billing_agreement_order</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">PAYPAL_BILLING_AGREEMENT_ORDER_ORDER_ID_SALES_ORDER_ENTITY_ID</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="config-ee-multidb-sql-oms-run">Configure the sales database</h3>

<p>Run the preceding script:</p>

<ol>
  <li>
    <p>Log in to your MySQL database as the <code class="language-plaintext highlighter-rouge">root</code> or administrative user:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>At the <code class="language-plaintext highlighter-rouge">mysql&gt;</code> prompt, run the script as follows:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> &lt;path&gt;/&lt;script&gt;.sql
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>For example,</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> /root/sql-scripts/1_foreign-sales.sql
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>After the script run, enter <code class="language-plaintext highlighter-rouge">exit</code>.</p>
  </li>
</ol>
</div>
  </div>

<h3 id="sales-backup">Back up sales data</h3>

<p>This section discusses how to back up sales tables from the main Magento database so you can restore them in the separate sales database.</p>

<div class="collapsible">
    <b class="collapsible-title">Click to back up and restore sales data </b>
    <div class="collapsible-content"><p>If you’re currently at the <code class="language-plaintext highlighter-rouge">mysql&gt;</code> prompt, enter <code class="language-plaintext highlighter-rouge">exit</code> to return to the command shell.</p>

<p>Run the following <code class="language-plaintext highlighter-rouge">mysqldump</code> commands, one at a time, from the command shell. In each, substitute the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;your database root username&gt;</code> with the name of your database root user</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;your database root user password&gt;</code> with the user’s password</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;your main magento DB name&gt;</code> with the name of your Magento database</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;path&gt;</code> with a writable file system path</li>
</ul>

<h4 id="script-1">Script 1</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysqldump <span class="nt">-u</span> &lt;your database root username&gt; <span class="nt">-p</span> &lt;your main magento DB name&gt; sales_bestsellers_aggregated_daily sales_bestsellers_aggregated_monthly sales_bestsellers_aggregated_yearly sales_creditmemo sales_creditmemo_comment sales_creditmemo_grid sales_creditmemo_item sales_invoice sales_invoice_comment sales_invoice_grid sales_invoice_item sales_invoiced_aggregated sales_invoiced_aggregated_order sales_order sales_order_address sales_order_aggregated_created sales_order_aggregated_updated sales_order_grid sales_order_item sales_order_payment sales_order_status sales_order_status_history sales_order_status_label sales_order_status_state sales_order_tax sales_order_tax_item sales_payment_transaction sales_refunded_aggregated sales_refunded_aggregated_order sales_sequence_meta sales_sequence_profile sales_shipment sales_shipment_comment sales_shipment_grid sales_shipment_item sales_shipment_track sales_shipping_aggregated sales_shipping_aggregated_order <span class="o">&gt;</span> /&lt;path&gt;/sales.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="script-2">Script 2</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysqldump <span class="nt">-u</span> &lt;your database root username&gt; <span class="nt">-p</span> &lt;your main magento DB name&gt; magento_sales_creditmemo_grid_archive magento_sales_invoice_grid_archive magento_sales_order_grid_archive magento_sales_shipment_grid_archive <span class="o">&gt;</span> /&lt;path&gt;/salesarchive.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="script-3">Script 3</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysqldump <span class="nt">-u</span> &lt;your database root username&gt; <span class="nt">-p</span> &lt;your main magento DB name&gt; magento_customercustomattributes_sales_flat_order magento_customercustomattributes_sales_flat_order_address <span class="o">&gt;</span> /&lt;path&gt;/customercustomattributes.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="script-4">Script 4</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysqldump <span class="nt">-u</span> &lt;your database root username&gt; <span class="nt">-p</span> &lt;your main magento DB name&gt; sequence_creditmemo_0 sequence_creditmemo_1 sequence_invoice_0 sequence_invoice_1 sequence_order_0 sequence_order_1 sequence_rma_item_0 sequence_rma_item_1 sequence_shipment_0 sequence_shipment_1 <span class="o">&gt;</span> /&lt;path&gt;/sequence.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="sql-sales-restore">Restore sales data</h3>

<p>This script restores sales data in your quote database.</p>

<h4 id="sql-sales-restore-ndb-req">NDB requirement</h4>

<p>If you are using a <a href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html">Network Database (NDB)</a> cluster:</p>

<ol>
  <li>
    <p>Convert tables from InnoDb to NDB type in dump files:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sed</span> <span class="nt">-ei</span> <span class="s1">'s/InnoDb/NDB/'</span> &lt;file name&gt;.sql
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>Remove rows with a FULLTEXT key from dumps because NDB tables do not support FULLTEXT.</p>
  </li>
</ol>

<h4 id="restore-the-data">Restore the data</h4>

<p>Run the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> &lt;root username&gt; <span class="nt">-p</span> &lt;your sales DB name&gt; &lt; /&lt;path&gt;/sales.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> &lt;root username&gt; <span class="nt">-p</span> &lt;your sales DB name&gt; &lt; /&lt;path&gt;/sequence.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> &lt;root username&gt; <span class="nt">-p</span> &lt;your sales DB name&gt; &lt; /&lt;path&gt;/salesarchive.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> &lt;root username&gt; <span class="nt">-p</span> &lt;your sales DB name&gt; &lt; /&lt;path&gt;/customercustomattributes.sql
</pre></td></tr></tbody></table></code></pre></div></div>

<p>where</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">&lt;your sales DB name&gt;</code> with the name of your sales database.</p>

    <p>In this topic, the sample database name is <code class="language-plaintext highlighter-rouge">magento_sales</code>.</p>
  </li>
  <li><code class="language-plaintext highlighter-rouge">&lt;root username&gt;</code> with your MySQL root username</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;root user password&gt;</code> with the user’s password</li>
  <li>Verify the location of the backup files you created earlier (for example, <code class="language-plaintext highlighter-rouge">/var/sales.sql</code>)</li>
</ul>
</div>
  </div>

<h2 id="config-ee-multidb-checkout">Configure the quote database</h2>

<p>This section discusses tasks required to drop foreign keys from sales database tables and move tables to the sales database.</p>

<p class="bs-callout-info">This section contains scripts with specific database table names. If you’ve performed customizations or if you want to see a complete list of tables before you perform actions on them, see <a href="#split-db-ref">Reference scripts</a>.</p>

<p>Quote database table names start with <code class="language-plaintext highlighter-rouge">quote</code>. The <code class="language-plaintext highlighter-rouge">magento_customercustomattributes_sales_flat_quote</code> and <code class="language-plaintext highlighter-rouge">magento_customercustomattributes_sales_flat_quote_address</code> tables are also affected</p>

<h3 id="drop-foreign-keys-from-quote-tables">Drop foreign keys from quote tables</h3>

<p>This script removes foreign keys that refer to non-quote tables from quote tables. Replace <your main="" magento="" DB="" name=""> with the name of your Magento database.</your></p>

<div class="collapsible">
    <b class="collapsible-title">Click to drop foreign keys from quote tables </b>
    <div class="collapsible-content"><p>Create the following script and give it a name like <code class="language-plaintext highlighter-rouge">2_foreign-key-quote.sql</code>:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">use</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">Magento</span> <span class="n">main</span> <span class="n">DB</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">quote</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">QUOTE_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">quote_item</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">QUOTE_ITEM_PRODUCT_ID_CATALOG_PRODUCT_ENTITY_ENTITY_ID</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">quote_item</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="n">QUOTE_ITEM_STORE_ID_STORE_STORE_ID</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Run the script as follows:</p>

<ol>
  <li>
    <p>Log in to your MySQL database as the root or administrative user:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>At the <code class="language-plaintext highlighter-rouge">mysql &gt;</code> prompt, run the script as follows:
  <code class="language-plaintext highlighter-rouge">source &lt;path&gt;/&lt;script&gt;.sql</code></p>

    <p>For example,</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> /root/sql-scripts/2_foreign-key-quote.sql
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>After the script runs, enter <code class="language-plaintext highlighter-rouge">exit</code>.</p>
  </li>
</ol>
</div>
  </div>

<h3 id="back-up-quote-tables">Back up quote tables</h3>

<p>This section discusses how to back up quote tables from the main Magento database and restore them in your quote database.</p>

<div class="collapsible">
    <b class="collapsible-title">Click to back up and restore quote tables </b>
    <div class="collapsible-content"><p>Run the following command from a command prompt:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysqldump <span class="nt">-u</span> &lt;your database root username&gt; <span class="nt">-p</span> &lt;your main Magento DB name&gt; magento_customercustomattributes_sales_flat_quote magento_customercustomattributes_sales_flat_quote_address quote quote_address quote_address_item quote_item quote_item_option quote_payment quote_shipping_rate quote_id_mask <span class="o">&gt;</span> /&lt;path&gt;/quote.sql<span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ndb-requirement">NDB requirement</h3>

<p>If you are using a <a href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html">Network Database (NDB)</a> cluster:</p>

<ol>
  <li>
    <p>Convert tables from InnoDb to NDB type in dump files:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sed</span> <span class="nt">-ei</span> <span class="s1">'s/InnoDb/NDB/'</span> &lt;file name&gt;.sql
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>Remove rows with a FULLTEXT key from dumps because NDB tables do not support FULLTEXT.</p>
  </li>
</ol>

<h3 id="restore-tables-to-the-quote-database">Restore tables to the quote database</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> root <span class="nt">-p</span> magento_quote &lt; /&lt;path&gt;/quote.sql
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<h2 id="config-ee-multidb-drop">Drop sales and quote tables from the Magento database</h2>

<p>This script sales and quote tables from the Magento database. Replace <your main="" magento="" DB="" name=""> with the name of your Magento database.</your></p>

<div class="collapsible">
    <b class="collapsible-title">Click to drop sales and quote tables </b>
    <div class="collapsible-content"><p>Create the following script and give it a name like <code class="language-plaintext highlighter-rouge">3_drop-tables.sql</code>:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td><td class="rouge-code"><pre><span class="n">use</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">Magento</span> <span class="n">main</span> <span class="n">DB</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">foreign_key_checks</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_customercustomattributes_sales_flat_quote</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_customercustomattributes_sales_flat_quote_address</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote_address</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote_address_item</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote_item</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote_item_option</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote_payment</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote_shipping_rate</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">quote_id_mask</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_daily</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_monthly</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_bestsellers_aggregated_yearly</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_creditmemo</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_creditmemo_comment</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_creditmemo_grid</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_creditmemo_item</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_invoice</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_invoice_comment</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_invoice_grid</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_invoice_item</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_invoiced_aggregated</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_invoiced_aggregated_order</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_address</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_aggregated_created</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_aggregated_updated</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_grid</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_item</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_payment</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_status</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_status_history</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_status_label</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_status_state</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_tax</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_order_tax_item</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_payment_transaction</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_refunded_aggregated</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_refunded_aggregated_order</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_sequence_meta</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_sequence_profile</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_shipment</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_shipment_comment</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_shipment_grid</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_shipment_item</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_shipment_track</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_shipping_aggregated</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sales_shipping_aggregated_order</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_sales_creditmemo_grid_archive</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_sales_invoice_grid_archive</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_sales_order_grid_archive</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_sales_shipment_grid_archive</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_customercustomattributes_sales_flat_order</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">magento_customercustomattributes_sales_flat_order_address</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_creditmemo_0</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_creditmemo_1</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_invoice_0</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_invoice_1</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_order_0</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_order_1</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_rma_item_0</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_rma_item_1</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_shipment_0</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">sequence_shipment_1</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">foreign_key_checks</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Run the script as follows:</p>

<ol>
  <li>
    <p>Log in to your MySQL database as the root or administrative user:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>At the <code class="language-plaintext highlighter-rouge">mysql&gt;</code> prompt, run the script as follows:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> &lt;path&gt;/&lt;script&gt;.sql
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>For example,</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> /root/sql-scripts/3_drop-tables.sql
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>After the script runs, enter <code class="language-plaintext highlighter-rouge">exit</code>.</p>
  </li>
</ol>
</div>
  </div>

<h2 id="config-ee-multidb-config">Update your deployment configuration</h2>

<p>The final step in manually splitting databases is to add connection and resource information to Magento’s deployment configuration, <code class="language-plaintext highlighter-rouge">env.php</code>.</p>

<div class="collapsible">
    <b class="collapsible-title">Click to update the Magento deployment configuration </b>
    <div class="collapsible-content"><ol>
  <li>Log in to your Magento server as, or switch to, the <a href="/devdocs-archive/2.3/guides/v2.3/install-gde/prereq/file-sys-perms-over.html">file system owner</a>.</li>
  <li>
    <p>Back up your deployment configuration:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">cp</span> &lt;magento_root&gt;/app/etc/env.php &lt;magento_root&gt;/app/etc/env.php.orig
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>Open <code class="language-plaintext highlighter-rouge">&lt;magento_root&gt;/app/etc/env.php</code> in a text editor and update it using the guidelines discussed in the following sections.</li>
</ol>

<h3 id="update-database-connections">Update database connections</h3>

<p>Locate the block starting with <code class="language-plaintext highlighter-rouge">'default'</code> (under <code class="language-plaintext highlighter-rouge">'connection'</code>) and add <code class="language-plaintext highlighter-rouge">'checkout'</code> and <code class="language-plaintext highlighter-rouge">'sales'</code> sections. Replace sample values with values appropriate for your site.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre> <span class="s1">'default'</span> <span class="o">=&gt;</span>
      <span class="k">array</span> <span class="p">(</span>
<span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'localhost'</span><span class="p">,</span>
<span class="s1">'dbname'</span> <span class="o">=&gt;</span> <span class="s1">'magento'</span><span class="p">,</span>
<span class="s1">'username'</span> <span class="o">=&gt;</span> <span class="s1">'magento'</span><span class="p">,</span>
<span class="s1">'password'</span> <span class="o">=&gt;</span> <span class="s1">'magento'</span><span class="p">,</span>
<span class="s1">'model'</span> <span class="o">=&gt;</span> <span class="s1">'mysql4'</span><span class="p">,</span>
<span class="s1">'engine'</span> <span class="o">=&gt;</span> <span class="s1">'innodb'</span><span class="p">,</span>
<span class="s1">'initStatements'</span> <span class="o">=&gt;</span> <span class="s1">'SET NAMES utf8;'</span><span class="p">,</span>
<span class="s1">'active'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="s1">'checkout'</span> <span class="o">=&gt;</span>
      <span class="k">array</span> <span class="p">(</span>
<span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'localhost'</span><span class="p">,</span>
<span class="s1">'dbname'</span> <span class="o">=&gt;</span> <span class="s1">'magento_quote'</span><span class="p">,</span>
<span class="s1">'username'</span> <span class="o">=&gt;</span> <span class="s1">'magento_quote'</span><span class="p">,</span>
<span class="s1">'password'</span> <span class="o">=&gt;</span> <span class="s1">'magento_quote'</span><span class="p">,</span>
<span class="s1">'model'</span> <span class="o">=&gt;</span> <span class="s1">'mysql4'</span><span class="p">,</span>
<span class="s1">'engine'</span> <span class="o">=&gt;</span> <span class="s1">'innodb'</span><span class="p">,</span>
<span class="s1">'initStatements'</span> <span class="o">=&gt;</span> <span class="s1">'SET NAMES utf8;'</span><span class="p">,</span>
<span class="s1">'active'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="s1">'sales'</span> <span class="o">=&gt;</span>
      <span class="k">array</span> <span class="p">(</span>
<span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'localhost'</span><span class="p">,</span>
<span class="s1">'dbname'</span> <span class="o">=&gt;</span> <span class="s1">'magento_sales'</span><span class="p">,</span>
<span class="s1">'username'</span> <span class="o">=&gt;</span> <span class="s1">'magento_sales'</span><span class="p">,</span>
<span class="s1">'password'</span> <span class="o">=&gt;</span> <span class="s1">'magento_sales'</span><span class="p">,</span>
<span class="s1">'model'</span> <span class="o">=&gt;</span> <span class="s1">'mysql4'</span><span class="p">,</span>
<span class="s1">'engine'</span> <span class="o">=&gt;</span> <span class="s1">'innodb'</span><span class="p">,</span>
<span class="s1">'initStatements'</span> <span class="o">=&gt;</span> <span class="s1">'SET NAMES utf8;'</span><span class="p">,</span>
<span class="s1">'active'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
      <span class="p">),</span>
    <span class="p">),</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="update-resources">Update resources</h3>

<p>Locate the block starting with <code class="language-plaintext highlighter-rouge">'resource'</code> and add <code class="language-plaintext highlighter-rouge">'checkout'</code> and <code class="language-plaintext highlighter-rouge">'sales'</code> sections to it as follows:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="s1">'resource'</span> <span class="o">=&gt;</span>
  <span class="k">array</span> <span class="p">(</span>
    <span class="s1">'default_setup'</span> <span class="o">=&gt;</span>
    <span class="k">array</span> <span class="p">(</span>
      <span class="s1">'connection'</span> <span class="o">=&gt;</span> <span class="s1">'default'</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">'checkout'</span> <span class="o">=&gt;</span>
    <span class="k">array</span> <span class="p">(</span>
      <span class="s1">'connection'</span> <span class="o">=&gt;</span> <span class="s1">'checkout'</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">'sales'</span> <span class="o">=&gt;</span>
    <span class="k">array</span> <span class="p">(</span>
      <span class="s1">'connection'</span> <span class="o">=&gt;</span> <span class="s1">'sales'</span><span class="p">,</span>
    <span class="p">),</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</div>
  </div>

<h2 id="split-db-ref">Reference scripts</h2>

<p>This section provides scripts you can run that print a complete list of affected tables without performing any actions on them. You can use them to see what tables are affected before you manually split databases, which can be useful if you use extensions that customize the Magento <a href="https://glossary.magento.com/database-schema">database schema</a>.</p>

<div class="collapsible">
    <b class="collapsible-title">Click to view reference SQL scripts </b>
    <div class="collapsible-content"><p>To use these scripts:</p>

<ol>
  <li>Create a <code class="language-plaintext highlighter-rouge">.sql</code> script with the contents of each script in this section.</li>
  <li>
    <p>In each script, replace <code class="language-plaintext highlighter-rouge">&lt;your main magento DB name&gt;</code> with the name of your Magento database.</p>

    <p>In this topic, the sample database name is <code class="language-plaintext highlighter-rouge">magento</code>.</p>
  </li>
  <li>Run each script from the <code class="language-plaintext highlighter-rouge">mysql&gt;</code> prompt as <code class="language-plaintext highlighter-rouge">source &lt;script name&gt;</code></li>
  <li>Examine the output.</li>
  <li>Copy the result of each script to another <code class="language-plaintext highlighter-rouge">.sql</code> script, removing the pipe characters (<code class="language-plaintext highlighter-rouge">|</code>).</li>
  <li>
    <p>Run each script from the <code class="language-plaintext highlighter-rouge">mysql&gt;</code> prompt as <code class="language-plaintext highlighter-rouge">source &lt;script name&gt;</code>.</p>

    <p>Running this second script performs the actions in your main Magento database.</p>
  </li>
</ol>

<h3 id="remove-foreign-keys-sales-tables">Remove foreign keys (sales tables)</h3>

<p>This script is the removes foreign keys that refer to non-sales tables from the sales database.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="k">select</span> <span class="n">concat</span><span class="p">(</span>
    <span class="s1">'ALTER TABLE '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">for_name</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">' DROP FOREIGN KEY '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">';'</span>
    <span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_SYS_FOREIGN</span>
<span class="k">where</span> <span class="n">for_name</span> <span class="k">like</span>  <span class="s1">'&lt;your main magento DB name&gt;/|sales_%'</span> <span class="k">escape</span> <span class="s1">'|'</span>
    <span class="k">and</span> <span class="n">ref_name</span> <span class="k">not</span> <span class="k">like</span>  <span class="s1">'&lt;your main magento DB name&gt;/|sales_%'</span> <span class="k">escape</span> <span class="s1">'|'</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span> <span class="n">concat</span><span class="p">(</span>
    <span class="s1">'ALTER TABLE '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">for_name</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">' DROP FOREIGN KEY '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">';'</span>
    <span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_SYS_FOREIGN</span>
<span class="k">where</span> <span class="n">for_name</span> <span class="k">like</span>  <span class="s1">'&lt;your main magento DB name&gt;/|magento_sales|_%'</span> <span class="k">escape</span> <span class="s1">'|'</span>
    <span class="k">and</span> <span class="n">ref_name</span> <span class="k">not</span> <span class="k">like</span>  <span class="s1">'&lt;your main magento DB name&gt;/|sales|_%'</span> <span class="k">escape</span> <span class="s1">'|'</span>
<span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="remove-foreign-keys-quote-tables">Remove foreign keys (quote tables)</h3>

<p>This script removes foreign keys that refer to non-quote tables from quote tables.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="rouge-code"><pre><span class="k">select</span> <span class="n">concat</span><span class="p">(</span>
    <span class="s1">'ALTER TABLE '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">for_name</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">' DROP FOREIGN KEY '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">';'</span>
    <span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_SYS_FOREIGN</span>
<span class="k">where</span> <span class="n">for_name</span> <span class="k">like</span> <span class="s1">'&lt;your main magento DB name&gt;/%'</span>
    <span class="k">and</span> <span class="n">ref_name</span> <span class="k">like</span> <span class="s1">'&lt;your main magento DB name&gt;/sales</span><span class="se">\_</span><span class="s1">%'</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span> <span class="n">concat</span><span class="p">(</span>
    <span class="s1">'ALTER TABLE '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">for_name</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">' DROP FOREIGN KEY '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">';'</span>
    <span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_SYS_FOREIGN</span>
<span class="k">where</span> <span class="n">for_name</span> <span class="k">like</span> <span class="s1">'&lt;your main magento DB name&gt;/%'</span>
    <span class="k">and</span> <span class="n">ref_name</span> <span class="k">like</span> <span class="s1">'&lt;your main magento DB name&gt;/magento_sales</span><span class="se">\_</span><span class="s1">%'</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span> <span class="n">concat</span><span class="p">(</span>
    <span class="s1">'ALTER TABLE '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">for_name</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">' DROP FOREIGN KEY '</span><span class="p">,</span>
    <span class="k">replace</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="s1">'&lt;your main magento DB name&gt;/'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
    <span class="s1">';'</span>
    <span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">INNODB_SYS_FOREIGN</span>
<span class="k">where</span> <span class="n">for_name</span> <span class="k">like</span> <span class="s1">'&lt;your main magento DB name&gt;/%'</span>
    <span class="k">and</span> <span class="n">ref_name</span> <span class="k">like</span> <span class="s1">'&lt;your main magento DB name&gt;/magento_customercustomattributes</span><span class="se">\_</span><span class="s1">%'</span>
<span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="drop-sales-tables">Drop sales tables</h3>

<p>This script drops sales tables from the Magento database.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="n">use</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">main</span> <span class="n">magento</span> <span class="n">DB</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">select</span> <span class="s1">' SET foreign_key_checks = 0;'</span> <span class="k">as</span> <span class="n">querytext</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span>
    <span class="n">concat</span><span class="p">(</span><span class="s1">'DROP TABLE IF EXISTS '</span> <span class="p">,</span> <span class="k">table_name</span><span class="p">,</span> <span class="s1">';'</span><span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">tables</span>
<span class="k">where</span> <span class="n">table_schema</span> <span class="o">=</span> <span class="s1">'&lt;your main magento DB name&gt;'</span>
<span class="k">and</span> <span class="k">table_name</span> <span class="k">like</span> <span class="s1">'sales/_%'</span> <span class="k">escape</span> <span class="s1">'/'</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span>
    <span class="n">concat</span><span class="p">(</span><span class="s1">'DROP TABLE IF EXISTS '</span> <span class="p">,</span> <span class="k">table_name</span><span class="p">,</span> <span class="s1">';'</span><span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">tables</span>
<span class="k">where</span> <span class="n">table_schema</span> <span class="o">=</span> <span class="s1">'&lt;your main magento DB name&gt;'</span>
<span class="k">and</span> <span class="k">table_name</span> <span class="k">like</span> <span class="s1">'magento_sales/_%'</span> <span class="k">escape</span> <span class="s1">'/'</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span>
    <span class="n">concat</span><span class="p">(</span><span class="s1">'DROP TABLE IF EXISTS '</span> <span class="p">,</span> <span class="k">table_name</span><span class="p">,</span> <span class="s1">';'</span><span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">tables</span>
<span class="k">where</span> <span class="n">table_schema</span> <span class="o">=</span> <span class="s1">'&lt;your main magento DB name&gt;'</span>
<span class="k">and</span> <span class="k">table_name</span> <span class="k">like</span> <span class="s1">'magento_customercustomattributes_sales_flat_order%'</span> <span class="k">escape</span> <span class="s1">'/'</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span>
    <span class="n">concat</span><span class="p">(</span><span class="s1">'DROP TABLE IF EXISTS '</span> <span class="p">,</span> <span class="k">table_name</span><span class="p">,</span> <span class="s1">';'</span><span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">tables</span>
<span class="k">where</span> <span class="n">table_schema</span> <span class="o">=</span> <span class="s1">'&lt;your main magento DB name&gt;'</span>
<span class="k">and</span> <span class="k">table_name</span> <span class="k">like</span> <span class="s1">'sequence/_%'</span> <span class="k">escape</span> <span class="s1">'/'</span>
<span class="k">union</span> <span class="k">all</span>
<span class="k">select</span> <span class="s1">'SET foreign_key_checks = 1;'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="drop-quote-tables">Drop quote tables</h3>

<p>Drop all tables that start with <code class="language-plaintext highlighter-rouge">quote_</code>.</p>
</div>
  </div>

<p class="ref-header">Related topics</p>

<p><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/multi-master/multi-master_verify.html">Verify split databases</a></p>

			</main>
			<footer class="content-footer">
				<button class="page-updated spectrum-ActionButton spectrum-ActionButton--sizeM spectrum-ActionButton--quiet">
  <img class="spectrum-Icon spectrum-Icon--sizeS" src="/devdocs-archive/2.3/assets/i/icons/time.svg" alt="Updated" />
  <time class="spectrum-ActionButton-label" id="last-modified-at" itemprop="dateModified"
    datetime="2022-08-01">
    Aug 1st, 2022
  </time>
</button>

			</footer>
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->

</div>
<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
    <div class="container">
  
      <div class="copyright-links">
        

<ul class="nav footer-links" role="menu">

  <li class="  " role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md" class=" ">Become a Contributor</a></li>

  <li class="  " role="menuitem"><a href="https://glossary.magento.com/" class=" ">Glossary</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/privacy/" class=" ">Privacy Policy</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/" class=" ">Terms of Service</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/licensing/" class=" ">License/Trademark FAQ</a></li>

  <li class="  " role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/release-notes/bk-release-notes.html" class=" ">Release Notes</a></li>

  <li class="  " role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/release-notes/packages-open-source.html" class=" ">Third-Party Licenses</a></li>

</ul>

      </div>
  
          <div class="copyright-date">&copy; 2023 Adobe. All rights reserved.</div>
  
    </div>
  </div>
  <!-- / #footer -->
  
  


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs-archive/2.3/assets/js/app.min.js?ver=20"></script>
<script src="/devdocs-archive/2.3/assets/js/editions.min.js?ver=20"></script>
<script src="/devdocs-archive/2.3/assets/js/page-updated.min.js?ver=20"></script>





<script type="text/javascript" src="/devdocs-archive/2.3/common/js/glossary-link-enhancer.js"></script>


</body>

</html>
