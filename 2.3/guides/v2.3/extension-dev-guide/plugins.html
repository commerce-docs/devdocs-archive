<!DOCTYPE html>
<html lang="en" dir="ltr" class="spectrum spectrum--medium spectrum--lightest">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Plugins (Interceptors) | Archived 2.3 Magento Developer Guide</title>
	<meta name="description" content="Magento Developer Guide">

	<link rel="stylesheet" href="https://use.typekit.net/iaw1apr.css">
	<link rel="stylesheet" href="/devdocs/2.3/assets/css/app.css?ver=20" />
	<link rel="stylesheet" href="/devdocs/2.3/assets/css/print.css?ver=20" media="print" />
	<script src="https://assets.adobedtm.com/a7d65461e54e/f87b70cb627a/launch-b042bff6c581.min.js" async></script>

	<link rel="stylesheet" href="/devdocs/2.3/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />
<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs/2.3";
  var algolia = {
    id: "E642SEDTHL",
    index: "devdocs",
    key: "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [{
      label: "Results",
      name: "devdocs",
      facetFilters: [
        ["guide_version: 2.3",
          "versionless: true"
        ]
      ],
      refinements: [{
        label: "Functional areas",
        attribute: "functional_areas"
      }],
      baseUrl: "/devdocs/2.3"
    }
  ];

</script>




	<link rel="icon" href="https://www.adobe.com/favicon.ico" type="image/x-icon" />
	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://adobe.com/favicon.ico">

</head>

<body class="layout-default">

	<header class="site-header">

		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs/2.3/">
      <img class="logo-image" src="/devdocs/2.3/assets/i/adobe-a.svg" alt="Adobe">
      <span class="logo-text">Adobe</span>
      <span class="site-logo">Commerce DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      <!-- Main Navigation --><ul class="nav-main spectrum-Tabs spectrum-Tabs--sizeM spectrum-Tabs--horizontal" role="menubar"><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Cloud</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud basics</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/overview.html" class="spectrum-Menu-itemLabel ">Cloud Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/architecture/cloud-architecture.html" class="spectrum-Menu-itemLabel ">Cloud Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/project/file-structure.html" class="spectrum-Menu-itemLabel ">Project Structure</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/best-practices.html" class="spectrum-Menu-itemLabel ">Upgrades and Patches</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/release-notes/cloud-tools-suite.html" class="spectrum-Menu-itemLabel ">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud development</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/" class="spectrum-Menu-itemLabel ">Local development</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/configure/" class="spectrum-Menu-itemLabel ">Configure and launch Docker</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/quick-reference/" class="spectrum-Menu-itemLabel ">Docker quick reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/app/configure-app-yaml.html" class="spectrum-Menu-itemLabel ">Configure Application</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/env/configure-env-yaml.html" class="spectrum-Menu-itemLabel ">Configure Environments</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Functional Testing</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/application-testing/" class="spectrum-Menu-itemLabel ">Application testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/code-testing/" class="spectrum-Menu-itemLabel ">Cloud code testing</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Setup</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/install-gde/install-flow-diagram.html" class="spectrum-Menu-itemLabel ">Installation Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-admin/start/resources/extensions.html" class="spectrum-Menu-itemLabel ">Extensions Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/comp-mgr/bk-compman-upgrade-guide.html" class="spectrum-Menu-itemLabel ">Software Update Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/config-guide/bk-config-guide.html" class="spectrum-Menu-itemLabel ">Configuration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/performance-best-practices/introduction.html" class="spectrum-Menu-itemLabel ">Performance Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/migration/bk-migration-guide.html" class="spectrum-Menu-itemLabel ">Migration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/release/notes/overview.html" class="spectrum-Menu-itemLabel ">Release Information</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/reference/cli/magento.html" class="spectrum-Menu-itemLabel ">Command-line Tools Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/tools/overview.html" class="spectrum-Menu-itemLabel ">Tools</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Development</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Backend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/architecture/bk-architecture.html" class="spectrum-Menu-itemLabel ">Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html" class="spectrum-Menu-itemLabel ">PHP Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/ext-best-practices/bk-ext-best-practices.html" class="spectrum-Menu-itemLabel ">Extension Developer Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/mrg/intro.html" class="spectrum-Menu-itemLabel ">Module Reference Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/coding-standards/bk-coding-standards.html" class="spectrum-Menu-itemLabel ">Coding Standards</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/guides/" class="spectrum-Menu-itemLabel ">Contributor Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/" class="spectrum-Menu-itemLabel ">Contribution Resources</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Frontend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html" class="spectrum-Menu-itemLabel ">Frontend Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/ui_comp_guide/bk-ui_comps.html" class="spectrum-Menu-itemLabel ">UI Components Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html" class="spectrum-Menu-itemLabel ">JavaScript Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/pattern-library/bk-pattern.html" class="spectrum-Menu-itemLabel ">Admin Design Pattern Library</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/design-styleguide/bk-styleguide.html" class="spectrum-Menu-itemLabel ">Admin Style Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/pwa-studio/" class="spectrum-Menu-itemLabel ">PWA Documentation Site</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder Developer Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">API</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/get-started/bk-get-started-api.html" class="spectrum-Menu-itemLabel ">Get Started with our Web APIs</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/rest/bk-rest.html" class="spectrum-Menu-itemLabel ">REST API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/soap/bk-soap.html" class="spectrum-Menu-itemLabel ">SOAP API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/graphql/" class="spectrum-Menu-itemLabel ">GraphQL Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/eqp/v1/" class="spectrum-Menu-itemLabel ">Marketplace EQP API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/mbi/docs/getting-started.html" class="spectrum-Menu-itemLabel ">Commerce Reporting API</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Testing</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/test/testing.html" class="spectrum-Menu-itemLabel ">Application Testing Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://devdocs.magento.com/mftf/v2/docs/introduction.html" class="spectrum-Menu-itemLabel ">Functional Acceptance Testing (MFTF)</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/test/integration/integration_test_execution.html" class="spectrum-Menu-itemLabel ">Integration Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/test/js/jasmine.html" class="spectrum-Menu-itemLabel ">JavaScript Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/test/unit/unit_test_execution.html" class="spectrum-Menu-itemLabel ">PHP Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/get-started/web-api-functional-testing.html" class="spectrum-Menu-itemLabel ">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Functional Areas</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/advanced-reporting/overview.html" class="spectrum-Menu-itemLabel ">Advanced Reporting</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/b2b/bk-b2b.html" class="spectrum-Menu-itemLabel ">B2B</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/catalog-service/overview.html" class="spectrum-Menu-itemLabel ">Catalog Service</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/inventory/index.html" class="spectrum-Menu-itemLabel ">Inventory Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/guide-overview.html" class="spectrum-Menu-itemLabel ">Live Search</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/sellers/" class="spectrum-Menu-itemLabel ">Commerce Marketplace</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html" class="spectrum-Menu-itemLabel ">Payment Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://omsdocs.magento.com/en/" class="spectrum-Menu-itemLabel ">Order Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/product-recommendations/developer/development-overview.html" class="spectrum-Menu-itemLabel ">Product Recommendations Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/security-and-compliance/overview.html" class="spectrum-Menu-itemLabel ">Security and Compliance</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/services/shared-services/" class="spectrum-Menu-itemLabel ">Shared Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/staging.html" class="spectrum-Menu-itemLabel ">Staging</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Tutorials</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/rest/tutorials/index.html" class="spectrum-Menu-itemLabel ">Rest Tutorials</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/howdoi/custom-attributes/introduction.html" class="spectrum-Menu-itemLabel ">Custom Attributes</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/howdoi/customize_product.html" class="spectrum-Menu-itemLabel ">Customize Product Creation Form</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Customize Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/support/" class="spectrum-Menu-itemLabel ">Support</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-learn/tutorials/overview.html" class="spectrum-Menu-itemLabel ">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      <div class="version-switcher">
	<button class="spectrum-Picker spectrum-Picker--sizeM dropdown-toggle" disabled>
		<span class="spectrum-Picker-label">Version 2.3</span>
	</button>
</div>

      
        <div class="search-btn">
  <button class="search-trigger" aria-label="Search">
    <svg class="spectrum-Icon" focusable="false" aria-hidden="true" aria-label="Search">
      <rect opacity="0" width="18" height="18" /><path class="a" d="M16.5865,15.107,12.7,11.2215A6.413,6.413,0,1,0,11.2215,12.7l3.886,3.886a1.05,1.05,0,0,0,1.479-1.479ZM3,7.5A4.5,4.5,0,1,1,7.5,12,4.5,4.5,0,0,1,3,7.5Z" />
    </svg>
  </button>
</div>

<div class="quick-search">
  <form class="spectrum-Search spectrum-Textfield search-form"
      action="/devdocs/2.3/guides/v2.3/search.html">
  <input type="search" placeholder="Looking for something specific?" name="query" value=""
    class="spectrum-Textfield-input spectrum-Search-input search-field form-control" autocomplete="off">
    <svg class="spectrum-Icon spectrum-Icon--sizeM spectrum-Textfield-icon spectrum-Search-icon" focusable="false" aria-hidden="true">
    <rect fill="#ff13dc" opacity="0" width="18" height="18" />
    <path class="a"
      d="M16.5865,15.107,12.7,11.2215A6.413,6.413,0,1,0,11.2215,12.7l3.886,3.886a1.05,1.05,0,0,0,1.479-1.479ZM3,7.5A4.5,4.5,0,1,1,7.5,12,4.5,4.5,0,0,1,3,7.5Z" />
  </svg>
  <button type="reset" class="spectrum-ClearButton spectrum-ClearButton--sizeM spectrum-Search-clearButton">
    <div class="spectrum-ClearButton-fill">
      <svg class="spectrum-Icon spectrum-ClearButton-icon spectrum-UIIcon-Cross100" focusable="false" aria-hidden="true">
        <path class="a"
          d="M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z" />
      </svg>
    </div>
  </button>
</form>

</div>
      

    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		

		<div class="main-container">
			<a id="main-content"></a>

<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">PHP Developer Guide</h4>
		
		<div class="collapsible-navigation">
		  <ul class="spectrum-SideNav spectrum-SideNav--multiLevel"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html" class="spectrum-SideNav-itemLink ">Introduction</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/intro/developers_roadmap.html" class="spectrum-SideNav-itemLink ">Developer roadmap</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/intro/intro-composer.html" class="spectrum-SideNav-itemLink ">Introduction to Composer</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/intro/intro-composer-gloss.html" class="spectrum-SideNav-itemLink ">Glossary of common terms</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/prepare/prepare.html" class="spectrum-SideNav-itemLink ">Prepare (development quick start)</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/prepare/dev-modtypes.html" class="spectrum-SideNav-itemLink ">Component types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/prepare/prepare_file-str.html" class="spectrum-SideNav-itemLink ">About component file structure</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/prepare/ext-repo-structure.html" class="spectrum-SideNav-itemLink ">Extension repository structure</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/prepare/dev-summary.html" class="spectrum-SideNav-itemLink ">Roadmap for developing and packaging components</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/prepare/lifecycle.html" class="spectrum-SideNav-itemLink ">Extension lifecycle</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/build.html" class="spectrum-SideNav-itemLink ">Build</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/di-xml-file.html" class="spectrum-SideNav-itemLink ">The di.xml file</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/optimal-dev-environment.html" class="spectrum-SideNav-itemLink ">Optimal development environment</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/composer-integration.html" class="spectrum-SideNav-itemLink ">The composer.json file</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/required-configuration-files.html" class="spectrum-SideNav-itemLink ">Define your configuration files</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/module-file-structure.html" class="spectrum-SideNav-itemLink ">Create your component file structure</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/component-registration.html" class="spectrum-SideNav-itemLink ">Register your component</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/XSD-XML-validation.html" class="spectrum-SideNav-itemLink ">URN schema validation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/create_component.html" class="spectrum-SideNav-itemLink ">Name your component</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/module-load-order.html" class="spectrum-SideNav-itemLink ">Component load order</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/enable-module.html" class="spectrum-SideNav-itemLink ">Enable or disable your component</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/package/package.html" class="spectrum-SideNav-itemLink ">Package</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/package/package_module.html" class="spectrum-SideNav-itemLink ">Package a component</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/package/package_mktpl.html" class="spectrum-SideNav-itemLink ">Upload your component to the Commerce Marketplace</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/validate/validate.html" class="spectrum-SideNav-itemLink ">Validate</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/validate/test-module.html" class="spectrum-SideNav-itemLink ">Test your component</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cache/partial-caching.html" class="spectrum-SideNav-itemLink ">Partial caching</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cache/partial-caching/database-caching.html" class="spectrum-SideNav-itemLink ">Create custom cache engines</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cache/partial-caching/create-cache-type.html" class="spectrum-SideNav-itemLink ">Create a cache type</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cache/page-caching.html" class="spectrum-SideNav-itemLink ">Full page caching</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cache/page-caching/public-content.html" class="spectrum-SideNav-itemLink ">Public content</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cache/page-caching/private-content.html" class="spectrum-SideNav-itemLink ">Private content</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cli-cmds/cli-add.html" class="spectrum-SideNav-itemLink ">Add CLI commands</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cli-cmds/cli-naming-guidelines.html" class="spectrum-SideNav-itemLink ">Command naming guidelines</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/cli-cmds/cli-howto.html" class="spectrum-SideNav-itemLink ">How to add CLI commands</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/staging.html" class="spectrum-SideNav-itemLink ">Staging (Adobe Commerce only)</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/module-development.html" class="spectrum-SideNav-itemLink ">Component development</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/async-operations.html" class="spectrum-SideNav-itemLink ">Asynchronous/deferred operations</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/service-contracts/service-contracts.html" class="spectrum-SideNav-itemLink ">Service contracts</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/api-concepts.html" class="spectrum-SideNav-itemLink ">Public interfaces &amp; APIs</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/service-contracts/design-patterns.html" class="spectrum-SideNav-itemLink ">Service contract design patterns</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/depend-inj.html" class="spectrum-SideNav-itemLink ">Dependency injection</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/object-manager.html" class="spectrum-SideNav-itemLink ">ObjectManager</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/events-and-observers.html" class="spectrum-SideNav-itemLink ">Events and observers</a><ul class=""></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/factories.html" class="spectrum-SideNav-itemLink ">Factories</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/proxies.html" class="spectrum-SideNav-itemLink ">Proxies</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/code-generation.html" class="spectrum-SideNav-itemLink ">Code generation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/attributes.html" class="spectrum-SideNav-itemLink ">EAV and extension attributes</a></li><li class="is-selected  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/plugins.html" class="spectrum-SideNav-itemLink ">Plugins (Interceptors)</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/routing.html" class="spectrum-SideNav-itemLink ">Routing</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Indexing</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/indexing.html" class="spectrum-SideNav-itemLink ">Indexing overview</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/indexer-optimization.html" class="spectrum-SideNav-itemLink ">Indexer optimization</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/indexing-custom.html" class="spectrum-SideNav-itemLink ">Adding a custom indexer</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Declarative schema</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/declarative-schema/" class="spectrum-SideNav-itemLink ">Declarative schema overview</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/declarative-schema/migration-commands.html" class="spectrum-SideNav-itemLink ">Migrate install/upgrade scripts to declarative schema</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/declarative-schema/db-schema.html" class="spectrum-SideNav-itemLink ">Configure declarative schema</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/declarative-schema/data-patches.html" class="spectrum-SideNav-itemLink ">Develop data and schema patches</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Web APIs</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/service-contracts/service-to-web-service.html" class="spectrum-SideNav-itemLink ">Configure services as web APIs</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/webapi/custom-routes.html" class="spectrum-SideNav-itemLink ">Set custom routes</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/webapi/request-processor-pool.html" class="spectrum-SideNav-itemLink ">WebApi request processors pool</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Message Queues</span><ul class=""><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/async-message-queue-config-files.html" class="spectrum-SideNav-itemLink ">Asynchronous Message Queue configuration files</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/bulk-operations.html" class="spectrum-SideNav-itemLink ">Bulk operations</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/config-mq.html" class="spectrum-SideNav-itemLink ">Configure message Queues</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/implement-bulk.html" class="spectrum-SideNav-itemLink ">Example bulk operations implementation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/refresh-config.html" class="spectrum-SideNav-itemLink ">Handling outdated in-memory object states</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/message-queues.html" class="spectrum-SideNav-itemLink ">Message queues overview</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/message-queues-stores.html" class="spectrum-SideNav-itemLink ">Message queues and stores</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/message-queues/queue-migration.html" class="spectrum-SideNav-itemLink ">Migrate message queue configuration</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/extension_attributes/adding-attributes.html" class="spectrum-SideNav-itemLink ">Adding extension attributes to entity</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/admin-grid.html" class="spectrum-SideNav-itemLink ">Adding an admin grid</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/price-adjustments.html" class="spectrum-SideNav-itemLink ">Price adjustments</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/searching-with-repositories.html" class="spectrum-SideNav-itemLink ">Searching with repositories</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/howdoi/php/php_clear-dirs.html" class="spectrum-SideNav-itemLink ">Clear directories during development</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/adapters.html" class="spectrum-SideNav-itemLink ">Adapters</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/view-models.html" class="spectrum-SideNav-itemLink ">View models</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/variable-pool/" class="spectrum-SideNav-itemLink ">Variable Pool</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/extend-catalog-rule-conditions.html" class="spectrum-SideNav-itemLink ">Extend Catalog Rule Conditions</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Configuration</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/configuration/importers.html" class="spectrum-SideNav-itemLink ">Configuration Importers</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/configuration/sensitive-and-environment-settings.html" class="spectrum-SideNav-itemLink ">Sensitive Environment Settings</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Framework</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/framework/array-manager.html" class="spectrum-SideNav-itemLink ">Array Manager</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/framework/datetime.html" class="spectrum-SideNav-itemLink ">DateTime Library</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/framework/float-comparator.html" class="spectrum-SideNav-itemLink ">Float Comparator</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/framework/serializer.html" class="spectrum-SideNav-itemLink ">Serialize Library</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/framework/math-random.html" class="spectrum-SideNav-itemLink ">Math Random</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/framework/url-library.html" class="spectrum-SideNav-itemLink ">URL Library</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Security</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/content-security-policies.html" class="spectrum-SideNav-itemLink ">Content Security Policies</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/non-secure-functions.html" class="spectrum-SideNav-itemLink ">Non-secure functions</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/xss-protection.html" class="spectrum-SideNav-itemLink ">XSS Prevention</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/sensitive-information.html" class="spectrum-SideNav-itemLink ">Sensitive Information</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/dos.html" class="spectrum-SideNav-itemLink ">Denial of Service (DoS) attacks</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/mass-assignment.html" class="spectrum-SideNav-itemLink ">Mass assignment</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/ssrf.html" class="spectrum-SideNav-itemLink ">Avoiding SSRF</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/authorization.html" class="spectrum-SideNav-itemLink ">Authorization</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/anti-brute-force.html" class="spectrum-SideNav-itemLink ">Brute force attacks</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/csrf.html" class="spectrum-SideNav-itemLink ">CSRF</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/security/uploads.html" class="spectrum-SideNav-itemLink ">Working with files</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/versioning/" class="spectrum-SideNav-itemLink ">Versioning</a><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/versioning/check-version.html" class="spectrum-SideNav-itemLink ">Check the Commerce version</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/versioning/codebase-changes.html" class="spectrum-SideNav-itemLink ">Codebase changes</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/versioning/dependencies.html" class="spectrum-SideNav-itemLink ">Module version dependencies</a></li></ul></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<header class="content-header">
				<!-- page-header -->
<section class="page-intro">

  

  
  <div class="message-banner">
    <center>Adobe Commerce 2.3 reached end of support in September 2022.</center>
  </div>
  

  




<!--   

<div class="spectrum-Tags" role="list" aria-label="Tags">
  <div class="spectrum-Tags-item" role="listitem" tabindex="0">
    <img class="spectrum-Avatar" src="img/example-ava.jpg" alt="Avatar">
    <span class="spectrum-Tags-itemLabel">Shantanu</span>
  </div>
</div> -->


  <h1 class="page-title">Plugins (Interceptors)</h1>

  

  
	<div class="github-links spectrum-ActionGroup--compact ActionGroup--justified"></div>
	

</section>

			</header>
			<main>
				<p>A plugin, or interceptor, is a class that modifies the behavior of public class functions by intercepting a function call and running code before, after, or around that function call. This allows you to <em>substitute</em> or <em>extend</em> the behavior of original, public methods for any <em>class</em> or <em>interface</em>.</p>

<p>Extensions that wish to intercept and change the behavior of a <em>public method</em> can create a <code class="language-plaintext highlighter-rouge">Plugin</code> class.</p>

<p>This <a href="https://glossary.magento.com/interception">interception</a> approach reduces conflicts among extensions that change the behavior of the same class or method. Your <code class="language-plaintext highlighter-rouge">Plugin</code> class implementation changes the behavior of a class function, but it does not change the class itself. Magento calls these interceptors sequentially according to a configured sort order, so they do not conflict with one another.</p>

<h2 id="limitations">Limitations</h2>

<p>Plugins can not be used on following:</p>

<ul>
  <li>Final methods</li>
  <li>Final classes</li>
  <li>Non-public methods</li>
  <li>Class methods (such as static methods)</li>
  <li><code class="language-plaintext highlighter-rouge">__construct</code> and <code class="language-plaintext highlighter-rouge">__destruct</code></li>
  <li>Virtual types</li>
  <li>Objects that are instantiated before <code class="language-plaintext highlighter-rouge">Magento\Framework\Interception</code> is bootstrapped</li>
  <li>Objects that implement <code class="language-plaintext highlighter-rouge">Magento\Framework\ObjectManager\NoninterceptableInterface</code></li>
</ul>

<h2 id="declaring-a-plugin">Declaring a plugin</h2>

<p>The <code class="language-plaintext highlighter-rouge">di.xml</code> file in your <a href="https://glossary.magento.com/module">module</a> declares a plugin for a class object:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"{ObservedType}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"{pluginName}"</span> <span class="na">type=</span><span class="s">"{PluginClassName}"</span> <span class="na">sortOrder=</span><span class="s">"1"</span> <span class="na">disabled=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You must specify these elements:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">type name</code>. A class or interface which the plugin observes.</li>
  <li><code class="language-plaintext highlighter-rouge">plugin name</code>. An arbitrary plugin name that identifies a plugin. Also used to merge the configurations for the plugin.</li>
  <li><code class="language-plaintext highlighter-rouge">plugin type</code>. The name of a plugin’s class or its virtual type. Use the following naming convention when you specify this element: <code class="language-plaintext highlighter-rouge">\Vendor\Module\Plugin\&lt;ClassName&gt;</code>.</li>
</ul>

<p>The following elements are optional:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">plugin sortOrder</code>. Plugins that call the same method run them using this order.</li>
  <li><code class="language-plaintext highlighter-rouge">plugin disabled</code>. To disable a plugin, set this element to <code class="language-plaintext highlighter-rouge">true</code>. The default value is <code class="language-plaintext highlighter-rouge">false</code>.</li>
</ul>

<h3 id="defining-a-plugin">Defining a plugin</h3>

<p>By applying code before, after, or around a public method, a plugin extends or modifies that method’s behavior.</p>

<p>The first argument for the before, after, and around methods is an object that provides access to all public methods of the observed method’s class.</p>

<h3 id="plugin-method-naming-convention">Plugin method naming convention</h3>

<p>It is a Magento best practice to capitalize the first letter of the class method name for which you want to create a plugin before adding <code class="language-plaintext highlighter-rouge">before</code>, <code class="language-plaintext highlighter-rouge">around</code> or <code class="language-plaintext highlighter-rouge">after</code> prefixes to it.</p>

<p>For example, to create a plugin for the <code class="language-plaintext highlighter-rouge">setName</code> method of some class:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="mf">...</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">setName</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="mf">...</span>
    <span class="p">}</span>
<span class="mf">...</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>In the plugin class, the <code class="language-plaintext highlighter-rouge">setName</code> method may have one of the following names:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">beforeSetName</code></li>
  <li><code class="language-plaintext highlighter-rouge">aroundSetName</code></li>
  <li><code class="language-plaintext highlighter-rouge">afterSetName</code></li>
</ul>

<p>If the first letter in the name of the class method name for which you want to create a plugin is the <code class="language-plaintext highlighter-rouge">underscore</code> character, then you do not need to capitalize it in the plugin class.</p>

<p>For example, to create a plugin for the <code class="language-plaintext highlighter-rouge">_construct</code> method of some class:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="mf">...</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">_construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="mf">...</span>
    <span class="p">}</span>
<span class="mf">...</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Use the following method names for the <code class="language-plaintext highlighter-rouge">_construct</code> method in the plugin class:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">before_construct</code></li>
  <li><code class="language-plaintext highlighter-rouge">around_construct</code></li>
  <li><code class="language-plaintext highlighter-rouge">after_construct</code></li>
</ul>

<h2 id="before-methods">Before methods</h2>

<p>Magento runs all before methods ahead of the call to an observed method. These methods must have the same name as the observed method with ‘before’ as the prefix.</p>

<p>You can use before methods to change the arguments of an observed method by returning a modified argument. If there are any arguments, the method should return an array of those arguments. If the method does not change the argument for the observed method, it should return a <code class="language-plaintext highlighter-rouge">null</code> value.</p>

<p>Below is an example of a before method modifying the <code class="language-plaintext highlighter-rouge">$name</code> argument before passing it on to the observed <code class="language-plaintext highlighter-rouge">setName</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">My\Module\Plugin</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Catalog\Model\Product</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProductAttributesUpdater</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">beforeSetName</span><span class="p">(</span><span class="kt">Product</span> <span class="nv">$subject</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">'('</span> <span class="mf">.</span> <span class="nv">$name</span> <span class="mf">.</span> <span class="s1">')'</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="after-methods">After methods</h2>

<p>Magento runs all after methods following the completion of the observed method. Magento requires these methods have a return value and they must have the same name as the observed method with ‘after’ as the prefix.</p>

<p>You can use these methods to change the result of an observed method by modifying the original result and returning it at the end of the method.</p>

<p>Below is an example of an after method modifying the return value <code class="language-plaintext highlighter-rouge">$result</code> of an observed methods call.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">My\Module\Plugin</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Catalog\Model\Product</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProductAttributesUpdater</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">afterGetName</span><span class="p">(</span><span class="kt">Product</span> <span class="nv">$subject</span><span class="p">,</span> <span class="nv">$result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'|'</span> <span class="mf">.</span> <span class="nv">$result</span> <span class="mf">.</span> <span class="s1">'|'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The after methods have access to all the arguments of their observed methods. When the observed method completes, Magento passes the result and arguments to the next after method that follows. If the observed method does not return a result (<code class="language-plaintext highlighter-rouge">@return void</code>), then it passes a <code class="language-plaintext highlighter-rouge">null</code> value to the next after method.</p>

<p>Below is an example of an after method that accepts the <code class="language-plaintext highlighter-rouge">null</code> result and arguments from the observed <code class="language-plaintext highlighter-rouge">login</code> method for <a href="https://github.com/magento/magento2/blob/2.3/app/code/Magento/Backend/Model/Auth.php"><code class="language-plaintext highlighter-rouge">Magento\Backend\Model\Auth</code></a>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">My\Module\Plugin</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Backend\Model\Auth</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Log\LoggerInterface</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">AuthLogger</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$logger</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">LoggerInterface</span> <span class="nv">$logger</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span> <span class="o">=</span> <span class="nv">$logger</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cd">/**
     * @param Auth $authModel
     * @param null $result
     * @param string $username
     * @return void
     * @SuppressWarnings(PHPMD.UnusedFormalParameter)
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">afterLogin</span><span class="p">(</span><span class="kt">Auth</span> <span class="nv">$authModel</span><span class="p">,</span> <span class="nv">$result</span><span class="p">,</span> <span class="nv">$username</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span><span class="o">-&gt;</span><span class="nf">debug</span><span class="p">(</span><span class="s1">'User '</span> <span class="mf">.</span> <span class="nv">$username</span> <span class="mf">.</span> <span class="s1">' signed in.'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>After methods do not need to declare all the arguments of their observed methods except those that the method uses and any arguments from the observed method that come before those used arguments.</p>

<p>The following example is a class with an after method for <a href="https://github.com/magento/magento2/blob/2.3/app/code/Magento/Catalog/Model/Product/Action.php"><code class="language-plaintext highlighter-rouge">\Magento\Catalog\Model\Product\Action::updateWebsites($productIds, $websiteIds, $type)</code></a>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">use</span> <span class="nc">Psr\Log\LoggerInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Catalog\Model\Product\Action</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">WebsitesLogger</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$logger</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">LoggerInterface</span> <span class="nv">$logger</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span> <span class="o">=</span> <span class="nv">$logger</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">afterUpdateWebsites</span><span class="p">(</span><span class="kt">Action</span> <span class="nv">$subject</span><span class="p">,</span> <span class="nv">$result</span><span class="p">,</span> <span class="nv">$productIds</span><span class="p">,</span> <span class="nv">$websiteIds</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span><span class="o">-&gt;</span><span class="nb">log</span><span class="p">(</span><span class="s1">'Updated websites: '</span> <span class="mf">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">', '</span><span class="p">,</span>  <span class="nv">$websiteIds</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>In the example, the <code class="language-plaintext highlighter-rouge">afterUpdateWebsites</code> function uses the variable <code class="language-plaintext highlighter-rouge">$websiteIds</code>, so it declares that variable as an argument. It also declares <code class="language-plaintext highlighter-rouge">$productIds</code> because it comes before <code class="language-plaintext highlighter-rouge">$websiteIds</code> in the parameter signature of the observed method. The after method did not list <code class="language-plaintext highlighter-rouge">$type</code> because it did not use it inside the method nor does it come before <code class="language-plaintext highlighter-rouge">$websiteIds</code>.</p>

<p class="bs-callout-warning">If an argument is optional in the observed method, then the after method should also declare it as optional.</p>

<h2 id="around-methods">Around methods</h2>

<p>Magento runs the code in around methods before and after their observed methods. Using these methods allow you to override an observed method. around methods must have the same name as the observed method with ‘around’ as the prefix.</p>

<p class="bs-callout-warning">Avoid using around method plugins when they are not required because they increase stack traces and affect performance.
The only use case for around method plugins is when the execution of all further plugins and original methods need termination.
Use after method plugins if you require arguments for replacing or altering function results.</p>

<p>Before the list of the original method’s arguments, around methods receive a <code class="language-plaintext highlighter-rouge">callable</code> that will allow a call to the next method in the chain. When your code executes the <code class="language-plaintext highlighter-rouge">callable</code>, Magento calls the next plugin or the observed function.</p>

<p class="bs-callout-warning">If the around method does not call the <code class="language-plaintext highlighter-rouge">callable</code>, it will prevent the execution of all the plugins next in the chain and the original method call.</p>

<p>Below is an example of an around method adding behavior before and after an observed method:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">My\Module\Plugin</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Catalog\Model\Product</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProductAttributesUpdater</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">aroundSave</span><span class="p">(</span><span class="kt">Product</span> <span class="nv">$subject</span><span class="p">,</span> <span class="kt">callable</span> <span class="nv">$proceed</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$someValue</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">doSmthBeforeProductIsSaved</span><span class="p">();</span>
        <span class="nv">$returnValue</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">canCallProceedCallable</span><span class="p">(</span><span class="nv">$someValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$returnValue</span> <span class="o">=</span> <span class="nv">$proceed</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$returnValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">postProductToFacebook</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$returnValue</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>When you wrap a method which accepts arguments, your plugin must accept those arguments and you must forward them when you invoke the <code class="language-plaintext highlighter-rouge">proceed</code> callable. You must be careful to match the default parameters and type hints of the original signature of the method.</p>

<p>For example, the following code defines a parameter of type <code class="language-plaintext highlighter-rouge">SomeType</code>, which is nullable:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">My\Module\Model</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MyUtility</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">save</span><span class="p">(</span><span class="kt">SomeType</span> <span class="nv">$obj</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//do something</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You should wrap this method with a plugin:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">My\Module\Plugin</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">My\Module\Model\MyUtility</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MyUtilityUpdater</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">aroundSave</span><span class="p">(</span><span class="kt">MyUtility</span> <span class="nv">$subject</span><span class="p">,</span> <span class="kt">callable</span> <span class="nv">$proceed</span><span class="p">,</span> <span class="kt">SomeType</span> <span class="nv">$obj</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//do something</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Note if you miss <code class="language-plaintext highlighter-rouge">= null</code> and Magento calls the original method with <code class="language-plaintext highlighter-rouge">null</code>, <a href="https://glossary.magento.com/php">PHP</a> would throw a fatal error as your plugin does not accept <code class="language-plaintext highlighter-rouge">null</code>.</p>

<p>You are responsible for forwarding the arguments from the plugin to the <code class="language-plaintext highlighter-rouge">proceed</code> callable. If you are not using/modifying the arguments, you could use variadics and argument unpacking to achieve this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">namespace</span> <span class="nn">My\Module\Plugin</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">My\Module\Model\MyUtility</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MyUtilityUpdater</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">aroundSave</span><span class="p">(</span><span class="kt">MyUtility</span> <span class="nv">$subject</span><span class="p">,</span> <span class="kt">callable</span> <span class="nv">$proceed</span><span class="p">,</span> <span class="p">...</span><span class="nv">$args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//do something</span>
        <span class="nv">$proceed</span><span class="p">(</span><span class="mf">...</span><span class="nv">$args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="prioritizing-plugins">Prioritizing plugins</h2>

<p>The <code class="language-plaintext highlighter-rouge">sortOrder</code> property from the <code class="language-plaintext highlighter-rouge">plugin</code> node declared in <code class="language-plaintext highlighter-rouge">di.xml</code> determines the plugin’s prioritization when more than one plugin is observing the same method.</p>

<p>The <a href="https://github.com/magento/magento2/blob/2.3/lib/internal/Magento/Framework/Interception/PluginListInterface.php"><code class="language-plaintext highlighter-rouge">Magento\Framework\Interception\PluginListInterface</code></a> which is implemented by <a href="https://github.com/magento/magento2/blob/2.3/lib/internal/Magento/Framework/Interception/PluginList/PluginList.php"><code class="language-plaintext highlighter-rouge">Magento\Framework\Interception\PluginList\PluginList</code></a> is responsible to define when to call the before, around, or after methods respecting this prioritization.</p>

<p>If two or more plugins have the same <code class="language-plaintext highlighter-rouge">sortOrder</code> value or do not specify it, the <a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/module-load-order.html">component load order</a> declared in the <code class="language-plaintext highlighter-rouge">sequence</code> node from <code class="language-plaintext highlighter-rouge">module.xml</code> and <a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/build/di-xml-file.html#areas-and-application-entry-points">area</a> will define the merge sequence. Check the component load order in <code class="language-plaintext highlighter-rouge">app/etc/config.php</code> file.</p>

<p>Magento executes plugins using these rules during each plugin execution in two main flows:</p>

<ul>
  <li>Before the execution of the observed method, starting from lowest to highest <code class="language-plaintext highlighter-rouge">sortOrder</code>.
    <ul>
      <li>Magento executes the current plugin’s <code class="language-plaintext highlighter-rouge">before</code> method.</li>
      <li>Then the current plugin’s <code class="language-plaintext highlighter-rouge">around</code> method is called.
        <ul>
          <li>The first part of the plugin’s <code class="language-plaintext highlighter-rouge">around</code> method is executed.</li>
          <li>The <code class="language-plaintext highlighter-rouge">around</code> method executes the <code class="language-plaintext highlighter-rouge">callable</code>.
            <ul>
              <li>If there is another plugin in the chain, all subsequent plugins are wrapped in an independent sequence loop and the execution starts another flow.</li>
              <li>If the current plugin is the last in the chain, the observed method is executed.</li>
            </ul>
          </li>
          <li>The second part of the <code class="language-plaintext highlighter-rouge">around</code> method is executed.</li>
        </ul>
      </li>
      <li>Magento moves on to the next plugin.</li>
    </ul>
  </li>
  <li>Following the execution flow, starting from lowest to highest <code class="language-plaintext highlighter-rouge">sortOrder</code> in the current sequence plugins loop.
    <ul>
      <li>The current plugin’s <code class="language-plaintext highlighter-rouge">after</code> method is executed.</li>
      <li>Magento moves on to the next plugin.</li>
    </ul>
  </li>
</ul>

<p>As a result of these rules, the execution flow of an observed method is affected not only by the prioritization of the plugins, but also by their implemented methods.</p>

<p class="bs-callout-info">The <code class="language-plaintext highlighter-rouge">around</code> plugin’s method affects the flow of all plugins that are executed after it.</p>

<p class="bs-callout-tip">When the <code class="language-plaintext highlighter-rouge">before</code> and <code class="language-plaintext highlighter-rouge">around</code> plugin sequence is finished, Magento calls the first plugin <code class="language-plaintext highlighter-rouge">after</code> method in the sequence loop, and not the <code class="language-plaintext highlighter-rouge">after</code> method of the current plugin that was being executed by the <code class="language-plaintext highlighter-rouge">around</code> method.</p>

<h3 id="examples">Examples</h3>

<p>For example, the <code class="language-plaintext highlighter-rouge">di.xml</code> file of your module attaches three plugins for the class <code class="language-plaintext highlighter-rouge">Action</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Framework\App\Action\Action"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"vendor_module_plugina"</span> <span class="na">type=</span><span class="s">"Vendor\Module\Plugin\PluginA"</span> <span class="na">sortOrder=</span><span class="s">"10"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"vendor_module_pluginb"</span> <span class="na">type=</span><span class="s">"Vendor\Module\Plugin\PluginB"</span> <span class="na">sortOrder=</span><span class="s">"20"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"vendor_module_pluginc"</span> <span class="na">type=</span><span class="s">"Vendor\Module\Plugin\PluginC"</span> <span class="na">sortOrder=</span><span class="s">"30"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The execution will have a different flow, depending on the methods implemented by these classes, as explained in the following scenarios.</p>

<h4 id="scenario-a">Scenario A</h4>

<p>With these methods:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>PluginA</th>
      <th>PluginB</th>
      <th>PluginC</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>sortOrder</strong></td>
      <td>10</td>
      <td>20</td>
      <td>30</td>
    </tr>
    <tr>
      <td><strong>before</strong></td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
    </tr>
    <tr>
      <td><strong>around</strong></td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>after</strong></td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
    </tr>
  </tbody>
</table>

<p>The execution will be in this order:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PluginA::beforeDispatch()</code></li>
  <li><code class="language-plaintext highlighter-rouge">PluginB::beforeDispatch()</code></li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PluginC::beforeDispatch()</code></p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">Action::dispatch()</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">PluginA::afterDispatch()</code></li>
  <li><code class="language-plaintext highlighter-rouge">PluginB::afterDispatch()</code></li>
  <li><code class="language-plaintext highlighter-rouge">PluginC::afterDispatch()</code></li>
</ul>

<h4 id="scenario-b-with-a-callable-around">Scenario B (with a <code class="language-plaintext highlighter-rouge">callable</code> around)</h4>

<p>With these methods:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>PluginA</th>
      <th>PluginB</th>
      <th>PluginC</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>sortOrder</strong></td>
      <td>10</td>
      <td>20</td>
      <td>30</td>
    </tr>
    <tr>
      <td><strong>before</strong></td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
    </tr>
    <tr>
      <td><strong>around</strong></td>
      <td> </td>
      <td>aroundDispatch()</td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>after</strong></td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
    </tr>
  </tbody>
</table>

<p><code class="language-plaintext highlighter-rouge">PluginB</code>::<code class="language-plaintext highlighter-rouge">aroundDispatch()</code> defines the <a href="https://github.com/magento/magento2/blob/2.3/lib/internal/Magento/Framework/Interception/Interceptor.php">$next</a> argument with a <code class="language-plaintext highlighter-rouge">callable</code> type. For example:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">use</span> <span class="nc">Magento\Framework\App\Action\Action</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">PluginB</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">aroundDispatch</span><span class="p">(</span><span class="kt">Action</span> <span class="nv">$subject</span><span class="p">,</span> <span class="kt">callable</span> <span class="nv">$next</span><span class="p">,</span> <span class="p">...</span><span class="nv">$args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// The first half of code goes here</span>
        <span class="c1">// ...</span>

        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$next</span><span class="p">(</span><span class="mf">...</span><span class="nv">$args</span><span class="p">);</span>

        <span class="c1">// The second half of code goes here</span>
        <span class="c1">// ...</span>

        <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The execution will be in this order:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PluginA::beforeDispatch()</code></li>
  <li><code class="language-plaintext highlighter-rouge">PluginB::beforeDispatch()</code></li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PluginB::aroundDispatch()</code> (Magento calls the first half before <code class="language-plaintext highlighter-rouge">callable</code>)</p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">PluginC::beforeDispatch()</code></p>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">Action::dispatch()</code></li>
        </ul>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">PluginC::afterDispatch()</code></p>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">PluginB::aroundDispatch()</code> (Magento calls the second half after <code class="language-plaintext highlighter-rouge">callable</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">PluginA::afterDispatch()</code></li>
  <li><code class="language-plaintext highlighter-rouge">PluginB::afterDispatch()</code></li>
</ul>

<h4 id="scenario-b-without-a-callable-around">Scenario B (without a <code class="language-plaintext highlighter-rouge">callable</code> around)</h4>

<p>Using these methods:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>PluginA</th>
      <th>PluginB</th>
      <th>PluginC</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>sortOrder</strong></td>
      <td>10</td>
      <td>20</td>
      <td>30</td>
    </tr>
    <tr>
      <td><strong>before</strong></td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
    </tr>
    <tr>
      <td><strong>around</strong></td>
      <td> </td>
      <td>aroundDispatch()</td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>after</strong></td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
    </tr>
  </tbody>
</table>

<p><code class="language-plaintext highlighter-rouge">PluginB</code>::<code class="language-plaintext highlighter-rouge">aroundDispatch()</code> does not define the <a href="https://github.com/magento/magento2/blob/2.3/lib/internal/Magento/Framework/Interception/Interceptor.php">$next</a> argument with a <code class="language-plaintext highlighter-rouge">callable</code> type. For example:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="cd">/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */</span>

<span class="kn">use</span> <span class="nc">Magento\Framework\App\Action\Action</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">PluginB</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">aroundDispatch</span><span class="p">(</span><span class="kt">Action</span> <span class="nv">$subject</span><span class="p">,</span> <span class="nv">$next</span><span class="p">,</span> <span class="nv">$result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// My custom code</span>
        <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The execution will be in this order:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PluginA::beforeDispatch()</code></li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PluginB::beforeDispatch()</code></p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">PluginB::aroundDispatch()</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">PluginA::afterDispatch()</code></li>
  <li><code class="language-plaintext highlighter-rouge">PluginB::afterDispatch()</code></li>
</ul>

<p>Because the<code class="language-plaintext highlighter-rouge">callable</code> type for the <code class="language-plaintext highlighter-rouge">$next</code> agrument is absent, <code class="language-plaintext highlighter-rouge">Action::dispatch()</code> will be not called and <code class="language-plaintext highlighter-rouge">Plugin C</code> will be not triggered.</p>

<h4 id="scenario-c">Scenario C</h4>

<p>Assuming these methods:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>PluginA</th>
      <th>PluginB</th>
      <th>PluginC</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>sortOrder</strong></td>
      <td>10</td>
      <td>20</td>
      <td>30</td>
    </tr>
    <tr>
      <td><strong>before</strong></td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
      <td>beforeDispatch()</td>
    </tr>
    <tr>
      <td><strong>around</strong></td>
      <td>aroundDispatch()</td>
      <td> </td>
      <td>aroundDispatch()</td>
    </tr>
    <tr>
      <td><strong>after</strong></td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
      <td>afterDispatch()</td>
    </tr>
  </tbody>
</table>

<p>The execution will be in this order:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PluginA::beforeDispatch()</code></li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PluginA::aroundDispatch()</code> (Magento calls the first half until <code class="language-plaintext highlighter-rouge">callable</code>)</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">PluginB::beforeDispatch()</code></li>
      <li><code class="language-plaintext highlighter-rouge">PluginC::beforeDispatch()</code></li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">PluginC::aroundDispatch()</code> (Magento calls the first half until <code class="language-plaintext highlighter-rouge">callable</code>)</p>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">Action::dispatch()</code></li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">PluginC::aroundDispatch()</code> (Magento calls the second half after <code class="language-plaintext highlighter-rouge">callable</code>)</li>
      <li><code class="language-plaintext highlighter-rouge">PluginB::afterDispatch()</code></li>
      <li><code class="language-plaintext highlighter-rouge">PluginC::afterDispatch()</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">PluginA::aroundDispatch()</code> (Magento calls the second half after <code class="language-plaintext highlighter-rouge">callable</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">PluginA::afterDispatch()</code></li>
</ul>

<h2 id="configuration-inheritance">Configuration inheritance</h2>

<p>Classes and interfaces that are implementations of, or inherit from, classes that have plugins will also inherit plugins from the parent class.</p>

<p>Magento uses plugins defined in the global scope when the system is in a specific area (such as frontend or backend). You can extend or override these global plugin configurations with an area’s <code class="language-plaintext highlighter-rouge">di.xml</code> file.</p>

<p>For example, the developer can disable a global plugin in the <a href="https://glossary.magento.com/backend">backend</a> area by disabling it in the specific <code class="language-plaintext highlighter-rouge">di.xml</code> file for the backend area.</p>

<h3 id="disabling-plugins">Disabling plugins</h3>

<p>Plugins can be disabled in a <code class="language-plaintext highlighter-rouge">di.xml</code> file. To disable a plugin, set the <code class="language-plaintext highlighter-rouge">disabled</code> parameter of the plugin declaration  to <code class="language-plaintext highlighter-rouge">true</code>.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">"Magento\Checkout\Block\Checkout\LayoutProcessor"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;plugin</span> <span class="na">name=</span><span class="s">"ProcessPaymentConfiguration"</span> <span class="na">disabled=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/type&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">ProcessPaymentConfiguration</code> is the name of the plugin declared in the <code class="language-plaintext highlighter-rouge">vendor/magento/module-payment/etc/frontend/di.xml</code>.</p>

<p>Note that the same class can be called two ways: with the leading slash or without.</p>

<p><code class="language-plaintext highlighter-rouge">\Magento\Checkout\Block\Checkout\LayoutProcessor</code></p>

<p>and</p>

<p><code class="language-plaintext highlighter-rouge">Magento\Checkout\Block\Checkout\LayoutProcessor</code></p>

<p>are both valid.</p>

<p>When disabling the plugin, make sure to use the same path format to call and disable the plugin.</p>

<p class="ref-header">Related topics</p>

<ul>
  <li><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/depend-inj.html">Dependency injection</a></li>
  <li><a href="/devdocs/2.3/guides/v2.3/extension-dev-guide/events-and-observers.html">Events and observers</a></li>
</ul>

			</main>
			<footer class="content-footer">
				<button class="page-updated spectrum-ActionButton spectrum-ActionButton--sizeM spectrum-ActionButton--quiet">
  <img class="spectrum-Icon spectrum-Icon--sizeS" src="/devdocs/2.3/assets/i/icons/time.svg" alt="Updated" />
  <time class="spectrum-ActionButton-label" id="last-modified-at" itemprop="dateModified"
    datetime="2022-04-12">
    Apr 12th, 2022
  </time>
</button>

			</footer>
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->

</div>
<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
    <div class="container">
  
      <div class="copyright-links">
        

<ul class="nav footer-links" role="menu">

  <li class="  " role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md" class=" ">Become a Contributor</a></li>

  <li class="  " role="menuitem"><a href="https://glossary.magento.com/" class=" ">Glossary</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/privacy/" class=" ">Privacy Policy</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/" class=" ">Terms of Service</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/licensing/" class=" ">License/Trademark FAQ</a></li>

  <li class="  " role="menuitem"><a href="/devdocs/2.3/guides/v2.3/release-notes/bk-release-notes.html" class=" ">Release Notes</a></li>

  <li class="  " role="menuitem"><a href="/devdocs/2.3/guides/v2.3/release-notes/packages-open-source.html" class=" ">Third-Party Licenses</a></li>

</ul>

      </div>
  
          <div class="copyright-date">&copy; 2023 Adobe. All rights reserved.</div>
  
    </div>
  </div>
  <!-- / #footer -->
  
  


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs/2.3/assets/js/app.min.js?ver=20"></script>
<script src="/devdocs/2.3/assets/js/editions.min.js?ver=20"></script>
<script src="/devdocs/2.3/assets/js/page-updated.min.js?ver=20"></script>





<script type="text/javascript" src="/devdocs/2.3/common/js/glossary-link-enhancer.js"></script>


</body>

</html>
