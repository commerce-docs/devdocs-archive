<!DOCTYPE html>
<html lang="en" dir="ltr" class="spectrum spectrum--medium spectrum--lightest">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>GraphQL functional testing | Archived 2.3 Magento Developer Guide</title>
	<meta name="description" content="Magento Developer Guide">

	<link rel="stylesheet" href="https://use.typekit.net/iaw1apr.css">
	<link rel="stylesheet" href="/devdocs-archive/2.3/assets/css/app.css?ver=20" />
	<link rel="stylesheet" href="/devdocs-archive/2.3/assets/css/print.css?ver=20" media="print" />
	<script src="https://assets.adobedtm.com/a7d65461e54e/f87b70cb627a/launch-b042bff6c581.min.js" async></script>

	<link rel="stylesheet" href="/devdocs-archive/2.3/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />
<meta name="google-site-verification" content="3WFsoYwBe6UuxDwgs7bmd7t0YFQVzDpLpWLjNh0CUp8" />

	<script>
  var baseUrl = "/devdocs-archive/2.3";
  var algolia = {
    id: "E642SEDTHL",
    index: "devdocs",
    key: "d2d0f33ab73e291ef8d88d8b565e754c",
  };

  var indices = [{
      label: "Results",
      name: "devdocs",
      facetFilters: [
        ["guide_version: 2.3",
          "versionless: true"
        ]
      ],
      refinements: [{
        label: "Functional areas",
        attribute: "functional_areas"
      }],
      baseUrl: "/devdocs-archive/2.3"
    }
  ];

</script>




	<link rel="icon" href="https://www.adobe.com/favicon.ico" type="image/x-icon" />
	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://adobe.com/favicon.ico">

</head>

<body class="layout-default">

	<header class="site-header">

		

<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" href="/devdocs-archive/2.3/">
      <img class="logo-image" src="/devdocs-archive/2.3/assets/i/adobe-a.svg" alt="Adobe">
      <span class="logo-text">Adobe</span>
      <span class="site-logo">Commerce DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      <!-- Main Navigation --><ul class="nav-main spectrum-Tabs spectrum-Tabs--sizeM spectrum-Tabs--horizontal" role="menubar"><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Cloud</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud basics</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/overview.html" class="spectrum-Menu-itemLabel ">Cloud Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/architecture/cloud-architecture.html" class="spectrum-Menu-itemLabel ">Cloud Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/project/file-structure.html" class="spectrum-Menu-itemLabel ">Project Structure</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/best-practices.html" class="spectrum-Menu-itemLabel ">Upgrades and Patches</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/release-notes/cloud-tools-suite.html" class="spectrum-Menu-itemLabel ">Release Notes</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Cloud development</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/" class="spectrum-Menu-itemLabel ">Local development</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/configure/" class="spectrum-Menu-itemLabel ">Configure and launch Docker</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/quick-reference/" class="spectrum-Menu-itemLabel ">Docker quick reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/app/configure-app-yaml.html" class="spectrum-Menu-itemLabel ">Configure Application</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/configure/env/configure-env-yaml.html" class="spectrum-Menu-itemLabel ">Configure Environments</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Functional Testing</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/application-testing/" class="spectrum-Menu-itemLabel ">Application testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/cloud-tools/docker/test/code-testing/" class="spectrum-Menu-itemLabel ">Cloud code testing</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Setup</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/install-gde/install-flow-diagram.html" class="spectrum-Menu-itemLabel ">Installation Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-admin/start/resources/extensions.html" class="spectrum-Menu-itemLabel ">Extensions Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/comp-mgr/bk-compman-upgrade-guide.html" class="spectrum-Menu-itemLabel ">Software Update Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/config-guide/bk-config-guide.html" class="spectrum-Menu-itemLabel ">Configuration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/performance-best-practices/introduction.html" class="spectrum-Menu-itemLabel ">Performance Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/migration/bk-migration-guide.html" class="spectrum-Menu-itemLabel ">Migration Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/release/notes/overview.html" class="spectrum-Menu-itemLabel ">Release Information</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/reference/cli/magento.html" class="spectrum-Menu-itemLabel ">Command-line Tools Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/tools/overview.html" class="spectrum-Menu-itemLabel ">Tools</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Development</span><div class="nav-popup spectrum-Popover"><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Backend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/architecture/bk-architecture.html" class="spectrum-Menu-itemLabel ">Architecture</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/extension-dev-guide/bk-extension-dev-guide.html" class="spectrum-Menu-itemLabel ">PHP Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/ext-best-practices/bk-ext-best-practices.html" class="spectrum-Menu-itemLabel ">Extension Developer Best Practices</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/mrg/intro.html" class="spectrum-Menu-itemLabel ">Module Reference Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/coding-standards/bk-coding-standards.html" class="spectrum-Menu-itemLabel ">Coding Standards</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/guides/" class="spectrum-Menu-itemLabel ">Contributor Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/" class="spectrum-Menu-itemLabel ">Contribution Resources</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">Frontend</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/frontend-dev-guide/bk-frontend-dev-guide.html" class="spectrum-Menu-itemLabel ">Frontend Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/ui_comp_guide/bk-ui_comps.html" class="spectrum-Menu-itemLabel ">UI Components Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/javascript-dev-guide/bk-javascript-dev-guide.html" class="spectrum-Menu-itemLabel ">JavaScript Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/pattern-library/bk-pattern.html" class="spectrum-Menu-itemLabel ">Admin Design Pattern Library</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/design-styleguide/bk-styleguide.html" class="spectrum-Menu-itemLabel ">Admin Style Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/pwa-studio/" class="spectrum-Menu-itemLabel ">PWA Documentation Site</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder Developer Guide</a></li></ul>
            </div><div class="nav-section">
              <div class="spectrum-Menu-sectionHeading">API</div>
              <ul class="spectrum-Menu"><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/get-started/bk-get-started-api.html" class="spectrum-Menu-itemLabel ">Get Started with our Web APIs</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/rest/bk-rest.html" class="spectrum-Menu-itemLabel ">REST API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/soap/bk-soap.html" class="spectrum-Menu-itemLabel ">SOAP API Reference</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/" class="spectrum-Menu-itemLabel ">GraphQL Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/eqp/v1/" class="spectrum-Menu-itemLabel ">Marketplace EQP API Reference</a></li></ul>
            </div></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Testing</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/testing.html" class="spectrum-Menu-itemLabel ">Application Testing Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://devdocs.magento.com/mftf/v2/docs/introduction.html" class="spectrum-Menu-itemLabel ">Functional Acceptance Testing (MFTF)</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/integration/integration_test_execution.html" class="spectrum-Menu-itemLabel ">Integration Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/js/jasmine.html" class="spectrum-Menu-itemLabel ">JavaScript Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/test/unit/unit_test_execution.html" class="spectrum-Menu-itemLabel ">PHP Unit Testing</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/get-started/web-api-functional-testing.html" class="spectrum-Menu-itemLabel ">Web API Functional Testing</a></li></ul></div></li><li class="nav-main-separator"></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Functional Areas</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/advanced-reporting/overview.html" class="spectrum-Menu-itemLabel ">Advanced Reporting</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/b2b/bk-b2b.html" class="spectrum-Menu-itemLabel ">B2B</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/catalog-service/overview.html" class="spectrum-Menu-itemLabel ">Catalog Service</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/inventory/index.html" class="spectrum-Menu-itemLabel ">Inventory Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/guide-overview.html" class="spectrum-Menu-itemLabel ">Live Search</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/marketplace/guides/sellers/" class="spectrum-Menu-itemLabel ">Commerce Marketplace</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html" class="spectrum-Menu-itemLabel ">Payment Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://omsdocs.magento.com/en/" class="spectrum-Menu-itemLabel ">Order Management</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/frontend-core/page-builder/" class="spectrum-Menu-itemLabel ">Page Builder</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-merchant-services/product-recommendations/developer/development-overview.html" class="spectrum-Menu-itemLabel ">Product Recommendations Developer Guide</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-operations/security-and-compliance/overview.html" class="spectrum-Menu-itemLabel ">Security and Compliance</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/services/shared-services/" class="spectrum-Menu-itemLabel ">Shared Services</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/extension-dev-guide/staging.html" class="spectrum-Menu-itemLabel ">Staging</a></li></ul></div></li><li class="nav-main-item spectrum-Tabs-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span class="spectrum-Tabs-itemLabel" tabindex="-1">Tutorials</span><div class="nav-popup spectrum-Popover"><ul><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/rest/tutorials/index.html" class="spectrum-Menu-itemLabel ">Rest Tutorials</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/custom-attributes/introduction.html" class="spectrum-Menu-itemLabel ">Custom Attributes</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/customize_product.html" class="spectrum-Menu-itemLabel ">Customize Product Creation Form</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/howdoi/checkout/checkout_overview.html" class="spectrum-Menu-itemLabel ">Customize Checkout</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://developer.adobe.com/commerce/contributor/community/support/" class="spectrum-Menu-itemLabel ">Support</a></li><li class="  spectrum-Menu-item" role="menuitem"><a href="https://experienceleague.adobe.com/docs/commerce-learn/tutorials/overview.html" class="spectrum-Menu-itemLabel ">Video Tutorials</a></li></ul></div></li></ul><!-- /.nav-main -->

    </div>

    <div class="nav-actions">
      <div class="version-switcher">
	<button class="spectrum-Picker spectrum-Picker--sizeM dropdown-toggle" disabled>
		<span class="spectrum-Picker-label">Version 2.3</span>
	</button>
</div>
    </div>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		

		<div class="main-container">
			<a id="main-content"></a>

<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<button class="toc-toggler">Table of Contents</button>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">GraphQL Developer Guide</h4>
		
		<div class="collapsible-navigation">
		  <ul class="spectrum-SideNav spectrum-SideNav--multiLevel"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/index.html" class="spectrum-SideNav-itemLink ">Overview</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Implementation</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/send-request.html" class="spectrum-SideNav-itemLink ">GraphQL requests</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/authorization-tokens.html" class="spectrum-SideNav-itemLink ">GraphQL Authorization</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/protected-mutations.html" class="spectrum-SideNav-itemLink ">Protected mutations</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/security-configuration.html" class="spectrum-SideNav-itemLink ">GraphQL security configuration</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/caching.html" class="spectrum-SideNav-itemLink ">GraphQL caching</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/custom-filters.html" class="spectrum-SideNav-itemLink ">Filtering with custom attributes</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Development</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/develop/create-graphqls-file.html" class="spectrum-SideNav-itemLink ">Define the GraphQL schema for a module</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/develop/resolvers.html" class="spectrum-SideNav-itemLink ">Resolvers</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/develop/extend-existing-schema.html" class="spectrum-SideNav-itemLink ">Extend an existing GraphQL schema</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/develop/identity-class.html" class="spectrum-SideNav-itemLink ">Identity class</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/develop/create-custom-url-resolver.html" class="spectrum-SideNav-itemLink ">Create a custom urlResolver service</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/develop/debugging.html" class="spectrum-SideNav-itemLink ">Debugging GraphQL queries</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/develop/exceptions.html" class="spectrum-SideNav-itemLink ">Exception handling</a></li></ul></li><li class="is-selected  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/functional-testing.html" class="spectrum-SideNav-itemLink ">Functional testing</a></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Queries</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/index.html" class="spectrum-SideNav-itemLink ">Using queries</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/cart.html" class="spectrum-SideNav-itemLink ">cart query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/category.html" class="spectrum-SideNav-itemLink ">category query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/category-list.html" class="spectrum-SideNav-itemLink ">categoryList query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/checkout-agreements.html" class="spectrum-SideNav-itemLink ">checkoutAgreements query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/cms-blocks.html" class="spectrum-SideNav-itemLink ">cmsBlocks query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/cms-page.html" class="spectrum-SideNav-itemLink ">cmsPage query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/directory-countries.html" class="spectrum-SideNav-itemLink ">countries query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/directory-country.html" class="spectrum-SideNav-itemLink ">country query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/directory-currency.html" class="spectrum-SideNav-itemLink ">currency query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/custom-attribute-metadata.html" class="spectrum-SideNav-itemLink ">customAttributeMetadata query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/customer.html" class="spectrum-SideNav-itemLink ">customer query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/customer-cart.html" class="spectrum-SideNav-itemLink ">customerCart query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/customer-downloadable-products.html" class="spectrum-SideNav-itemLink ">customerDownloadableProducts query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/customer-orders.html" class="spectrum-SideNav-itemLink ">customerOrders query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/customer-payment-tokens.html" class="spectrum-SideNav-itemLink ">customerPaymentTokens query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/get-hosted-pro-url.html" class="spectrum-SideNav-itemLink ">getHostedProUrl query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/get-payflow-link-token.html" class="spectrum-SideNav-itemLink ">getPayflowLinkToken query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/giftcard-account.html" class="spectrum-SideNav-itemLink ee-only">giftCardAccount query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/is-email-available.html" class="spectrum-SideNav-itemLink ">isEmailAvailable query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/products.html" class="spectrum-SideNav-itemLink ">products query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/store-config.html" class="spectrum-SideNav-itemLink ">storeConfig query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/url-resolver.html" class="spectrum-SideNav-itemLink ">urlResolver query</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/queries/wishlist.html" class="spectrum-SideNav-itemLink ">wishlist query</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Mutations</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/index.html" class="spectrum-SideNav-itemLink ">Using mutations</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/add-bundle-products.html" class="spectrum-SideNav-itemLink ">addBundleProductsToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/add-configurable-products.html" class="spectrum-SideNav-itemLink ">addConfigurableProductsToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/add-downloadable-products.html" class="spectrum-SideNav-itemLink ">addDownloadableProductsToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/add-simple-products.html" class="spectrum-SideNav-itemLink ">addSimpleProductsToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/add-virtual-products.html" class="spectrum-SideNav-itemLink ">addVirtualProductsToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/apply-coupon.html" class="spectrum-SideNav-itemLink ">applyCouponToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/apply-giftcard.html" class="spectrum-SideNav-itemLink ee-only">applyGiftCardToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/apply-store-credit.html" class="spectrum-SideNav-itemLink ee-only">applyStoreCreditToCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/change-customer-password.html" class="spectrum-SideNav-itemLink ">changeCustomerPassword mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/create-braintree-client-token.html" class="spectrum-SideNav-itemLink ">createBraintreeClientToken mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/create-customer.html" class="spectrum-SideNav-itemLink ">createCustomer mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/create-customer-address.html" class="spectrum-SideNav-itemLink ">createCustomerAddress mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/create-empty-cart.html" class="spectrum-SideNav-itemLink ">createEmptyCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/create-payflow-pro-token.html" class="spectrum-SideNav-itemLink ">createPayflowProToken mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/create-paypal-express-token.html" class="spectrum-SideNav-itemLink ">createPayPalExpressToken mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/delete-customer-address.html" class="spectrum-SideNav-itemLink ">deleteCustomerAddress mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/delete-payment-token.html" class="spectrum-SideNav-itemLink ">deletePaymentToken mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/generate-customer-token.html" class="spectrum-SideNav-itemLink ">generateCustomerToken mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/handle-payflow-pro-response.html" class="spectrum-SideNav-itemLink ">handlePayflowProResponse mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/merge-carts.html" class="spectrum-SideNav-itemLink ">mergeCarts mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/place-order.html" class="spectrum-SideNav-itemLink ">placeOrder mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/redeem-giftcard-balance.html" class="spectrum-SideNav-itemLink ee-only">redeemGiftCardBalanceAsStoreCredit mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/remove-coupon.html" class="spectrum-SideNav-itemLink ">removeCouponFromCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/remove-giftcard.html" class="spectrum-SideNav-itemLink ee-only">removeGiftCardFromCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/remove-item.html" class="spectrum-SideNav-itemLink ">removeItemFromCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/remove-store-credit.html" class="spectrum-SideNav-itemLink ee-only">removeStoreCreditFromCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/revoke-customer-token.html" class="spectrum-SideNav-itemLink ">revokeCustomerToken mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/send-email-to-friend.html" class="spectrum-SideNav-itemLink ">sendEmailToFriend mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/set-billing-address.html" class="spectrum-SideNav-itemLink ">setBillingAddressesOnCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/set-guest-email.html" class="spectrum-SideNav-itemLink ">setGuestEmailOnCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/set-payment-place-order.html" class="spectrum-SideNav-itemLink ">setPaymentMethodAndPlaceOrder mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/set-payment-method.html" class="spectrum-SideNav-itemLink ">setPaymentMethodOnCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/set-shipping-address.html" class="spectrum-SideNav-itemLink ">setShippingAddressesOnCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/set-shipping-method.html" class="spectrum-SideNav-itemLink ">setShippingMethodsOnCart mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/update-cart-items.html" class="spectrum-SideNav-itemLink ">updateCartItems mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/update-customer.html" class="spectrum-SideNav-itemLink ">updateCustomer mutation</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/mutations/update-customer-address.html" class="spectrum-SideNav-itemLink ">updateCustomerAddress mutation</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Interfaces</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/product-interface-implementations.html" class="spectrum-SideNav-itemLink ">Product interface implementations</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/product-interface.html" class="spectrum-SideNav-itemLink ">ProductInterface attributes</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/category-interface.html" class="spectrum-SideNav-itemLink ">CategoryInterface attributes</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/customizable-option-interface.html" class="spectrum-SideNav-itemLink ">CustomizableOptionInterface attributes</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/bundle-product.html" class="spectrum-SideNav-itemLink ">Bundle product data types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/configurable-product.html" class="spectrum-SideNav-itemLink ">Configurable product data types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/downloadable-product.html" class="spectrum-SideNav-itemLink ">Downloadable product data types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/gift-card-product.html" class="spectrum-SideNav-itemLink ">GiftCardProduct data types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/grouped-product.html" class="spectrum-SideNav-itemLink ">GroupedProduct data types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/simple-product.html" class="spectrum-SideNav-itemLink ">Simple product data types</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/interfaces/virtual-product.html" class="spectrum-SideNav-itemLink ">Virtual product data types</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Payment methods</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/authorize-net.html" class="spectrum-SideNav-itemLink ">Authorize.Net</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/braintree.html" class="spectrum-SideNav-itemLink ">Braintree</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/braintree-vault.html" class="spectrum-SideNav-itemLink ">Braintree Vault</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/paypal-express-checkout.html" class="spectrum-SideNav-itemLink ">PayPal Express Checkout</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/payflow-express.html" class="spectrum-SideNav-itemLink ">Express Checkout for other PayPal solutions</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/payflow-link.html" class="spectrum-SideNav-itemLink ">PayPal Payflow Link</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/payflow-pro.html" class="spectrum-SideNav-itemLink ">PayPal Payflow Pro</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/payments-advanced.html" class="spectrum-SideNav-itemLink ">PayPal Payments Advanced</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/payment-methods/hosted-pro.html" class="spectrum-SideNav-itemLink ">PayPal Website Payments Pro Hosted Solution</a></li></ul></li><li class=" tutorial spectrum-SideNav-item" role="menuitem"><span class="spectrum-SideNav-itemLink ">Tutorial</span><ul class="spectrum-SideNav"><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/index.html" class="spectrum-SideNav-itemLink ">GraphQL checkout tutorial</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-customer.html" class="spectrum-SideNav-itemLink ">Step 1. Create a customer</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-shopping-cart.html" class="spectrum-SideNav-itemLink ">Step 2. Create an empty cart</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-add-product-to-cart.html" class="spectrum-SideNav-itemLink ">Step 3. Add products to the cart</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-shipping-address.html" class="spectrum-SideNav-itemLink ">Step 4. Set the shipping address</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-billing-address.html" class="spectrum-SideNav-itemLink ">Step 5. Set the billing address</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-shipping-method.html" class="spectrum-SideNav-itemLink ">Step 6. Set the shipping method</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-coupon.html" class="spectrum-SideNav-itemLink ">Step 7. Apply a coupon</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-quote-email.html" class="spectrum-SideNav-itemLink ">Step 8. Set email on the cart</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-payment-method.html" class="spectrum-SideNav-itemLink ">Step 9. Set the payment method</a></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/tutorials/checkout/checkout-place-order.html" class="spectrum-SideNav-itemLink ">Step 10. Place the order</a></li></ul></li><li class="  spectrum-SideNav-item" role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/graphql/release-notes.html" class="spectrum-SideNav-itemLink ">Release Notes</a></li></ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<header class="content-header">
				<!-- page-header -->
<section class="page-intro">

  

  
  <div class="message-banner">
    <center>Adobe Commerce 2.3 reached end of support in September 2022.</center>
  </div>
  

  




<!--   

<div class="spectrum-Tags" role="list" aria-label="Tags">
  <div class="spectrum-Tags-item" role="listitem" tabindex="0">
    <img class="spectrum-Avatar" src="img/example-ava.jpg" alt="Avatar">
    <span class="spectrum-Tags-itemLabel">Shantanu</span>
  </div>
</div> -->


  <h1 class="page-title">GraphQL functional testing</h1>

  

  
	<div class="github-links spectrum-ActionGroup--compact ActionGroup--justified"></div>
	

</section>

			</header>
			<main>
				<p>Magento provides API functional tests that can verify extension points in GraphQL. These tests serve as an example for exposing new queries via GraphQL.</p>

<h2 id="creating-a-new-graphql-functional-test">Creating a new GraphQL functional test</h2>

<p>All GraphQL functional tests should be located in the <code class="language-plaintext highlighter-rouge">dev/tests/api-functional/testsuite/Magento/GraphQl/</code> directory and inherit from the generic test case <code class="language-plaintext highlighter-rouge">Magento\TestFramework\TestCase\GraphQlAbstract</code>. It defines the <code class="language-plaintext highlighter-rouge">graphQlQuery()</code> and <code class="language-plaintext highlighter-rouge">graphQlMutation()</code> methods, which should be used to perform Web API calls from tests.</p>

<p>The following test verifies that the schema returns the correct attribute type, given the <code class="language-plaintext highlighter-rouge">attribute_code</code> and corresponding <code class="language-plaintext highlighter-rouge">entity_type</code>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre></td><td class="rouge-code"><pre><span class="kn">namespace</span> <span class="nn">Magento\GraphQl\Catalog</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\TestFramework\TestCase\GraphQlAbstract</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProductAttributeTypeTest</span> <span class="kd">extends</span> <span class="nc">GraphQlAbstract</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testAttributeTypeResolver</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span>
            <span class="o">=</span> <span class="sh">&lt;&lt;&lt;QUERY
{
  customAttributeMetadata(attributes:
  [
    {
      attribute_code:"description",
      entity_type:"catalog_product"
    },
    {
      attribute_code:"status",
      entity_type:"catalog_product"
    },
    {
      attribute_code:"special_price",
      entity_type:"catalog_product"
    },
    {
      attribute_code:"disable_auto_group_change",
      entity_type:"customer"
    }
    {
      attribute_code:"special_price",
      entity_type:"Magento\\\\Catalog\\\\Api\\\\Data\\\\ProductInterface"
    }
  ]
  )
  {
    items
    {
      attribute_code
      attribute_type
      entity_type
      input_type
    }
  }
 }
QUERY;</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">graphQlQuery</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
        <span class="nv">$expectedAttributeCodes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">'description'</span><span class="p">,</span>
            <span class="s1">'status'</span><span class="p">,</span>
            <span class="s1">'special_price'</span><span class="p">,</span>
            <span class="s1">'disable_auto_group_change'</span><span class="p">,</span>
            <span class="s1">'special_price'</span>
        <span class="p">];</span>
        <span class="nv">$entityType</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">'catalog_product'</span><span class="p">,</span>
            <span class="s1">'catalog_product'</span><span class="p">,</span>
            <span class="s1">'catalog_product'</span><span class="p">,</span>
            <span class="s1">'customer'</span><span class="p">,</span>
            <span class="err">\</span><span class="nc">Magento\Catalog\Api\Data\ProductInterface</span><span class="o">::</span><span class="n">class</span>
        <span class="p">];</span>
        <span class="nv">$attributeTypes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'String'</span><span class="p">,</span> <span class="s1">'Int'</span><span class="p">,</span> <span class="s1">'Float'</span><span class="p">,</span><span class="s1">'Boolean'</span><span class="p">,</span> <span class="s1">'Float'</span><span class="p">];</span>
        <span class="nv">$inputTypes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'textarea'</span><span class="p">,</span> <span class="s1">'select'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">,</span> <span class="s1">'boolean'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">];</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">assertAttributeType</span><span class="p">(</span><span class="nv">$attributeTypes</span><span class="p">,</span> <span class="nv">$expectedAttributeCodes</span><span class="p">,</span> <span class="nv">$entityType</span><span class="p">,</span> <span class="nv">$inputTypes</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="using-the-default-graphqlquerytest">Using the default GraphQlQueryTest</h2>

<p>The <code class="language-plaintext highlighter-rouge">\Magento\GraphQl\TestModule\GraphQlQueryTest.php</code> test case uses two test modules to determine whether the mechanisms for GraphQL extensibility work as expected. It illustrates best practices for extending an existing GraphQL endpoint.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">TestModuleGraphQlQuery</code> - This bare-bones module defines a <code class="language-plaintext highlighter-rouge">testItem</code> endpoint with the queryable attributes <code class="language-plaintext highlighter-rouge">item_id</code> and <code class="language-plaintext highlighter-rouge">name</code>. It’s located at <code class="language-plaintext highlighter-rouge">&lt;installdir&gt;/dev/tests/api-functional/_files/TestModuleGraphQlQuery</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">TestModuleGraphQlQueryExtension</code> - This module extends <code class="language-plaintext highlighter-rouge">TestModuleGraphQlQuery</code>, adding the <code class="language-plaintext highlighter-rouge">integer_list</code> extension attribute. It’s located at <code class="language-plaintext highlighter-rouge">&lt;installdir&gt;/dev/tests/api-functional/_files/TestModuleGraphQlQueryExtension</code>.</li>
</ul>

<h2 id="creating-fixtures">Creating fixtures</h2>

<p>Fixtures, which are part of the testing framework, prepare preconditions in the system for further testing. For example, when you test the ability to add a product to the shopping cart, the precondition is that a product must be available for testing.</p>

<p>A fixture consists of two files:</p>

<ul>
  <li>The fixture file, which defines the test</li>
  <li>A rollback file, which reverts the system to the state before the test was run</li>
</ul>

<p class="bs-callout-info">Each fixture should have a corresponding rollback file.</p>

<p>Magento provides fixtures in the <code class="language-plaintext highlighter-rouge">dev/tests/integration/testsuite/Magento/&lt;ModuleName&gt;/_files</code> directory. Use these fixtures whenever possible. When you create your own fixture, also create a proper rollback.</p>

<h3 id="fixture-files">Fixture files</h3>

<p>The following fixture creates a simple product with predefined attributes.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Magento\Catalog\Model\ProductFactory</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\TestFramework\Helper\Bootstrap</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Catalog\Model\ResourceModel\Product</span> <span class="k">as</span> <span class="nc">ProductResource</span><span class="p">;</span>

<span class="nv">$productFactory</span> <span class="o">=</span> <span class="nc">Bootstrap</span><span class="o">::</span><span class="nf">getObjectManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="nc">ProductFactory</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
<span class="nv">$product</span> <span class="o">=</span> <span class="nv">$productFactory</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">();</span>
<span class="nv">$product</span><span class="o">-&gt;</span><span class="nf">setTypeId</span><span class="p">(</span><span class="err">\</span><span class="nc">Magento\Catalog\Model\Product\Type</span><span class="o">::</span><span class="no">TYPE_VIRTUAL</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setId</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setAttributeSetId</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setWebsiteIds</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="nf">setName</span><span class="p">(</span><span class="s1">'Virtual Product'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setSku</span><span class="p">(</span><span class="s1">'virtual-product'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setPrice</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setTaxClassId</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setVisibility</span><span class="p">(</span><span class="err">\</span><span class="nc">Magento\Catalog\Model\Product\Visibility</span><span class="o">::</span><span class="no">VISIBILITY_BOTH</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setStatus</span><span class="p">(</span><span class="err">\</span><span class="nc">Magento\Catalog\Model\Product\Attribute\Source\Status</span><span class="o">::</span><span class="no">STATUS_ENABLED</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">setStockData</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s1">'qty'</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s1">'is_in_stock'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">'manage_stock'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">);</span>
<span class="cd">/** @var ProductResource $productResource */</span>
<span class="nv">$productResource</span> <span class="o">=</span> <span class="nc">Bootstrap</span><span class="o">::</span><span class="nf">getObjectManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">(</span><span class="nc">ProductResource</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
<span class="nv">$productResource</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">(</span><span class="nv">$product</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To use this fixture in a test, add it to the test’s annotation in the following manner:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>    <span class="cd">/**
     * @magentoApiDataFixture Magento/Catalog/_files/product_virtual.php
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testAddVirtualProductToShoppingCart</span><span class="p">()</span>
    <span class="p">{</span>
      <span class="c1">// Test body</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You can also invoke multiple fixtures:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>    <span class="cd">/**
     * @magentoApiDataFixture Magento/Checkout/_files/quote_with_simple_product_saved.php
     * @magentoApiDataFixture Magento/Customer/_files/customer.php
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testSetNewBillingAddressByRegisteredCustomer</span><span class="p">()</span>
    <span class="p">{</span>
      <span class="c1">// Test body</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The specified fixtures will now execute on every test run.</p>

<h3 id="rollback-files">Rollback files</h3>

<p>Every fixture should have a rollback file. A rollback is a set of operations that remove changes introduced by the fixture from the system once the test is completed.</p>

<p>The rollback filename should correspond to the original fixture filename postfixed by <code class="language-plaintext highlighter-rouge">_rollback</code> keyword. For example, if the fixture file name is <code class="language-plaintext highlighter-rouge">virtual_product.php</code>, name the rollback file <code class="language-plaintext highlighter-rouge">virtual_product_rollback.php</code>.</p>

<p>The following fixture rollback removes the newly-created product from the database.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Magento\Catalog\Api\ProductRepositoryInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Exception\NoSuchEntityException</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Exception\StateException</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\TestFramework\Helper\Bootstrap</span><span class="p">;</span>

<span class="nv">$registry</span> <span class="o">=</span> <span class="nc">Bootstrap</span><span class="o">::</span><span class="nf">getObjectManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="err">\</span><span class="nc">Magento\Framework\Registry</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>

<span class="nv">$registry</span><span class="o">-&gt;</span><span class="nf">unregister</span><span class="p">(</span><span class="s1">'isSecureArea'</span><span class="p">);</span>
<span class="nv">$registry</span><span class="o">-&gt;</span><span class="nf">register</span><span class="p">(</span><span class="s1">'isSecureArea'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nv">$productRepository</span> <span class="o">=</span> <span class="nc">Bootstrap</span><span class="o">::</span><span class="nf">getObjectManager</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">create</span><span class="p">(</span><span class="nc">ProductRepositoryInterface</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$product</span> <span class="o">=</span> <span class="nv">$productRepository</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'virtual-product'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nv">$productRepository</span><span class="o">-&gt;</span><span class="nb">delete</span><span class="p">(</span><span class="nv">$product</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nc">NoSuchEntityException</span> <span class="nv">$exception</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Product already removed</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nc">StateException</span> <span class="nv">$exception</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>

<span class="nv">$registry</span><span class="o">-&gt;</span><span class="nf">unregister</span><span class="p">(</span><span class="s1">'isSecureArea'</span><span class="p">);</span>
<span class="nv">$registry</span><span class="o">-&gt;</span><span class="nf">register</span><span class="p">(</span><span class="s1">'isSecureArea'</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="fixture-configs">Fixture configs</h3>

<p>Use the <code class="language-plaintext highlighter-rouge">@magentoConfigFixture</code> annotation to set a custom config value. It supports a <code class="language-plaintext highlighter-rouge">store</code> scope only.</p>

<h4 id="syntax">Syntax</h4>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="cd">/**
 * @magentoConfigFixture &lt;store_code&gt;_store &lt;config_key&gt; &lt;config_value&gt;
 */</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>where</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;store_code&gt;</code> - Store code. See the <code class="language-plaintext highlighter-rouge">store</code>.<code class="language-plaintext highlighter-rouge">code</code> database field value.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;config_key&gt;</code> - Config key. See <code class="language-plaintext highlighter-rouge">core_config_data</code>.<code class="language-plaintext highlighter-rouge">path</code></li>
  <li><code class="language-plaintext highlighter-rouge">&lt;config_value&gt;</code> - Config value. See <code class="language-plaintext highlighter-rouge">core_config_data</code>.<code class="language-plaintext highlighter-rouge">value</code></li>
</ul>

<p class="bs-callout-info"><code class="language-plaintext highlighter-rouge">@magentoConfigFixture</code> does not require a roll-back.</p>

<h4 id="example-usage">Example usage</h4>

<p>The following example sets a store-scoped value <code class="language-plaintext highlighter-rouge">1</code> for the config key <code class="language-plaintext highlighter-rouge">checkout/options/enable_agreements</code> for the <code class="language-plaintext highlighter-rouge">default</code> store in the <code class="language-plaintext highlighter-rouge">GetActiveAgreement()</code> test:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>    <span class="cd">/**
     * @magentoConfigFixture default_store checkout/options/enable_agreements 1
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testGetActiveAgreement</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="mf">...</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">@magentoConfigFixture</code> performs the following action as a background process before test execution:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">INSERT</span> <span class="k">INTO</span> <span class="nv">`core_config_data`</span> <span class="p">(</span><span class="k">scope</span><span class="nv">`, `</span><span class="n">scope_id</span><span class="nv">`, `</span><span class="n">path</span><span class="nv">`, `</span><span class="n">value</span><span class="nv">`)
VALUES
  ('stores', 1, 'checkout/options/enable_agreements', '1');
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>The fixture automatically removes the <code class="language-plaintext highlighter-rouge">checkout/options/enable_agreements</code> config key from the database after the test has been completed.</p>

<h2 id="defining-expected-exceptions">Defining expected exceptions</h2>

<p>Your functional tests should include events that cause exceptions. Since your tests expect an exception to occur, set up your tests so that they elicit the proper responses. You can define expected exception messages either in:</p>

<ul>
  <li>The body of the test</li>
  <li>The test function annotation</li>
</ul>

<p class="bs-callout-tip">We recommend that you declare expected exceptions in the test method body, as declaring expected exceptions with annotations has been deprecated in PHPUnit 8. Existing tests that use annotations will have to be updated when Magento requires that version of PHPUnit or higher.</p>

<h3 id="exception-messages-in-the-body-of-a-test">Exception messages in the body of a test</h3>

<p>The following examples show two ways you can use the <code class="language-plaintext highlighter-rouge">expectExceptionMessage</code> function to define an expected exception message.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">function</span> <span class="n">testMyExceptionTest</span><span class="p">()</span>
<span class="p">{</span>
    <span class="mf">...</span>

    <span class="k">self</span><span class="o">::</span><span class="nf">expectExceptionMessage</span><span class="p">(</span><span class="s2">"Expected exception message goes here..."</span><span class="p">);</span>

    <span class="mf">...</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>or</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">function</span> <span class="n">testMyExceptionTest</span><span class="p">()</span>
<span class="p">{</span>
    <span class="mf">...</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">expectExceptionMessage</span><span class="p">(</span><span class="s2">"Expected exception message goes here..."</span><span class="p">);</span>

    <span class="mf">...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p class="bs-callout-info">Define the exception message before invoking logic that generates the exception.</p>

<p>As an example, consider the case where Customer A tries to retrieve information about Customer B’s cart. In this situation, Customer A gets this error:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">The current user cannot perform operations on cart "XXXXX"
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">XXXXX</code> is the unique ID of Customer B’s cart.</p>

<p>The following sample shows how to cover this scenario using an <code class="language-plaintext highlighter-rouge">expectExceptionMessage</code> function:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>    <span class="cd">/**
     * @magentoApiDataFixture Magento/Checkout/_files/quote_with_items_saved.php
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testGetCartFromAnotherCustomer</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$reservedOrderId</span> <span class="o">=</span> <span class="s1">'test_order_item_with_items'</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">quoteResource</span><span class="o">-&gt;</span><span class="nf">load</span><span class="p">(</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">quote</span><span class="p">,</span>
            <span class="nv">$reservedOrderId</span><span class="p">,</span>
            <span class="s1">'reserved_order_id'</span>
        <span class="p">);</span>
        <span class="nv">$maskedQuoteId</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">quoteIdToMaskedId</span><span class="o">-&gt;</span><span class="nf">execute</span><span class="p">((</span><span class="n">int</span><span class="p">)</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">quote</span><span class="o">-&gt;</span><span class="nf">getId</span><span class="p">());</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">prepareGetCartQuery</span><span class="p">(</span><span class="nv">$maskedQuoteId</span><span class="p">);</span>
        <span class="k">self</span><span class="o">::</span><span class="nf">expectExceptionMessage</span><span class="p">(</span><span class="s2">"The current user cannot perform operations on cart </span><span class="se">\"</span><span class="nv">$maskedQuoteId</span><span class="se">\"</span><span class="s2">"</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">graphQlQuery</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="exception-messages-in-the-annotation-of-a-test-function">Exception messages in the annotation of a test function</h3>

<p>You can also use a predefined directive such as <code class="language-plaintext highlighter-rouge">@expectedExceptionMessage</code> as an alternative way to call the <code class="language-plaintext highlighter-rouge">expectExceptionMessage</code> method:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>    <span class="cd">/**
     * @expectedException \Exception
     * @expectedExceptionMessage Expected exception message goes here...
     */</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>In the following query, a customer provides an incorrect cart ID while trying to retrieve information about his own cart.</p>

<p><strong>Query:</strong></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>{
  cart(cart_id: "YYYYY") {
    items {
      __typename
      id
      qty
    }
  }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Result:</strong></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Could not find a cart with ID </span><span class="se">\"</span><span class="s2">YYYYY</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphql-no-such-entity"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"line"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"column"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"cart"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cart"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">@expectExceptionMessage</code> annotation provides the text for the exception in this test.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>    <span class="cd">/**
     * @expectedException \Exception
     * @expectedExceptionMessage Could not find a cart with ID "non_existent_masked_id"
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testGetNonExistentCart</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$maskedQuoteId</span> <span class="o">=</span> <span class="s1">'non_existent_masked_id'</span><span class="p">;</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">prepareGetCartQuery</span><span class="p">(</span><span class="nv">$maskedQuoteId</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">graphQlQuery</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
    <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Use the following functions to cover expected exceptions:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">expectException</code></li>
  <li><code class="language-plaintext highlighter-rouge">expectExceptionCode</code></li>
  <li><code class="language-plaintext highlighter-rouge">expectExceptionMessage</code></li>
  <li><code class="language-plaintext highlighter-rouge">expectExceptionMessageRegExp</code></li>
  <li><code class="language-plaintext highlighter-rouge">expectExceptionObject</code></li>
</ul>

<h2 id="run-functional-tests">Run functional tests</h2>

<h3 id="configure-your-instance">Configure your instance</h3>

<ol>
  <li>
    <p>Change directories to <code class="language-plaintext highlighter-rouge">dev/tests/api-functional/</code> and copy the <code class="language-plaintext highlighter-rouge">phpunit_graphql.xml.dist</code> file to <code class="language-plaintext highlighter-rouge">phpunit_graphql.xml</code>.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">cp </span>phpunit_graphql.xml.dist phpunit_graphql.xml
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>Edit <code class="language-plaintext highlighter-rouge">phpunit_graphql.xml</code> to set values for the TESTS_BASE_URL, TESTS_WEBSERVICE_USER, TESTS_WEBSERVICE_APIKEY options:</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>...
<span class="c">&lt;!-- Webserver URL --&gt;</span>
<span class="nt">&lt;const</span> <span class="na">name=</span><span class="s">"TESTS_BASE_URL"</span> <span class="na">value=</span><span class="s">"http://magento.url"</span><span class="nt">/&gt;</span>
<span class="c">&lt;!-- Webserver API user --&gt;</span>
<span class="nt">&lt;const</span> <span class="na">name=</span><span class="s">"TESTS_WEBSERVICE_USER"</span> <span class="na">value=</span><span class="s">"admin"</span><span class="nt">/&gt;</span>
<span class="c">&lt;!-- Webserver API key --&gt;</span>
<span class="nt">&lt;const</span> <span class="na">name=</span><span class="s">"TESTS_WEBSERVICE_APIKEY"</span> <span class="na">value=</span><span class="s">"123123q"</span><span class="nt">/&gt;</span>
...
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ol>

<h3 id="run-all-tests-in-a-api-functional-test-suite">Run all tests in a API functional test suite</h3>

<p><strong>Syntax:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vendor/bin/phpunit <span class="nt">-c</span> dev/tests/api-functional/phpunit_graphql.xml dev/tests/api-functional/testsuite/&lt;Vendor&gt;/&lt;Module&gt;/&lt;TestFile&gt;.php
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Example:</strong></p>

<p>To run all tests from <a href="https://github.com/magento/magento2/blob/2.3.1/dev/tests/api-functional/testsuite/Magento/GraphQl/Customer/GenerateCustomerTokenTest.php">dev/tests/api-functional/testsuite/Magento/GraphQl/Customer/GenerateCustomerTokenTest.php</a>, run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vendor/bin/phpunit <span class="nt">-c</span> dev/tests/api-functional/phpunit_graphql.xml dev/tests/api-functional/testsuite/Magento/GraphQl/Customer/GenerateCustomerTokenTest.php
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="run-a-single-test-in-a-api-functional-test-suite">Run a single test in a API functional test suite</h3>

<p><strong>Syntax:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vendor/bin/phpunit <span class="nt">-c</span> dev/tests/api-functional/phpunit_graphql.xml <span class="nt">--filter</span> &lt;testFunctionName&gt; dev/tests/api-functional/testsuite/&lt;Vendor&gt;/&lt;Module&gt;/&lt;TestFile&gt;.php
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Example:</strong></p>

<p>To run <code class="language-plaintext highlighter-rouge">testGenerateCustomerValidToken</code> test from <a href="https://github.com/magento/magento2/blob/2.3.1/dev/tests/api-functional/testsuite/Magento/GraphQl/Customer/GenerateCustomerTokenTest.php">dev/tests/api-functional/testsuite/Magento/GraphQl/Customer/GenerateCustomerTokenTest.php</a>, run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vendor/bin/phpunit <span class="nt">-c</span> dev/tests/api-functional/phpunit_graphql.xml <span class="nt">--filter</span> testGenerateCustomerValidToken dev/tests/api-functional/testsuite/Magento/GraphQl/Customer/GenerateCustomerTokenTest.php
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="run-a-selected-group-of-tests-in-an-api-functional-test-suite">Run a selected group of tests in an API functional test suite</h3>

<p>Use the <code class="language-plaintext highlighter-rouge">@group</code> directive in the test annotation to add the ability to run a group tests.</p>

<p><strong>Syntax:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vendor/bin/phpunit <span class="nt">-c</span> dev/tests/api-functional/phpunit_graphql.xml <span class="nt">--group</span> &lt;TEST_GROUP_ALIAS&gt; dev/tests/api-functional/testsuite/&lt;Vendor&gt;/&lt;Module&gt;/&lt;TestFile&gt;.php
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Example:</strong></p>

<p>The <code class="language-plaintext highlighter-rouge">testGetCartTotalsWithNoAddressSet</code> test is marked with <code class="language-plaintext highlighter-rouge">@group recent</code>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">Magento\GraphQl</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="err">\</span><span class="nc">Magento\TestFramework\TestCase\GraphQlAbstract</span>

    <span class="cd">/**
     * @group my_test_group
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testFunction1</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="mf">...</span>
    <span class="p">}</span>

    <span class="cd">/**
     * @group my_test_group
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testFunction2</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="mf">...</span>
    <span class="p">}</span>

    <span class="cd">/**
     *
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">testFunction3</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="mf">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To run the <code class="language-plaintext highlighter-rouge">testFunction1</code> and <code class="language-plaintext highlighter-rouge">testFunction2</code> tests, which are part of the <code class="language-plaintext highlighter-rouge">my_test_group</code> group, use the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vendor/bin/phpunit <span class="nt">-c</span> dev/tests/api-functional/phpunit_graphql.xml <span class="nt">--group</span> my_test_group dev/tests/api-functional/testsuite/Magento/GraphQl/MyTest.php
</pre></td></tr></tbody></table></code></pre></div></div>

			</main>
			<footer class="content-footer">
				<button class="page-updated spectrum-ActionButton spectrum-ActionButton--sizeM spectrum-ActionButton--quiet">
  <img class="spectrum-Icon spectrum-Icon--sizeS" src="/devdocs-archive/2.3/assets/i/icons/time.svg" alt="Updated" />
  <time class="spectrum-ActionButton-label" id="last-modified-at" itemprop="dateModified"
    datetime="2021-10-15">
    Oct 15th, 2021
  </time>
</button>

			</footer>
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  <div class="page-contributor">
  <a href="https://www.atwix.com/" target="_blank">
    Thanks to Atwix for contributing this topic
  </a>
</div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->

</div>
<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
    <div class="container">
  
      <div class="copyright-links">
        

<ul class="nav footer-links" role="menu">

  <li class="  " role="menuitem"><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md" class=" ">Become a Contributor</a></li>

  <li class="  " role="menuitem"><a href="https://glossary.magento.com/" class=" ">Glossary</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/privacy/" class=" ">Privacy Policy</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/terms/" class=" ">Terms of Service</a></li>

  <li class="  " role="menuitem"><a href="https://magento.com/legal/licensing/" class=" ">License/Trademark FAQ</a></li>

  <li class="  " role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/release-notes/bk-release-notes.html" class=" ">Release Notes</a></li>

  <li class="  " role="menuitem"><a href="/devdocs-archive/2.3/guides/v2.3/release-notes/packages-open-source.html" class=" ">Third-Party Licenses</a></li>

</ul>

      </div>
  
          <div class="copyright-date">&copy; 2023 Adobe. All rights reserved.</div>
  
    </div>
  </div>
  <!-- / #footer -->
  
  


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/devdocs-archive/2.3/assets/js/app.min.js?ver=20"></script>
<script src="/devdocs-archive/2.3/assets/js/editions.min.js?ver=20"></script>
<script src="/devdocs-archive/2.3/assets/js/page-updated.min.js?ver=20"></script>





<script type="text/javascript" src="/devdocs-archive/2.3/common/js/glossary-link-enhancer.js"></script>


</body>

</html>
